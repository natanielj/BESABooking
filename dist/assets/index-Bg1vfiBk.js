(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var _0={exports:{}},Pc={},E0={exports:{}},he={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var da=Symbol.for("react.element"),rE=Symbol.for("react.portal"),sE=Symbol.for("react.fragment"),iE=Symbol.for("react.strict_mode"),oE=Symbol.for("react.profiler"),aE=Symbol.for("react.provider"),lE=Symbol.for("react.context"),cE=Symbol.for("react.forward_ref"),uE=Symbol.for("react.suspense"),dE=Symbol.for("react.memo"),hE=Symbol.for("react.lazy"),jp=Symbol.iterator;function fE(t){return t===null||typeof t!="object"?null:(t=jp&&t[jp]||t["@@iterator"],typeof t=="function"?t:null)}var N0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b0=Object.assign,T0={};function ki(t,e,n){this.props=t,this.context=e,this.refs=T0,this.updater=n||N0}ki.prototype.isReactComponent={};ki.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ki.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function S0(){}S0.prototype=ki.prototype;function zh(t,e,n){this.props=t,this.context=e,this.refs=T0,this.updater=n||N0}var $h=zh.prototype=new S0;$h.constructor=zh;b0($h,ki.prototype);$h.isPureReactComponent=!0;var Ap=Array.isArray,I0=Object.prototype.hasOwnProperty,Hh={current:null},k0={key:!0,ref:!0,__self:!0,__source:!0};function C0(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)I0.call(e,r)&&!k0.hasOwnProperty(r)&&(s[r]=e[r]);var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)s[r]===void 0&&(s[r]=c[r]);return{$$typeof:da,type:t,key:i,ref:a,props:s,_owner:Hh.current}}function mE(t,e){return{$$typeof:da,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function qh(t){return typeof t=="object"&&t!==null&&t.$$typeof===da}function pE(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Pp=/\/+/g;function Ru(t,e){return typeof t=="object"&&t!==null&&t.key!=null?pE(""+t.key):e.toString(36)}function yl(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case da:case rE:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+Ru(a,0):r,Ap(s)?(n="",t!=null&&(n=t.replace(Pp,"$&/")+"/"),yl(s,e,n,"",function(d){return d})):s!=null&&(qh(s)&&(s=mE(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Pp,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",Ap(t))for(var c=0;c<t.length;c++){i=t[c];var u=r+Ru(i,c);a+=yl(i,e,n,u,s)}else if(u=fE(t),typeof u=="function")for(t=u.call(t),c=0;!(i=t.next()).done;)i=i.value,u=r+Ru(i,c++),a+=yl(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Ga(t,e,n){if(t==null)return t;var r=[],s=0;return yl(t,r,"","",function(i){return e.call(n,i,s++)}),r}function gE(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var It={current:null},xl={transition:null},yE={ReactCurrentDispatcher:It,ReactCurrentBatchConfig:xl,ReactCurrentOwner:Hh};function j0(){throw Error("act(...) is not supported in production builds of React.")}he.Children={map:Ga,forEach:function(t,e,n){Ga(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ga(t,function(){e++}),e},toArray:function(t){return Ga(t,function(e){return e})||[]},only:function(t){if(!qh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};he.Component=ki;he.Fragment=sE;he.Profiler=oE;he.PureComponent=zh;he.StrictMode=iE;he.Suspense=uE;he.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yE;he.act=j0;he.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=b0({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=Hh.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)I0.call(e,u)&&!k0.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:da,type:t.type,key:s,ref:i,props:r,_owner:a}};he.createContext=function(t){return t={$$typeof:lE,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:aE,_context:t},t.Consumer=t};he.createElement=C0;he.createFactory=function(t){var e=C0.bind(null,t);return e.type=t,e};he.createRef=function(){return{current:null}};he.forwardRef=function(t){return{$$typeof:cE,render:t}};he.isValidElement=qh;he.lazy=function(t){return{$$typeof:hE,_payload:{_status:-1,_result:t},_init:gE}};he.memo=function(t,e){return{$$typeof:dE,type:t,compare:e===void 0?null:e}};he.startTransition=function(t){var e=xl.transition;xl.transition={};try{t()}finally{xl.transition=e}};he.unstable_act=j0;he.useCallback=function(t,e){return It.current.useCallback(t,e)};he.useContext=function(t){return It.current.useContext(t)};he.useDebugValue=function(){};he.useDeferredValue=function(t){return It.current.useDeferredValue(t)};he.useEffect=function(t,e){return It.current.useEffect(t,e)};he.useId=function(){return It.current.useId()};he.useImperativeHandle=function(t,e,n){return It.current.useImperativeHandle(t,e,n)};he.useInsertionEffect=function(t,e){return It.current.useInsertionEffect(t,e)};he.useLayoutEffect=function(t,e){return It.current.useLayoutEffect(t,e)};he.useMemo=function(t,e){return It.current.useMemo(t,e)};he.useReducer=function(t,e,n){return It.current.useReducer(t,e,n)};he.useRef=function(t){return It.current.useRef(t)};he.useState=function(t){return It.current.useState(t)};he.useSyncExternalStore=function(t,e,n){return It.current.useSyncExternalStore(t,e,n)};he.useTransition=function(){return It.current.useTransition()};he.version="18.3.1";E0.exports=he;var R=E0.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xE=R,vE=Symbol.for("react.element"),wE=Symbol.for("react.fragment"),_E=Object.prototype.hasOwnProperty,EE=xE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,NE={key:!0,ref:!0,__self:!0,__source:!0};function A0(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)_E.call(e,r)&&!NE.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:vE,type:t,key:i,ref:a,props:s,_owner:EE.current}}Pc.Fragment=wE;Pc.jsx=A0;Pc.jsxs=A0;_0.exports=Pc;var o=_0.exports,P0={exports:{}},$t={},R0={exports:{}},D0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,z){var q=O.length;O.push(z);e:for(;0<q;){var Z=q-1>>>1,ue=O[Z];if(0<s(ue,z))O[Z]=z,O[q]=ue,q=Z;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var z=O[0],q=O.pop();if(q!==z){O[0]=q;e:for(var Z=0,ue=O.length,de=ue>>>1;Z<de;){var Je=2*(Z+1)-1,be=O[Je],Ae=Je+1,F=O[Ae];if(0>s(be,q))Ae<ue&&0>s(F,be)?(O[Z]=F,O[Ae]=q,Z=Ae):(O[Z]=be,O[Je]=q,Z=Je);else if(Ae<ue&&0>s(F,q))O[Z]=F,O[Ae]=q,Z=Ae;else break e}}return z}function s(O,z){var q=O.sortIndex-z.sortIndex;return q!==0?q:O.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}var u=[],d=[],p=1,f=null,m=3,T=!1,k=!1,j=!1,P=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(O){for(var z=n(d);z!==null;){if(z.callback===null)r(d);else if(z.startTime<=O)r(d),z.sortIndex=z.expirationTime,e(u,z);else break;z=n(d)}}function A(O){if(j=!1,w(O),!k)if(n(u)!==null)k=!0,te(D);else{var z=n(d);z!==null&&X(A,z.startTime-O)}}function D(O,z){k=!1,j&&(j=!1,b(x),x=-1),T=!0;var q=m;try{for(w(z),f=n(u);f!==null&&(!(f.expirationTime>z)||O&&!S());){var Z=f.callback;if(typeof Z=="function"){f.callback=null,m=f.priorityLevel;var ue=Z(f.expirationTime<=z);z=t.unstable_now(),typeof ue=="function"?f.callback=ue:f===n(u)&&r(u),w(z)}else r(u);f=n(u)}if(f!==null)var de=!0;else{var Je=n(d);Je!==null&&X(A,Je.startTime-z),de=!1}return de}finally{f=null,m=q,T=!1}}var V=!1,N=null,x=-1,E=5,I=-1;function S(){return!(t.unstable_now()-I<E)}function C(){if(N!==null){var O=t.unstable_now();I=O;var z=!0;try{z=N(!0,O)}finally{z?v():(V=!1,N=null)}}else V=!1}var v;if(typeof y=="function")v=function(){y(C)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,G=H.port2;H.port1.onmessage=C,v=function(){G.postMessage(null)}}else v=function(){P(C,0)};function te(O){N=O,V||(V=!0,v())}function X(O,z){x=P(function(){O(t.unstable_now())},z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){k||T||(k=!0,te(D))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(O){switch(m){case 1:case 2:case 3:var z=3;break;default:z=m}var q=m;m=z;try{return O()}finally{m=q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,z){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var q=m;m=O;try{return z()}finally{m=q}},t.unstable_scheduleCallback=function(O,z,q){var Z=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?Z+q:Z):q=Z,O){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=q+ue,O={id:p++,callback:z,priorityLevel:O,startTime:q,expirationTime:ue,sortIndex:-1},q>Z?(O.sortIndex=q,e(d,O),n(u)===null&&O===n(d)&&(j?(b(x),x=-1):j=!0,X(A,q-Z))):(O.sortIndex=ue,e(u,O),k||T||(k=!0,te(D))),O},t.unstable_shouldYield=S,t.unstable_wrapCallback=function(O){var z=m;return function(){var q=m;m=z;try{return O.apply(this,arguments)}finally{m=q}}}})(D0);R0.exports=D0;var bE=R0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TE=R,zt=bE;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var M0=new Set,Oo={};function Ts(t,e){hi(t,e),hi(t+"Capture",e)}function hi(t,e){for(Oo[t]=e,t=0;t<e.length;t++)M0.add(e[t])}var Wn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_d=Object.prototype.hasOwnProperty,SE=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Rp={},Dp={};function IE(t){return _d.call(Dp,t)?!0:_d.call(Rp,t)?!1:SE.test(t)?Dp[t]=!0:(Rp[t]=!0,!1)}function kE(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function CE(t,e,n,r){if(e===null||typeof e>"u"||kE(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function kt(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var lt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){lt[t]=new kt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];lt[e]=new kt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){lt[t]=new kt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){lt[t]=new kt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){lt[t]=new kt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){lt[t]=new kt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){lt[t]=new kt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){lt[t]=new kt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){lt[t]=new kt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Wh=/[\-:]([a-z])/g;function Gh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Wh,Gh);lt[e]=new kt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Wh,Gh);lt[e]=new kt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Wh,Gh);lt[e]=new kt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){lt[t]=new kt(t,1,!1,t.toLowerCase(),null,!1,!1)});lt.xlinkHref=new kt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){lt[t]=new kt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Kh(t,e,n,r){var s=lt.hasOwnProperty(e)?lt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(CE(e,n,s,r)&&(n=null),r||s===null?IE(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var nr=TE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ka=Symbol.for("react.element"),Bs=Symbol.for("react.portal"),zs=Symbol.for("react.fragment"),Qh=Symbol.for("react.strict_mode"),Ed=Symbol.for("react.profiler"),V0=Symbol.for("react.provider"),L0=Symbol.for("react.context"),Yh=Symbol.for("react.forward_ref"),Nd=Symbol.for("react.suspense"),bd=Symbol.for("react.suspense_list"),Xh=Symbol.for("react.memo"),cr=Symbol.for("react.lazy"),O0=Symbol.for("react.offscreen"),Mp=Symbol.iterator;function so(t){return t===null||typeof t!="object"?null:(t=Mp&&t[Mp]||t["@@iterator"],typeof t=="function"?t:null)}var Me=Object.assign,Du;function po(t){if(Du===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Du=e&&e[1]||""}return`
`+Du+t}var Mu=!1;function Vu(t,e){if(!t||Mu)return"";Mu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,c=i.length-1;1<=a&&0<=c&&s[a]!==i[c];)c--;for(;1<=a&&0<=c;a--,c--)if(s[a]!==i[c]){if(a!==1||c!==1)do if(a--,c--,0>c||s[a]!==i[c]){var u=`
`+s[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=c);break}}}finally{Mu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?po(t):""}function jE(t){switch(t.tag){case 5:return po(t.type);case 16:return po("Lazy");case 13:return po("Suspense");case 19:return po("SuspenseList");case 0:case 2:case 15:return t=Vu(t.type,!1),t;case 11:return t=Vu(t.type.render,!1),t;case 1:return t=Vu(t.type,!0),t;default:return""}}function Td(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case zs:return"Fragment";case Bs:return"Portal";case Ed:return"Profiler";case Qh:return"StrictMode";case Nd:return"Suspense";case bd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case L0:return(t.displayName||"Context")+".Consumer";case V0:return(t._context.displayName||"Context")+".Provider";case Yh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Xh:return e=t.displayName||null,e!==null?e:Td(t.type)||"Memo";case cr:e=t._payload,t=t._init;try{return Td(t(e))}catch{}}return null}function AE(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Td(e);case 8:return e===Qh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Mr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function F0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function PE(t){var e=F0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Qa(t){t._valueTracker||(t._valueTracker=PE(t))}function U0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=F0(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Bl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Sd(t,e){var n=e.checked;return Me({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Vp(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Mr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function B0(t,e){e=e.checked,e!=null&&Kh(t,"checked",e,!1)}function Id(t,e){B0(t,e);var n=Mr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?kd(t,e.type,n):e.hasOwnProperty("defaultValue")&&kd(t,e.type,Mr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Lp(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function kd(t,e,n){(e!=="number"||Bl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var go=Array.isArray;function ei(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Mr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Cd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return Me({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Op(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error($(92));if(go(n)){if(1<n.length)throw Error($(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Mr(n)}}function z0(t,e){var n=Mr(e.value),r=Mr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Fp(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function $0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function jd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?$0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ya,H0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ya=Ya||document.createElement("div"),Ya.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ya.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Fo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var No={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},RE=["Webkit","ms","Moz","O"];Object.keys(No).forEach(function(t){RE.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),No[e]=No[t]})});function q0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||No.hasOwnProperty(t)&&No[t]?(""+e).trim():e+"px"}function W0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=q0(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var DE=Me({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ad(t,e){if(e){if(DE[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function Pd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rd=null;function Jh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Dd=null,ti=null,ni=null;function Up(t){if(t=ma(t)){if(typeof Dd!="function")throw Error($(280));var e=t.stateNode;e&&(e=Lc(e),Dd(t.stateNode,t.type,e))}}function G0(t){ti?ni?ni.push(t):ni=[t]:ti=t}function K0(){if(ti){var t=ti,e=ni;if(ni=ti=null,Up(t),e)for(t=0;t<e.length;t++)Up(e[t])}}function Q0(t,e){return t(e)}function Y0(){}var Lu=!1;function X0(t,e,n){if(Lu)return t(e,n);Lu=!0;try{return Q0(t,e,n)}finally{Lu=!1,(ti!==null||ni!==null)&&(Y0(),K0())}}function Uo(t,e){var n=t.stateNode;if(n===null)return null;var r=Lc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error($(231,e,typeof n));return n}var Md=!1;if(Wn)try{var io={};Object.defineProperty(io,"passive",{get:function(){Md=!0}}),window.addEventListener("test",io,io),window.removeEventListener("test",io,io)}catch{Md=!1}function ME(t,e,n,r,s,i,a,c,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(p){this.onError(p)}}var bo=!1,zl=null,$l=!1,Vd=null,VE={onError:function(t){bo=!0,zl=t}};function LE(t,e,n,r,s,i,a,c,u){bo=!1,zl=null,ME.apply(VE,arguments)}function OE(t,e,n,r,s,i,a,c,u){if(LE.apply(this,arguments),bo){if(bo){var d=zl;bo=!1,zl=null}else throw Error($(198));$l||($l=!0,Vd=d)}}function Ss(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function J0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Bp(t){if(Ss(t)!==t)throw Error($(188))}function FE(t){var e=t.alternate;if(!e){if(e=Ss(t),e===null)throw Error($(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Bp(s),t;if(i===r)return Bp(s),e;i=i.sibling}throw Error($(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,c=s.child;c;){if(c===n){a=!0,n=s,r=i;break}if(c===r){a=!0,r=s,n=i;break}c=c.sibling}if(!a){for(c=i.child;c;){if(c===n){a=!0,n=i,r=s;break}if(c===r){a=!0,r=i,n=s;break}c=c.sibling}if(!a)throw Error($(189))}}if(n.alternate!==r)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?t:e}function Z0(t){return t=FE(t),t!==null?ex(t):null}function ex(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=ex(t);if(e!==null)return e;t=t.sibling}return null}var tx=zt.unstable_scheduleCallback,zp=zt.unstable_cancelCallback,UE=zt.unstable_shouldYield,BE=zt.unstable_requestPaint,Be=zt.unstable_now,zE=zt.unstable_getCurrentPriorityLevel,Zh=zt.unstable_ImmediatePriority,nx=zt.unstable_UserBlockingPriority,Hl=zt.unstable_NormalPriority,$E=zt.unstable_LowPriority,rx=zt.unstable_IdlePriority,Rc=null,En=null;function HE(t){if(En&&typeof En.onCommitFiberRoot=="function")try{En.onCommitFiberRoot(Rc,t,void 0,(t.current.flags&128)===128)}catch{}}var dn=Math.clz32?Math.clz32:GE,qE=Math.log,WE=Math.LN2;function GE(t){return t>>>=0,t===0?32:31-(qE(t)/WE|0)|0}var Xa=64,Ja=4194304;function yo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ql(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var c=a&~s;c!==0?r=yo(c):(i&=a,i!==0&&(r=yo(i)))}else a=n&~s,a!==0?r=yo(a):i!==0&&(r=yo(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-dn(e),s=1<<n,r|=t[n],e&=~s;return r}function KE(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function QE(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-dn(i),c=1<<a,u=s[a];u===-1?(!(c&n)||c&r)&&(s[a]=KE(c,e)):u<=e&&(t.expiredLanes|=c),i&=~c}}function Ld(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function sx(){var t=Xa;return Xa<<=1,!(Xa&4194240)&&(Xa=64),t}function Ou(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ha(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-dn(e),t[e]=n}function YE(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-dn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function ef(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-dn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var _e=0;function ix(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ox,tf,ax,lx,cx,Od=!1,Za=[],vr=null,wr=null,_r=null,Bo=new Map,zo=new Map,dr=[],XE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $p(t,e){switch(t){case"focusin":case"focusout":vr=null;break;case"dragenter":case"dragleave":wr=null;break;case"mouseover":case"mouseout":_r=null;break;case"pointerover":case"pointerout":Bo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":zo.delete(e.pointerId)}}function oo(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=ma(e),e!==null&&tf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function JE(t,e,n,r,s){switch(e){case"focusin":return vr=oo(vr,t,e,n,r,s),!0;case"dragenter":return wr=oo(wr,t,e,n,r,s),!0;case"mouseover":return _r=oo(_r,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Bo.set(i,oo(Bo.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,zo.set(i,oo(zo.get(i)||null,t,e,n,r,s)),!0}return!1}function ux(t){var e=is(t.target);if(e!==null){var n=Ss(e);if(n!==null){if(e=n.tag,e===13){if(e=J0(n),e!==null){t.blockedOn=e,cx(t.priority,function(){ax(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function vl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Fd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Rd=r,n.target.dispatchEvent(r),Rd=null}else return e=ma(n),e!==null&&tf(e),t.blockedOn=n,!1;e.shift()}return!0}function Hp(t,e,n){vl(t)&&n.delete(e)}function ZE(){Od=!1,vr!==null&&vl(vr)&&(vr=null),wr!==null&&vl(wr)&&(wr=null),_r!==null&&vl(_r)&&(_r=null),Bo.forEach(Hp),zo.forEach(Hp)}function ao(t,e){t.blockedOn===e&&(t.blockedOn=null,Od||(Od=!0,zt.unstable_scheduleCallback(zt.unstable_NormalPriority,ZE)))}function $o(t){function e(s){return ao(s,t)}if(0<Za.length){ao(Za[0],t);for(var n=1;n<Za.length;n++){var r=Za[n];r.blockedOn===t&&(r.blockedOn=null)}}for(vr!==null&&ao(vr,t),wr!==null&&ao(wr,t),_r!==null&&ao(_r,t),Bo.forEach(e),zo.forEach(e),n=0;n<dr.length;n++)r=dr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<dr.length&&(n=dr[0],n.blockedOn===null);)ux(n),n.blockedOn===null&&dr.shift()}var ri=nr.ReactCurrentBatchConfig,Wl=!0;function eN(t,e,n,r){var s=_e,i=ri.transition;ri.transition=null;try{_e=1,nf(t,e,n,r)}finally{_e=s,ri.transition=i}}function tN(t,e,n,r){var s=_e,i=ri.transition;ri.transition=null;try{_e=4,nf(t,e,n,r)}finally{_e=s,ri.transition=i}}function nf(t,e,n,r){if(Wl){var s=Fd(t,e,n,r);if(s===null)Ku(t,e,r,Gl,n),$p(t,r);else if(JE(s,t,e,n,r))r.stopPropagation();else if($p(t,r),e&4&&-1<XE.indexOf(t)){for(;s!==null;){var i=ma(s);if(i!==null&&ox(i),i=Fd(t,e,n,r),i===null&&Ku(t,e,r,Gl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Ku(t,e,r,null,n)}}var Gl=null;function Fd(t,e,n,r){if(Gl=null,t=Jh(r),t=is(t),t!==null)if(e=Ss(t),e===null)t=null;else if(n=e.tag,n===13){if(t=J0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Gl=t,null}function dx(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(zE()){case Zh:return 1;case nx:return 4;case Hl:case $E:return 16;case rx:return 536870912;default:return 16}default:return 16}}var gr=null,rf=null,wl=null;function hx(){if(wl)return wl;var t,e=rf,n=e.length,r,s="value"in gr?gr.value:gr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return wl=s.slice(t,1<r?1-r:void 0)}function _l(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function el(){return!0}function qp(){return!1}function Ht(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?el:qp,this.isPropagationStopped=qp,this}return Me(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=el)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=el)},persist:function(){},isPersistent:el}),e}var Ci={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sf=Ht(Ci),fa=Me({},Ci,{view:0,detail:0}),nN=Ht(fa),Fu,Uu,lo,Dc=Me({},fa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:of,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==lo&&(lo&&t.type==="mousemove"?(Fu=t.screenX-lo.screenX,Uu=t.screenY-lo.screenY):Uu=Fu=0,lo=t),Fu)},movementY:function(t){return"movementY"in t?t.movementY:Uu}}),Wp=Ht(Dc),rN=Me({},Dc,{dataTransfer:0}),sN=Ht(rN),iN=Me({},fa,{relatedTarget:0}),Bu=Ht(iN),oN=Me({},Ci,{animationName:0,elapsedTime:0,pseudoElement:0}),aN=Ht(oN),lN=Me({},Ci,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),cN=Ht(lN),uN=Me({},Ci,{data:0}),Gp=Ht(uN),dN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mN(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=fN[t])?!!e[t]:!1}function of(){return mN}var pN=Me({},fa,{key:function(t){if(t.key){var e=dN[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=_l(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?hN[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:of,charCode:function(t){return t.type==="keypress"?_l(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?_l(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),gN=Ht(pN),yN=Me({},Dc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Kp=Ht(yN),xN=Me({},fa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:of}),vN=Ht(xN),wN=Me({},Ci,{propertyName:0,elapsedTime:0,pseudoElement:0}),_N=Ht(wN),EN=Me({},Dc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),NN=Ht(EN),bN=[9,13,27,32],af=Wn&&"CompositionEvent"in window,To=null;Wn&&"documentMode"in document&&(To=document.documentMode);var TN=Wn&&"TextEvent"in window&&!To,fx=Wn&&(!af||To&&8<To&&11>=To),Qp=" ",Yp=!1;function mx(t,e){switch(t){case"keyup":return bN.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function px(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var $s=!1;function SN(t,e){switch(t){case"compositionend":return px(e);case"keypress":return e.which!==32?null:(Yp=!0,Qp);case"textInput":return t=e.data,t===Qp&&Yp?null:t;default:return null}}function IN(t,e){if($s)return t==="compositionend"||!af&&mx(t,e)?(t=hx(),wl=rf=gr=null,$s=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return fx&&e.locale!=="ko"?null:e.data;default:return null}}var kN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!kN[t.type]:e==="textarea"}function gx(t,e,n,r){G0(r),e=Kl(e,"onChange"),0<e.length&&(n=new sf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var So=null,Ho=null;function CN(t){Ix(t,0)}function Mc(t){var e=Ws(t);if(U0(e))return t}function jN(t,e){if(t==="change")return e}var yx=!1;if(Wn){var zu;if(Wn){var $u="oninput"in document;if(!$u){var Jp=document.createElement("div");Jp.setAttribute("oninput","return;"),$u=typeof Jp.oninput=="function"}zu=$u}else zu=!1;yx=zu&&(!document.documentMode||9<document.documentMode)}function Zp(){So&&(So.detachEvent("onpropertychange",xx),Ho=So=null)}function xx(t){if(t.propertyName==="value"&&Mc(Ho)){var e=[];gx(e,Ho,t,Jh(t)),X0(CN,e)}}function AN(t,e,n){t==="focusin"?(Zp(),So=e,Ho=n,So.attachEvent("onpropertychange",xx)):t==="focusout"&&Zp()}function PN(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Mc(Ho)}function RN(t,e){if(t==="click")return Mc(e)}function DN(t,e){if(t==="input"||t==="change")return Mc(e)}function MN(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var fn=typeof Object.is=="function"?Object.is:MN;function qo(t,e){if(fn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!_d.call(e,s)||!fn(t[s],e[s]))return!1}return!0}function eg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function tg(t,e){var n=eg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=eg(n)}}function vx(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?vx(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function wx(){for(var t=window,e=Bl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Bl(t.document)}return e}function lf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function VN(t){var e=wx(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&vx(n.ownerDocument.documentElement,n)){if(r!==null&&lf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=tg(n,i);var a=tg(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var LN=Wn&&"documentMode"in document&&11>=document.documentMode,Hs=null,Ud=null,Io=null,Bd=!1;function ng(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Bd||Hs==null||Hs!==Bl(r)||(r=Hs,"selectionStart"in r&&lf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Io&&qo(Io,r)||(Io=r,r=Kl(Ud,"onSelect"),0<r.length&&(e=new sf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Hs)))}function tl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var qs={animationend:tl("Animation","AnimationEnd"),animationiteration:tl("Animation","AnimationIteration"),animationstart:tl("Animation","AnimationStart"),transitionend:tl("Transition","TransitionEnd")},Hu={},_x={};Wn&&(_x=document.createElement("div").style,"AnimationEvent"in window||(delete qs.animationend.animation,delete qs.animationiteration.animation,delete qs.animationstart.animation),"TransitionEvent"in window||delete qs.transitionend.transition);function Vc(t){if(Hu[t])return Hu[t];if(!qs[t])return t;var e=qs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in _x)return Hu[t]=e[n];return t}var Ex=Vc("animationend"),Nx=Vc("animationiteration"),bx=Vc("animationstart"),Tx=Vc("transitionend"),Sx=new Map,rg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qr(t,e){Sx.set(t,e),Ts(e,[t])}for(var qu=0;qu<rg.length;qu++){var Wu=rg[qu],ON=Wu.toLowerCase(),FN=Wu[0].toUpperCase()+Wu.slice(1);qr(ON,"on"+FN)}qr(Ex,"onAnimationEnd");qr(Nx,"onAnimationIteration");qr(bx,"onAnimationStart");qr("dblclick","onDoubleClick");qr("focusin","onFocus");qr("focusout","onBlur");qr(Tx,"onTransitionEnd");hi("onMouseEnter",["mouseout","mouseover"]);hi("onMouseLeave",["mouseout","mouseover"]);hi("onPointerEnter",["pointerout","pointerover"]);hi("onPointerLeave",["pointerout","pointerover"]);Ts("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ts("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ts("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ts("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ts("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ts("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),UN=new Set("cancel close invalid load scroll toggle".split(" ").concat(xo));function sg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,OE(r,e,void 0,t),t.currentTarget=null}function Ix(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var c=r[a],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==i&&s.isPropagationStopped())break e;sg(s,c,d),i=u}else for(a=0;a<r.length;a++){if(c=r[a],u=c.instance,d=c.currentTarget,c=c.listener,u!==i&&s.isPropagationStopped())break e;sg(s,c,d),i=u}}}if($l)throw t=Vd,$l=!1,Vd=null,t}function Se(t,e){var n=e[Wd];n===void 0&&(n=e[Wd]=new Set);var r=t+"__bubble";n.has(r)||(kx(e,t,2,!1),n.add(r))}function Gu(t,e,n){var r=0;e&&(r|=4),kx(n,t,r,e)}var nl="_reactListening"+Math.random().toString(36).slice(2);function Wo(t){if(!t[nl]){t[nl]=!0,M0.forEach(function(n){n!=="selectionchange"&&(UN.has(n)||Gu(n,!1,t),Gu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[nl]||(e[nl]=!0,Gu("selectionchange",!1,e))}}function kx(t,e,n,r){switch(dx(e)){case 1:var s=eN;break;case 4:s=tN;break;default:s=nf}n=s.bind(null,e,n,t),s=void 0,!Md||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Ku(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var c=r.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;a=a.return}for(;c!==null;){if(a=is(c),a===null)return;if(u=a.tag,u===5||u===6){r=i=a;continue e}c=c.parentNode}}r=r.return}X0(function(){var d=i,p=Jh(n),f=[];e:{var m=Sx.get(t);if(m!==void 0){var T=sf,k=t;switch(t){case"keypress":if(_l(n)===0)break e;case"keydown":case"keyup":T=gN;break;case"focusin":k="focus",T=Bu;break;case"focusout":k="blur",T=Bu;break;case"beforeblur":case"afterblur":T=Bu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=Wp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=sN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=vN;break;case Ex:case Nx:case bx:T=aN;break;case Tx:T=_N;break;case"scroll":T=nN;break;case"wheel":T=NN;break;case"copy":case"cut":case"paste":T=cN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=Kp}var j=(e&4)!==0,P=!j&&t==="scroll",b=j?m!==null?m+"Capture":null:m;j=[];for(var y=d,w;y!==null;){w=y;var A=w.stateNode;if(w.tag===5&&A!==null&&(w=A,b!==null&&(A=Uo(y,b),A!=null&&j.push(Go(y,A,w)))),P)break;y=y.return}0<j.length&&(m=new T(m,k,null,n,p),f.push({event:m,listeners:j}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",T=t==="mouseout"||t==="pointerout",m&&n!==Rd&&(k=n.relatedTarget||n.fromElement)&&(is(k)||k[Gn]))break e;if((T||m)&&(m=p.window===p?p:(m=p.ownerDocument)?m.defaultView||m.parentWindow:window,T?(k=n.relatedTarget||n.toElement,T=d,k=k?is(k):null,k!==null&&(P=Ss(k),k!==P||k.tag!==5&&k.tag!==6)&&(k=null)):(T=null,k=d),T!==k)){if(j=Wp,A="onMouseLeave",b="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(j=Kp,A="onPointerLeave",b="onPointerEnter",y="pointer"),P=T==null?m:Ws(T),w=k==null?m:Ws(k),m=new j(A,y+"leave",T,n,p),m.target=P,m.relatedTarget=w,A=null,is(p)===d&&(j=new j(b,y+"enter",k,n,p),j.target=w,j.relatedTarget=P,A=j),P=A,T&&k)t:{for(j=T,b=k,y=0,w=j;w;w=Vs(w))y++;for(w=0,A=b;A;A=Vs(A))w++;for(;0<y-w;)j=Vs(j),y--;for(;0<w-y;)b=Vs(b),w--;for(;y--;){if(j===b||b!==null&&j===b.alternate)break t;j=Vs(j),b=Vs(b)}j=null}else j=null;T!==null&&ig(f,m,T,j,!1),k!==null&&P!==null&&ig(f,P,k,j,!0)}}e:{if(m=d?Ws(d):window,T=m.nodeName&&m.nodeName.toLowerCase(),T==="select"||T==="input"&&m.type==="file")var D=jN;else if(Xp(m))if(yx)D=DN;else{D=PN;var V=AN}else(T=m.nodeName)&&T.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(D=RN);if(D&&(D=D(t,d))){gx(f,D,n,p);break e}V&&V(t,m,d),t==="focusout"&&(V=m._wrapperState)&&V.controlled&&m.type==="number"&&kd(m,"number",m.value)}switch(V=d?Ws(d):window,t){case"focusin":(Xp(V)||V.contentEditable==="true")&&(Hs=V,Ud=d,Io=null);break;case"focusout":Io=Ud=Hs=null;break;case"mousedown":Bd=!0;break;case"contextmenu":case"mouseup":case"dragend":Bd=!1,ng(f,n,p);break;case"selectionchange":if(LN)break;case"keydown":case"keyup":ng(f,n,p)}var N;if(af)e:{switch(t){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else $s?mx(t,n)&&(x="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(x="onCompositionStart");x&&(fx&&n.locale!=="ko"&&($s||x!=="onCompositionStart"?x==="onCompositionEnd"&&$s&&(N=hx()):(gr=p,rf="value"in gr?gr.value:gr.textContent,$s=!0)),V=Kl(d,x),0<V.length&&(x=new Gp(x,t,null,n,p),f.push({event:x,listeners:V}),N?x.data=N:(N=px(n),N!==null&&(x.data=N)))),(N=TN?SN(t,n):IN(t,n))&&(d=Kl(d,"onBeforeInput"),0<d.length&&(p=new Gp("onBeforeInput","beforeinput",null,n,p),f.push({event:p,listeners:d}),p.data=N))}Ix(f,e)})}function Go(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Kl(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Uo(t,n),i!=null&&r.unshift(Go(t,i,s)),i=Uo(t,e),i!=null&&r.push(Go(t,i,s))),t=t.return}return r}function Vs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ig(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var c=n,u=c.alternate,d=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&d!==null&&(c=d,s?(u=Uo(n,i),u!=null&&a.unshift(Go(n,u,c))):s||(u=Uo(n,i),u!=null&&a.push(Go(n,u,c)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var BN=/\r\n?/g,zN=/\u0000|\uFFFD/g;function og(t){return(typeof t=="string"?t:""+t).replace(BN,`
`).replace(zN,"")}function rl(t,e,n){if(e=og(e),og(t)!==e&&n)throw Error($(425))}function Ql(){}var zd=null,$d=null;function Hd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var qd=typeof setTimeout=="function"?setTimeout:void 0,$N=typeof clearTimeout=="function"?clearTimeout:void 0,ag=typeof Promise=="function"?Promise:void 0,HN=typeof queueMicrotask=="function"?queueMicrotask:typeof ag<"u"?function(t){return ag.resolve(null).then(t).catch(qN)}:qd;function qN(t){setTimeout(function(){throw t})}function Qu(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),$o(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);$o(e)}function Er(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function lg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ji=Math.random().toString(36).slice(2),vn="__reactFiber$"+ji,Ko="__reactProps$"+ji,Gn="__reactContainer$"+ji,Wd="__reactEvents$"+ji,WN="__reactListeners$"+ji,GN="__reactHandles$"+ji;function is(t){var e=t[vn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Gn]||n[vn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=lg(t);t!==null;){if(n=t[vn])return n;t=lg(t)}return e}t=n,n=t.parentNode}return null}function ma(t){return t=t[vn]||t[Gn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ws(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function Lc(t){return t[Ko]||null}var Gd=[],Gs=-1;function Wr(t){return{current:t}}function Ce(t){0>Gs||(t.current=Gd[Gs],Gd[Gs]=null,Gs--)}function Ne(t,e){Gs++,Gd[Gs]=t.current,t.current=e}var Vr={},vt=Wr(Vr),Rt=Wr(!1),ps=Vr;function fi(t,e){var n=t.type.contextTypes;if(!n)return Vr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Dt(t){return t=t.childContextTypes,t!=null}function Yl(){Ce(Rt),Ce(vt)}function cg(t,e,n){if(vt.current!==Vr)throw Error($(168));Ne(vt,e),Ne(Rt,n)}function Cx(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error($(108,AE(t)||"Unknown",s));return Me({},n,r)}function Xl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Vr,ps=vt.current,Ne(vt,t),Ne(Rt,Rt.current),!0}function ug(t,e,n){var r=t.stateNode;if(!r)throw Error($(169));n?(t=Cx(t,e,ps),r.__reactInternalMemoizedMergedChildContext=t,Ce(Rt),Ce(vt),Ne(vt,t)):Ce(Rt),Ne(Rt,n)}var On=null,Oc=!1,Yu=!1;function jx(t){On===null?On=[t]:On.push(t)}function KN(t){Oc=!0,jx(t)}function Gr(){if(!Yu&&On!==null){Yu=!0;var t=0,e=_e;try{var n=On;for(_e=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}On=null,Oc=!1}catch(s){throw On!==null&&(On=On.slice(t+1)),tx(Zh,Gr),s}finally{_e=e,Yu=!1}}return null}var Ks=[],Qs=0,Jl=null,Zl=0,Gt=[],Kt=0,gs=null,Un=1,Bn="";function ns(t,e){Ks[Qs++]=Zl,Ks[Qs++]=Jl,Jl=t,Zl=e}function Ax(t,e,n){Gt[Kt++]=Un,Gt[Kt++]=Bn,Gt[Kt++]=gs,gs=t;var r=Un;t=Bn;var s=32-dn(r)-1;r&=~(1<<s),n+=1;var i=32-dn(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Un=1<<32-dn(e)+s|n<<s|r,Bn=i+t}else Un=1<<i|n<<s|r,Bn=t}function cf(t){t.return!==null&&(ns(t,1),Ax(t,1,0))}function uf(t){for(;t===Jl;)Jl=Ks[--Qs],Ks[Qs]=null,Zl=Ks[--Qs],Ks[Qs]=null;for(;t===gs;)gs=Gt[--Kt],Gt[Kt]=null,Bn=Gt[--Kt],Gt[Kt]=null,Un=Gt[--Kt],Gt[Kt]=null}var Bt=null,Ot=null,je=!1,cn=null;function Px(t,e){var n=Yt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function dg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Bt=t,Ot=Er(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Bt=t,Ot=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=gs!==null?{id:Un,overflow:Bn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Yt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Bt=t,Ot=null,!0):!1;default:return!1}}function Kd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Qd(t){if(je){var e=Ot;if(e){var n=e;if(!dg(t,e)){if(Kd(t))throw Error($(418));e=Er(n.nextSibling);var r=Bt;e&&dg(t,e)?Px(r,n):(t.flags=t.flags&-4097|2,je=!1,Bt=t)}}else{if(Kd(t))throw Error($(418));t.flags=t.flags&-4097|2,je=!1,Bt=t}}}function hg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Bt=t}function sl(t){if(t!==Bt)return!1;if(!je)return hg(t),je=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Hd(t.type,t.memoizedProps)),e&&(e=Ot)){if(Kd(t))throw Rx(),Error($(418));for(;e;)Px(t,e),e=Er(e.nextSibling)}if(hg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ot=Er(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ot=null}}else Ot=Bt?Er(t.stateNode.nextSibling):null;return!0}function Rx(){for(var t=Ot;t;)t=Er(t.nextSibling)}function mi(){Ot=Bt=null,je=!1}function df(t){cn===null?cn=[t]:cn.push(t)}var QN=nr.ReactCurrentBatchConfig;function co(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var r=n.stateNode}if(!r)throw Error($(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var c=s.refs;a===null?delete c[i]:c[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error($(284));if(!n._owner)throw Error($(290,t))}return t}function il(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function fg(t){var e=t._init;return e(t._payload)}function Dx(t){function e(b,y){if(t){var w=b.deletions;w===null?(b.deletions=[y],b.flags|=16):w.push(y)}}function n(b,y){if(!t)return null;for(;y!==null;)e(b,y),y=y.sibling;return null}function r(b,y){for(b=new Map;y!==null;)y.key!==null?b.set(y.key,y):b.set(y.index,y),y=y.sibling;return b}function s(b,y){return b=Sr(b,y),b.index=0,b.sibling=null,b}function i(b,y,w){return b.index=w,t?(w=b.alternate,w!==null?(w=w.index,w<y?(b.flags|=2,y):w):(b.flags|=2,y)):(b.flags|=1048576,y)}function a(b){return t&&b.alternate===null&&(b.flags|=2),b}function c(b,y,w,A){return y===null||y.tag!==6?(y=rd(w,b.mode,A),y.return=b,y):(y=s(y,w),y.return=b,y)}function u(b,y,w,A){var D=w.type;return D===zs?p(b,y,w.props.children,A,w.key):y!==null&&(y.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===cr&&fg(D)===y.type)?(A=s(y,w.props),A.ref=co(b,y,w),A.return=b,A):(A=kl(w.type,w.key,w.props,null,b.mode,A),A.ref=co(b,y,w),A.return=b,A)}function d(b,y,w,A){return y===null||y.tag!==4||y.stateNode.containerInfo!==w.containerInfo||y.stateNode.implementation!==w.implementation?(y=sd(w,b.mode,A),y.return=b,y):(y=s(y,w.children||[]),y.return=b,y)}function p(b,y,w,A,D){return y===null||y.tag!==7?(y=us(w,b.mode,A,D),y.return=b,y):(y=s(y,w),y.return=b,y)}function f(b,y,w){if(typeof y=="string"&&y!==""||typeof y=="number")return y=rd(""+y,b.mode,w),y.return=b,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ka:return w=kl(y.type,y.key,y.props,null,b.mode,w),w.ref=co(b,null,y),w.return=b,w;case Bs:return y=sd(y,b.mode,w),y.return=b,y;case cr:var A=y._init;return f(b,A(y._payload),w)}if(go(y)||so(y))return y=us(y,b.mode,w,null),y.return=b,y;il(b,y)}return null}function m(b,y,w,A){var D=y!==null?y.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return D!==null?null:c(b,y,""+w,A);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ka:return w.key===D?u(b,y,w,A):null;case Bs:return w.key===D?d(b,y,w,A):null;case cr:return D=w._init,m(b,y,D(w._payload),A)}if(go(w)||so(w))return D!==null?null:p(b,y,w,A,null);il(b,w)}return null}function T(b,y,w,A,D){if(typeof A=="string"&&A!==""||typeof A=="number")return b=b.get(w)||null,c(y,b,""+A,D);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Ka:return b=b.get(A.key===null?w:A.key)||null,u(y,b,A,D);case Bs:return b=b.get(A.key===null?w:A.key)||null,d(y,b,A,D);case cr:var V=A._init;return T(b,y,w,V(A._payload),D)}if(go(A)||so(A))return b=b.get(w)||null,p(y,b,A,D,null);il(y,A)}return null}function k(b,y,w,A){for(var D=null,V=null,N=y,x=y=0,E=null;N!==null&&x<w.length;x++){N.index>x?(E=N,N=null):E=N.sibling;var I=m(b,N,w[x],A);if(I===null){N===null&&(N=E);break}t&&N&&I.alternate===null&&e(b,N),y=i(I,y,x),V===null?D=I:V.sibling=I,V=I,N=E}if(x===w.length)return n(b,N),je&&ns(b,x),D;if(N===null){for(;x<w.length;x++)N=f(b,w[x],A),N!==null&&(y=i(N,y,x),V===null?D=N:V.sibling=N,V=N);return je&&ns(b,x),D}for(N=r(b,N);x<w.length;x++)E=T(N,b,x,w[x],A),E!==null&&(t&&E.alternate!==null&&N.delete(E.key===null?x:E.key),y=i(E,y,x),V===null?D=E:V.sibling=E,V=E);return t&&N.forEach(function(S){return e(b,S)}),je&&ns(b,x),D}function j(b,y,w,A){var D=so(w);if(typeof D!="function")throw Error($(150));if(w=D.call(w),w==null)throw Error($(151));for(var V=D=null,N=y,x=y=0,E=null,I=w.next();N!==null&&!I.done;x++,I=w.next()){N.index>x?(E=N,N=null):E=N.sibling;var S=m(b,N,I.value,A);if(S===null){N===null&&(N=E);break}t&&N&&S.alternate===null&&e(b,N),y=i(S,y,x),V===null?D=S:V.sibling=S,V=S,N=E}if(I.done)return n(b,N),je&&ns(b,x),D;if(N===null){for(;!I.done;x++,I=w.next())I=f(b,I.value,A),I!==null&&(y=i(I,y,x),V===null?D=I:V.sibling=I,V=I);return je&&ns(b,x),D}for(N=r(b,N);!I.done;x++,I=w.next())I=T(N,b,x,I.value,A),I!==null&&(t&&I.alternate!==null&&N.delete(I.key===null?x:I.key),y=i(I,y,x),V===null?D=I:V.sibling=I,V=I);return t&&N.forEach(function(C){return e(b,C)}),je&&ns(b,x),D}function P(b,y,w,A){if(typeof w=="object"&&w!==null&&w.type===zs&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Ka:e:{for(var D=w.key,V=y;V!==null;){if(V.key===D){if(D=w.type,D===zs){if(V.tag===7){n(b,V.sibling),y=s(V,w.props.children),y.return=b,b=y;break e}}else if(V.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===cr&&fg(D)===V.type){n(b,V.sibling),y=s(V,w.props),y.ref=co(b,V,w),y.return=b,b=y;break e}n(b,V);break}else e(b,V);V=V.sibling}w.type===zs?(y=us(w.props.children,b.mode,A,w.key),y.return=b,b=y):(A=kl(w.type,w.key,w.props,null,b.mode,A),A.ref=co(b,y,w),A.return=b,b=A)}return a(b);case Bs:e:{for(V=w.key;y!==null;){if(y.key===V)if(y.tag===4&&y.stateNode.containerInfo===w.containerInfo&&y.stateNode.implementation===w.implementation){n(b,y.sibling),y=s(y,w.children||[]),y.return=b,b=y;break e}else{n(b,y);break}else e(b,y);y=y.sibling}y=sd(w,b.mode,A),y.return=b,b=y}return a(b);case cr:return V=w._init,P(b,y,V(w._payload),A)}if(go(w))return k(b,y,w,A);if(so(w))return j(b,y,w,A);il(b,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,y!==null&&y.tag===6?(n(b,y.sibling),y=s(y,w),y.return=b,b=y):(n(b,y),y=rd(w,b.mode,A),y.return=b,b=y),a(b)):n(b,y)}return P}var pi=Dx(!0),Mx=Dx(!1),ec=Wr(null),tc=null,Ys=null,hf=null;function ff(){hf=Ys=tc=null}function mf(t){var e=ec.current;Ce(ec),t._currentValue=e}function Yd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function si(t,e){tc=t,hf=Ys=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Pt=!0),t.firstContext=null)}function tn(t){var e=t._currentValue;if(hf!==t)if(t={context:t,memoizedValue:e,next:null},Ys===null){if(tc===null)throw Error($(308));Ys=t,tc.dependencies={lanes:0,firstContext:t}}else Ys=Ys.next=t;return e}var os=null;function pf(t){os===null?os=[t]:os.push(t)}function Vx(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,pf(e)):(n.next=s.next,s.next=n),e.interleaved=n,Kn(t,r)}function Kn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ur=!1;function gf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Lx(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Hn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Nr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ye&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Kn(t,n)}return s=r.interleaved,s===null?(e.next=e,pf(r)):(e.next=s.next,s.next=e),r.interleaved=e,Kn(t,n)}function El(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ef(t,n)}}function mg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function nc(t,e,n,r){var s=t.updateQueue;ur=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var u=c,d=u.next;u.next=null,a===null?i=d:a.next=d,a=u;var p=t.alternate;p!==null&&(p=p.updateQueue,c=p.lastBaseUpdate,c!==a&&(c===null?p.firstBaseUpdate=d:c.next=d,p.lastBaseUpdate=u))}if(i!==null){var f=s.baseState;a=0,p=d=u=null,c=i;do{var m=c.lane,T=c.eventTime;if((r&m)===m){p!==null&&(p=p.next={eventTime:T,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var k=t,j=c;switch(m=e,T=n,j.tag){case 1:if(k=j.payload,typeof k=="function"){f=k.call(T,f,m);break e}f=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=j.payload,m=typeof k=="function"?k.call(T,f,m):k,m==null)break e;f=Me({},f,m);break e;case 2:ur=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[c]:m.push(c))}else T={eventTime:T,lane:m,tag:c.tag,payload:c.payload,callback:c.callback,next:null},p===null?(d=p=T,u=f):p=p.next=T,a|=m;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;m=c,c=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(p===null&&(u=f),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=p,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);xs|=a,t.lanes=a,t.memoizedState=f}}function pg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error($(191,s));s.call(r)}}}var pa={},Nn=Wr(pa),Qo=Wr(pa),Yo=Wr(pa);function as(t){if(t===pa)throw Error($(174));return t}function yf(t,e){switch(Ne(Yo,e),Ne(Qo,t),Ne(Nn,pa),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:jd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=jd(e,t)}Ce(Nn),Ne(Nn,e)}function gi(){Ce(Nn),Ce(Qo),Ce(Yo)}function Ox(t){as(Yo.current);var e=as(Nn.current),n=jd(e,t.type);e!==n&&(Ne(Qo,t),Ne(Nn,n))}function xf(t){Qo.current===t&&(Ce(Nn),Ce(Qo))}var Pe=Wr(0);function rc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Xu=[];function vf(){for(var t=0;t<Xu.length;t++)Xu[t]._workInProgressVersionPrimary=null;Xu.length=0}var Nl=nr.ReactCurrentDispatcher,Ju=nr.ReactCurrentBatchConfig,ys=0,Re=null,Ge=null,et=null,sc=!1,ko=!1,Xo=0,YN=0;function ft(){throw Error($(321))}function wf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!fn(t[n],e[n]))return!1;return!0}function _f(t,e,n,r,s,i){if(ys=i,Re=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Nl.current=t===null||t.memoizedState===null?eb:tb,t=n(r,s),ko){i=0;do{if(ko=!1,Xo=0,25<=i)throw Error($(301));i+=1,et=Ge=null,e.updateQueue=null,Nl.current=nb,t=n(r,s)}while(ko)}if(Nl.current=ic,e=Ge!==null&&Ge.next!==null,ys=0,et=Ge=Re=null,sc=!1,e)throw Error($(300));return t}function Ef(){var t=Xo!==0;return Xo=0,t}function yn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return et===null?Re.memoizedState=et=t:et=et.next=t,et}function nn(){if(Ge===null){var t=Re.alternate;t=t!==null?t.memoizedState:null}else t=Ge.next;var e=et===null?Re.memoizedState:et.next;if(e!==null)et=e,Ge=t;else{if(t===null)throw Error($(310));Ge=t,t={memoizedState:Ge.memoizedState,baseState:Ge.baseState,baseQueue:Ge.baseQueue,queue:Ge.queue,next:null},et===null?Re.memoizedState=et=t:et=et.next=t}return et}function Jo(t,e){return typeof e=="function"?e(t):e}function Zu(t){var e=nn(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=Ge,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var c=a=null,u=null,d=i;do{var p=d.lane;if((ys&p)===p)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var f={lane:p,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(c=u=f,a=r):u=u.next=f,Re.lanes|=p,xs|=p}d=d.next}while(d!==null&&d!==i);u===null?a=r:u.next=c,fn(r,e.memoizedState)||(Pt=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Re.lanes|=i,xs|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ed(t){var e=nn(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);fn(i,e.memoizedState)||(Pt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Fx(){}function Ux(t,e){var n=Re,r=nn(),s=e(),i=!fn(r.memoizedState,s);if(i&&(r.memoizedState=s,Pt=!0),r=r.queue,Nf($x.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||et!==null&&et.memoizedState.tag&1){if(n.flags|=2048,Zo(9,zx.bind(null,n,r,s,e),void 0,null),tt===null)throw Error($(349));ys&30||Bx(n,e,s)}return s}function Bx(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Re.updateQueue,e===null?(e={lastEffect:null,stores:null},Re.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function zx(t,e,n,r){e.value=n,e.getSnapshot=r,Hx(e)&&qx(t)}function $x(t,e,n){return n(function(){Hx(e)&&qx(t)})}function Hx(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!fn(t,n)}catch{return!0}}function qx(t){var e=Kn(t,1);e!==null&&hn(e,t,1,-1)}function gg(t){var e=yn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Jo,lastRenderedState:t},e.queue=t,t=t.dispatch=ZN.bind(null,Re,t),[e.memoizedState,t]}function Zo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Re.updateQueue,e===null?(e={lastEffect:null,stores:null},Re.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Wx(){return nn().memoizedState}function bl(t,e,n,r){var s=yn();Re.flags|=t,s.memoizedState=Zo(1|e,n,void 0,r===void 0?null:r)}function Fc(t,e,n,r){var s=nn();r=r===void 0?null:r;var i=void 0;if(Ge!==null){var a=Ge.memoizedState;if(i=a.destroy,r!==null&&wf(r,a.deps)){s.memoizedState=Zo(e,n,i,r);return}}Re.flags|=t,s.memoizedState=Zo(1|e,n,i,r)}function yg(t,e){return bl(8390656,8,t,e)}function Nf(t,e){return Fc(2048,8,t,e)}function Gx(t,e){return Fc(4,2,t,e)}function Kx(t,e){return Fc(4,4,t,e)}function Qx(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Yx(t,e,n){return n=n!=null?n.concat([t]):null,Fc(4,4,Qx.bind(null,e,t),n)}function bf(){}function Xx(t,e){var n=nn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&wf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Jx(t,e){var n=nn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&wf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Zx(t,e,n){return ys&21?(fn(n,e)||(n=sx(),Re.lanes|=n,xs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Pt=!0),t.memoizedState=n)}function XN(t,e){var n=_e;_e=n!==0&&4>n?n:4,t(!0);var r=Ju.transition;Ju.transition={};try{t(!1),e()}finally{_e=n,Ju.transition=r}}function ev(){return nn().memoizedState}function JN(t,e,n){var r=Tr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},tv(t))nv(e,n);else if(n=Vx(t,e,n,r),n!==null){var s=Tt();hn(n,t,r,s),rv(n,e,r)}}function ZN(t,e,n){var r=Tr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(tv(t))nv(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,c=i(a,n);if(s.hasEagerState=!0,s.eagerState=c,fn(c,a)){var u=e.interleaved;u===null?(s.next=s,pf(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=Vx(t,e,s,r),n!==null&&(s=Tt(),hn(n,t,r,s),rv(n,e,r))}}function tv(t){var e=t.alternate;return t===Re||e!==null&&e===Re}function nv(t,e){ko=sc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function rv(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ef(t,n)}}var ic={readContext:tn,useCallback:ft,useContext:ft,useEffect:ft,useImperativeHandle:ft,useInsertionEffect:ft,useLayoutEffect:ft,useMemo:ft,useReducer:ft,useRef:ft,useState:ft,useDebugValue:ft,useDeferredValue:ft,useTransition:ft,useMutableSource:ft,useSyncExternalStore:ft,useId:ft,unstable_isNewReconciler:!1},eb={readContext:tn,useCallback:function(t,e){return yn().memoizedState=[t,e===void 0?null:e],t},useContext:tn,useEffect:yg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,bl(4194308,4,Qx.bind(null,e,t),n)},useLayoutEffect:function(t,e){return bl(4194308,4,t,e)},useInsertionEffect:function(t,e){return bl(4,2,t,e)},useMemo:function(t,e){var n=yn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=yn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=JN.bind(null,Re,t),[r.memoizedState,t]},useRef:function(t){var e=yn();return t={current:t},e.memoizedState=t},useState:gg,useDebugValue:bf,useDeferredValue:function(t){return yn().memoizedState=t},useTransition:function(){var t=gg(!1),e=t[0];return t=XN.bind(null,t[1]),yn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Re,s=yn();if(je){if(n===void 0)throw Error($(407));n=n()}else{if(n=e(),tt===null)throw Error($(349));ys&30||Bx(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,yg($x.bind(null,r,i,t),[t]),r.flags|=2048,Zo(9,zx.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=yn(),e=tt.identifierPrefix;if(je){var n=Bn,r=Un;n=(r&~(1<<32-dn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Xo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=YN++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},tb={readContext:tn,useCallback:Xx,useContext:tn,useEffect:Nf,useImperativeHandle:Yx,useInsertionEffect:Gx,useLayoutEffect:Kx,useMemo:Jx,useReducer:Zu,useRef:Wx,useState:function(){return Zu(Jo)},useDebugValue:bf,useDeferredValue:function(t){var e=nn();return Zx(e,Ge.memoizedState,t)},useTransition:function(){var t=Zu(Jo)[0],e=nn().memoizedState;return[t,e]},useMutableSource:Fx,useSyncExternalStore:Ux,useId:ev,unstable_isNewReconciler:!1},nb={readContext:tn,useCallback:Xx,useContext:tn,useEffect:Nf,useImperativeHandle:Yx,useInsertionEffect:Gx,useLayoutEffect:Kx,useMemo:Jx,useReducer:ed,useRef:Wx,useState:function(){return ed(Jo)},useDebugValue:bf,useDeferredValue:function(t){var e=nn();return Ge===null?e.memoizedState=t:Zx(e,Ge.memoizedState,t)},useTransition:function(){var t=ed(Jo)[0],e=nn().memoizedState;return[t,e]},useMutableSource:Fx,useSyncExternalStore:Ux,useId:ev,unstable_isNewReconciler:!1};function an(t,e){if(t&&t.defaultProps){e=Me({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Xd(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Me({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Uc={isMounted:function(t){return(t=t._reactInternals)?Ss(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Tt(),s=Tr(t),i=Hn(r,s);i.payload=e,n!=null&&(i.callback=n),e=Nr(t,i,s),e!==null&&(hn(e,t,s,r),El(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Tt(),s=Tr(t),i=Hn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Nr(t,i,s),e!==null&&(hn(e,t,s,r),El(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Tt(),r=Tr(t),s=Hn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Nr(t,s,r),e!==null&&(hn(e,t,r,n),El(e,t,r))}};function xg(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!qo(n,r)||!qo(s,i):!0}function sv(t,e,n){var r=!1,s=Vr,i=e.contextType;return typeof i=="object"&&i!==null?i=tn(i):(s=Dt(e)?ps:vt.current,r=e.contextTypes,i=(r=r!=null)?fi(t,s):Vr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Uc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function vg(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Uc.enqueueReplaceState(e,e.state,null)}function Jd(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},gf(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=tn(i):(i=Dt(e)?ps:vt.current,s.context=fi(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Xd(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Uc.enqueueReplaceState(s,s.state,null),nc(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function yi(t,e){try{var n="",r=e;do n+=jE(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function td(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Zd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var rb=typeof WeakMap=="function"?WeakMap:Map;function iv(t,e,n){n=Hn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ac||(ac=!0,ch=r),Zd(t,e)},n}function ov(t,e,n){n=Hn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Zd(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Zd(t,e),typeof r!="function"&&(br===null?br=new Set([this]):br.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function wg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new rb;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=yb.bind(null,t,e,n),e.then(t,t))}function _g(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Eg(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Hn(-1,1),e.tag=2,Nr(n,e,1))),n.lanes|=1),t)}var sb=nr.ReactCurrentOwner,Pt=!1;function Nt(t,e,n,r){e.child=t===null?Mx(e,null,n,r):pi(e,t.child,n,r)}function Ng(t,e,n,r,s){n=n.render;var i=e.ref;return si(e,s),r=_f(t,e,n,r,i,s),n=Ef(),t!==null&&!Pt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Qn(t,e,s)):(je&&n&&cf(e),e.flags|=1,Nt(t,e,r,s),e.child)}function bg(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Pf(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,av(t,e,i,r,s)):(t=kl(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:qo,n(a,r)&&t.ref===e.ref)return Qn(t,e,s)}return e.flags|=1,t=Sr(i,r),t.ref=e.ref,t.return=e,e.child=t}function av(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(qo(i,r)&&t.ref===e.ref)if(Pt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Pt=!0);else return e.lanes=t.lanes,Qn(t,e,s)}return eh(t,e,n,r,s)}function lv(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ne(Js,Lt),Lt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ne(Js,Lt),Lt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ne(Js,Lt),Lt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ne(Js,Lt),Lt|=r;return Nt(t,e,s,n),e.child}function cv(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function eh(t,e,n,r,s){var i=Dt(n)?ps:vt.current;return i=fi(e,i),si(e,s),n=_f(t,e,n,r,i,s),r=Ef(),t!==null&&!Pt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Qn(t,e,s)):(je&&r&&cf(e),e.flags|=1,Nt(t,e,n,s),e.child)}function Tg(t,e,n,r,s){if(Dt(n)){var i=!0;Xl(e)}else i=!1;if(si(e,s),e.stateNode===null)Tl(t,e),sv(e,n,r),Jd(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,c=e.memoizedProps;a.props=c;var u=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=tn(d):(d=Dt(n)?ps:vt.current,d=fi(e,d));var p=n.getDerivedStateFromProps,f=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==r||u!==d)&&vg(e,a,r,d),ur=!1;var m=e.memoizedState;a.state=m,nc(e,r,a,s),u=e.memoizedState,c!==r||m!==u||Rt.current||ur?(typeof p=="function"&&(Xd(e,n,p,r),u=e.memoizedState),(c=ur||xg(e,n,c,r,m,u,d))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=d,r=c):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,Lx(t,e),c=e.memoizedProps,d=e.type===e.elementType?c:an(e.type,c),a.props=d,f=e.pendingProps,m=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=tn(u):(u=Dt(n)?ps:vt.current,u=fi(e,u));var T=n.getDerivedStateFromProps;(p=typeof T=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==f||m!==u)&&vg(e,a,r,u),ur=!1,m=e.memoizedState,a.state=m,nc(e,r,a,s);var k=e.memoizedState;c!==f||m!==k||Rt.current||ur?(typeof T=="function"&&(Xd(e,n,T,r),k=e.memoizedState),(d=ur||xg(e,n,d,r,m,k,u)||!1)?(p||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,k,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,k,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||c===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=k),a.props=r,a.state=k,a.context=u,r=d):(typeof a.componentDidUpdate!="function"||c===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return th(t,e,n,r,i,s)}function th(t,e,n,r,s,i){cv(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&ug(e,n,!1),Qn(t,e,i);r=e.stateNode,sb.current=e;var c=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=pi(e,t.child,null,i),e.child=pi(e,null,c,i)):Nt(t,e,c,i),e.memoizedState=r.state,s&&ug(e,n,!0),e.child}function uv(t){var e=t.stateNode;e.pendingContext?cg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&cg(t,e.context,!1),yf(t,e.containerInfo)}function Sg(t,e,n,r,s){return mi(),df(s),e.flags|=256,Nt(t,e,n,r),e.child}var nh={dehydrated:null,treeContext:null,retryLane:0};function rh(t){return{baseLanes:t,cachePool:null,transitions:null}}function dv(t,e,n){var r=e.pendingProps,s=Pe.current,i=!1,a=(e.flags&128)!==0,c;if((c=a)||(c=t!==null&&t.memoizedState===null?!1:(s&2)!==0),c?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ne(Pe,s&1),t===null)return Qd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=$c(a,r,0,null),t=us(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=rh(n),e.memoizedState=nh,t):Tf(e,a));if(s=t.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return ib(t,e,a,r,c,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,c=s.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Sr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),c!==null?i=Sr(c,i):(i=us(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?rh(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=nh,r}return i=t.child,t=i.sibling,r=Sr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Tf(t,e){return e=$c({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ol(t,e,n,r){return r!==null&&df(r),pi(e,t.child,null,n),t=Tf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function ib(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=td(Error($(422))),ol(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=$c({mode:"visible",children:r.children},s,0,null),i=us(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&pi(e,t.child,null,a),e.child.memoizedState=rh(a),e.memoizedState=nh,i);if(!(e.mode&1))return ol(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var c=r.dgst;return r=c,i=Error($(419)),r=td(i,r,void 0),ol(t,e,a,r)}if(c=(a&t.childLanes)!==0,Pt||c){if(r=tt,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Kn(t,s),hn(r,t,s,-1))}return Af(),r=td(Error($(421))),ol(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=xb.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Ot=Er(s.nextSibling),Bt=e,je=!0,cn=null,t!==null&&(Gt[Kt++]=Un,Gt[Kt++]=Bn,Gt[Kt++]=gs,Un=t.id,Bn=t.overflow,gs=e),e=Tf(e,r.children),e.flags|=4096,e)}function Ig(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Yd(t.return,e,n)}function nd(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function hv(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Nt(t,e,r.children,n),r=Pe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ig(t,n,e);else if(t.tag===19)Ig(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ne(Pe,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&rc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),nd(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&rc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}nd(e,!0,n,null,i);break;case"together":nd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Tl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Qn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),xs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,n=Sr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Sr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function ob(t,e,n){switch(e.tag){case 3:uv(e),mi();break;case 5:Ox(e);break;case 1:Dt(e.type)&&Xl(e);break;case 4:yf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ne(ec,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ne(Pe,Pe.current&1),e.flags|=128,null):n&e.child.childLanes?dv(t,e,n):(Ne(Pe,Pe.current&1),t=Qn(t,e,n),t!==null?t.sibling:null);Ne(Pe,Pe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return hv(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ne(Pe,Pe.current),r)break;return null;case 22:case 23:return e.lanes=0,lv(t,e,n)}return Qn(t,e,n)}var fv,sh,mv,pv;fv=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};sh=function(){};mv=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,as(Nn.current);var i=null;switch(n){case"input":s=Sd(t,s),r=Sd(t,r),i=[];break;case"select":s=Me({},s,{value:void 0}),r=Me({},r,{value:void 0}),i=[];break;case"textarea":s=Cd(t,s),r=Cd(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ql)}Ad(n,r);var a;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var c=s[d];for(a in c)c.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Oo.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(c=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==c&&(u!=null||c!=null))if(d==="style")if(c){for(a in c)!c.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&c[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Oo.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Se("scroll",t),i||c===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};pv=function(t,e,n,r){n!==r&&(e.flags|=4)};function uo(t,e){if(!je)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function mt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function ab(t,e,n){var r=e.pendingProps;switch(uf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(e),null;case 1:return Dt(e.type)&&Yl(),mt(e),null;case 3:return r=e.stateNode,gi(),Ce(Rt),Ce(vt),vf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(sl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,cn!==null&&(hh(cn),cn=null))),sh(t,e),mt(e),null;case 5:xf(e);var s=as(Yo.current);if(n=e.type,t!==null&&e.stateNode!=null)mv(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error($(166));return mt(e),null}if(t=as(Nn.current),sl(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[vn]=e,r[Ko]=i,t=(e.mode&1)!==0,n){case"dialog":Se("cancel",r),Se("close",r);break;case"iframe":case"object":case"embed":Se("load",r);break;case"video":case"audio":for(s=0;s<xo.length;s++)Se(xo[s],r);break;case"source":Se("error",r);break;case"img":case"image":case"link":Se("error",r),Se("load",r);break;case"details":Se("toggle",r);break;case"input":Vp(r,i),Se("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Se("invalid",r);break;case"textarea":Op(r,i),Se("invalid",r)}Ad(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var c=i[a];a==="children"?typeof c=="string"?r.textContent!==c&&(i.suppressHydrationWarning!==!0&&rl(r.textContent,c,t),s=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&rl(r.textContent,c,t),s=["children",""+c]):Oo.hasOwnProperty(a)&&c!=null&&a==="onScroll"&&Se("scroll",r)}switch(n){case"input":Qa(r),Lp(r,i,!0);break;case"textarea":Qa(r),Fp(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ql)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=$0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[vn]=e,t[Ko]=r,fv(t,e,!1,!1),e.stateNode=t;e:{switch(a=Pd(n,r),n){case"dialog":Se("cancel",t),Se("close",t),s=r;break;case"iframe":case"object":case"embed":Se("load",t),s=r;break;case"video":case"audio":for(s=0;s<xo.length;s++)Se(xo[s],t);s=r;break;case"source":Se("error",t),s=r;break;case"img":case"image":case"link":Se("error",t),Se("load",t),s=r;break;case"details":Se("toggle",t),s=r;break;case"input":Vp(t,r),s=Sd(t,r),Se("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Me({},r,{value:void 0}),Se("invalid",t);break;case"textarea":Op(t,r),s=Cd(t,r),Se("invalid",t);break;default:s=r}Ad(n,s),c=s;for(i in c)if(c.hasOwnProperty(i)){var u=c[i];i==="style"?W0(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&H0(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Fo(t,u):typeof u=="number"&&Fo(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Oo.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Se("scroll",t):u!=null&&Kh(t,i,u,a))}switch(n){case"input":Qa(t),Lp(t,r,!1);break;case"textarea":Qa(t),Fp(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Mr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?ei(t,!!r.multiple,i,!1):r.defaultValue!=null&&ei(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Ql)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return mt(e),null;case 6:if(t&&e.stateNode!=null)pv(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error($(166));if(n=as(Yo.current),as(Nn.current),sl(e)){if(r=e.stateNode,n=e.memoizedProps,r[vn]=e,(i=r.nodeValue!==n)&&(t=Bt,t!==null))switch(t.tag){case 3:rl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&rl(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[vn]=e,e.stateNode=r}return mt(e),null;case 13:if(Ce(Pe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(je&&Ot!==null&&e.mode&1&&!(e.flags&128))Rx(),mi(),e.flags|=98560,i=!1;else if(i=sl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error($(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error($(317));i[vn]=e}else mi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;mt(e),i=!1}else cn!==null&&(hh(cn),cn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Pe.current&1?Ye===0&&(Ye=3):Af())),e.updateQueue!==null&&(e.flags|=4),mt(e),null);case 4:return gi(),sh(t,e),t===null&&Wo(e.stateNode.containerInfo),mt(e),null;case 10:return mf(e.type._context),mt(e),null;case 17:return Dt(e.type)&&Yl(),mt(e),null;case 19:if(Ce(Pe),i=e.memoizedState,i===null)return mt(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)uo(i,!1);else{if(Ye!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=rc(t),a!==null){for(e.flags|=128,uo(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ne(Pe,Pe.current&1|2),e.child}t=t.sibling}i.tail!==null&&Be()>xi&&(e.flags|=128,r=!0,uo(i,!1),e.lanes=4194304)}else{if(!r)if(t=rc(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),uo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!je)return mt(e),null}else 2*Be()-i.renderingStartTime>xi&&n!==1073741824&&(e.flags|=128,r=!0,uo(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Be(),e.sibling=null,n=Pe.current,Ne(Pe,r?n&1|2:n&1),e):(mt(e),null);case 22:case 23:return jf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Lt&1073741824&&(mt(e),e.subtreeFlags&6&&(e.flags|=8192)):mt(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function lb(t,e){switch(uf(e),e.tag){case 1:return Dt(e.type)&&Yl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return gi(),Ce(Rt),Ce(vt),vf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return xf(e),null;case 13:if(Ce(Pe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));mi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ce(Pe),null;case 4:return gi(),null;case 10:return mf(e.type._context),null;case 22:case 23:return jf(),null;case 24:return null;default:return null}}var al=!1,yt=!1,cb=typeof WeakSet=="function"?WeakSet:Set,Y=null;function Xs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Fe(t,e,r)}else n.current=null}function ih(t,e,n){try{n()}catch(r){Fe(t,e,r)}}var kg=!1;function ub(t,e){if(zd=Wl,t=wx(),lf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,c=-1,u=-1,d=0,p=0,f=t,m=null;t:for(;;){for(var T;f!==n||s!==0&&f.nodeType!==3||(c=a+s),f!==i||r!==0&&f.nodeType!==3||(u=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(T=f.firstChild)!==null;)m=f,f=T;for(;;){if(f===t)break t;if(m===n&&++d===s&&(c=a),m===i&&++p===r&&(u=a),(T=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=T}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for($d={focusedElem:t,selectionRange:n},Wl=!1,Y=e;Y!==null;)if(e=Y,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Y=t;else for(;Y!==null;){e=Y;try{var k=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var j=k.memoizedProps,P=k.memoizedState,b=e.stateNode,y=b.getSnapshotBeforeUpdate(e.elementType===e.type?j:an(e.type,j),P);b.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(A){Fe(e,e.return,A)}if(t=e.sibling,t!==null){t.return=e.return,Y=t;break}Y=e.return}return k=kg,kg=!1,k}function Co(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&ih(e,n,i)}s=s.next}while(s!==r)}}function Bc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function oh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function gv(t){var e=t.alternate;e!==null&&(t.alternate=null,gv(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[vn],delete e[Ko],delete e[Wd],delete e[WN],delete e[GN])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function yv(t){return t.tag===5||t.tag===3||t.tag===4}function Cg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||yv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ah(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ql));else if(r!==4&&(t=t.child,t!==null))for(ah(t,e,n),t=t.sibling;t!==null;)ah(t,e,n),t=t.sibling}function lh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(lh(t,e,n),t=t.sibling;t!==null;)lh(t,e,n),t=t.sibling}var st=null,ln=!1;function ar(t,e,n){for(n=n.child;n!==null;)xv(t,e,n),n=n.sibling}function xv(t,e,n){if(En&&typeof En.onCommitFiberUnmount=="function")try{En.onCommitFiberUnmount(Rc,n)}catch{}switch(n.tag){case 5:yt||Xs(n,e);case 6:var r=st,s=ln;st=null,ar(t,e,n),st=r,ln=s,st!==null&&(ln?(t=st,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):st.removeChild(n.stateNode));break;case 18:st!==null&&(ln?(t=st,n=n.stateNode,t.nodeType===8?Qu(t.parentNode,n):t.nodeType===1&&Qu(t,n),$o(t)):Qu(st,n.stateNode));break;case 4:r=st,s=ln,st=n.stateNode.containerInfo,ln=!0,ar(t,e,n),st=r,ln=s;break;case 0:case 11:case 14:case 15:if(!yt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&ih(n,e,a),s=s.next}while(s!==r)}ar(t,e,n);break;case 1:if(!yt&&(Xs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){Fe(n,e,c)}ar(t,e,n);break;case 21:ar(t,e,n);break;case 22:n.mode&1?(yt=(r=yt)||n.memoizedState!==null,ar(t,e,n),yt=r):ar(t,e,n);break;default:ar(t,e,n)}}function jg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new cb),e.forEach(function(r){var s=vb.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function on(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,c=a;e:for(;c!==null;){switch(c.tag){case 5:st=c.stateNode,ln=!1;break e;case 3:st=c.stateNode.containerInfo,ln=!0;break e;case 4:st=c.stateNode.containerInfo,ln=!0;break e}c=c.return}if(st===null)throw Error($(160));xv(i,a,s),st=null,ln=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){Fe(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)vv(e,t),e=e.sibling}function vv(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(on(e,t),gn(t),r&4){try{Co(3,t,t.return),Bc(3,t)}catch(j){Fe(t,t.return,j)}try{Co(5,t,t.return)}catch(j){Fe(t,t.return,j)}}break;case 1:on(e,t),gn(t),r&512&&n!==null&&Xs(n,n.return);break;case 5:if(on(e,t),gn(t),r&512&&n!==null&&Xs(n,n.return),t.flags&32){var s=t.stateNode;try{Fo(s,"")}catch(j){Fe(t,t.return,j)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&B0(s,i),Pd(c,a);var d=Pd(c,i);for(a=0;a<u.length;a+=2){var p=u[a],f=u[a+1];p==="style"?W0(s,f):p==="dangerouslySetInnerHTML"?H0(s,f):p==="children"?Fo(s,f):Kh(s,p,f,d)}switch(c){case"input":Id(s,i);break;case"textarea":z0(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var T=i.value;T!=null?ei(s,!!i.multiple,T,!1):m!==!!i.multiple&&(i.defaultValue!=null?ei(s,!!i.multiple,i.defaultValue,!0):ei(s,!!i.multiple,i.multiple?[]:"",!1))}s[Ko]=i}catch(j){Fe(t,t.return,j)}}break;case 6:if(on(e,t),gn(t),r&4){if(t.stateNode===null)throw Error($(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(j){Fe(t,t.return,j)}}break;case 3:if(on(e,t),gn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{$o(e.containerInfo)}catch(j){Fe(t,t.return,j)}break;case 4:on(e,t),gn(t);break;case 13:on(e,t),gn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(kf=Be())),r&4&&jg(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(yt=(d=yt)||p,on(e,t),yt=d):on(e,t),gn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!p&&t.mode&1)for(Y=t,p=t.child;p!==null;){for(f=Y=p;Y!==null;){switch(m=Y,T=m.child,m.tag){case 0:case 11:case 14:case 15:Co(4,m,m.return);break;case 1:Xs(m,m.return);var k=m.stateNode;if(typeof k.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,k.props=e.memoizedProps,k.state=e.memoizedState,k.componentWillUnmount()}catch(j){Fe(r,n,j)}}break;case 5:Xs(m,m.return);break;case 22:if(m.memoizedState!==null){Pg(f);continue}}T!==null?(T.return=m,Y=T):Pg(f)}p=p.sibling}e:for(p=null,f=t;;){if(f.tag===5){if(p===null){p=f;try{s=f.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=f.stateNode,u=f.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=q0("display",a))}catch(j){Fe(t,t.return,j)}}}else if(f.tag===6){if(p===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(j){Fe(t,t.return,j)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;p===f&&(p=null),f=f.return}p===f&&(p=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:on(e,t),gn(t),r&4&&jg(t);break;case 21:break;default:on(e,t),gn(t)}}function gn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(yv(n)){var r=n;break e}n=n.return}throw Error($(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Fo(s,""),r.flags&=-33);var i=Cg(t);lh(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,c=Cg(t);ah(t,c,a);break;default:throw Error($(161))}}catch(u){Fe(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function db(t,e,n){Y=t,wv(t)}function wv(t,e,n){for(var r=(t.mode&1)!==0;Y!==null;){var s=Y,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||al;if(!a){var c=s.alternate,u=c!==null&&c.memoizedState!==null||yt;c=al;var d=yt;if(al=a,(yt=u)&&!d)for(Y=s;Y!==null;)a=Y,u=a.child,a.tag===22&&a.memoizedState!==null?Rg(s):u!==null?(u.return=a,Y=u):Rg(s);for(;i!==null;)Y=i,wv(i),i=i.sibling;Y=s,al=c,yt=d}Ag(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Y=i):Ag(t)}}function Ag(t){for(;Y!==null;){var e=Y;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:yt||Bc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!yt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:an(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&pg(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}pg(e,a,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var p=d.memoizedState;if(p!==null){var f=p.dehydrated;f!==null&&$o(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}yt||e.flags&512&&oh(e)}catch(m){Fe(e,e.return,m)}}if(e===t){Y=null;break}if(n=e.sibling,n!==null){n.return=e.return,Y=n;break}Y=e.return}}function Pg(t){for(;Y!==null;){var e=Y;if(e===t){Y=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Y=n;break}Y=e.return}}function Rg(t){for(;Y!==null;){var e=Y;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Bc(4,e)}catch(u){Fe(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Fe(e,s,u)}}var i=e.return;try{oh(e)}catch(u){Fe(e,i,u)}break;case 5:var a=e.return;try{oh(e)}catch(u){Fe(e,a,u)}}}catch(u){Fe(e,e.return,u)}if(e===t){Y=null;break}var c=e.sibling;if(c!==null){c.return=e.return,Y=c;break}Y=e.return}}var hb=Math.ceil,oc=nr.ReactCurrentDispatcher,Sf=nr.ReactCurrentOwner,Xt=nr.ReactCurrentBatchConfig,ye=0,tt=null,$e=null,at=0,Lt=0,Js=Wr(0),Ye=0,ea=null,xs=0,zc=0,If=0,jo=null,jt=null,kf=0,xi=1/0,Ln=null,ac=!1,ch=null,br=null,ll=!1,yr=null,lc=0,Ao=0,uh=null,Sl=-1,Il=0;function Tt(){return ye&6?Be():Sl!==-1?Sl:Sl=Be()}function Tr(t){return t.mode&1?ye&2&&at!==0?at&-at:QN.transition!==null?(Il===0&&(Il=sx()),Il):(t=_e,t!==0||(t=window.event,t=t===void 0?16:dx(t.type)),t):1}function hn(t,e,n,r){if(50<Ao)throw Ao=0,uh=null,Error($(185));ha(t,n,r),(!(ye&2)||t!==tt)&&(t===tt&&(!(ye&2)&&(zc|=n),Ye===4&&hr(t,at)),Mt(t,r),n===1&&ye===0&&!(e.mode&1)&&(xi=Be()+500,Oc&&Gr()))}function Mt(t,e){var n=t.callbackNode;QE(t,e);var r=ql(t,t===tt?at:0);if(r===0)n!==null&&zp(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&zp(n),e===1)t.tag===0?KN(Dg.bind(null,t)):jx(Dg.bind(null,t)),HN(function(){!(ye&6)&&Gr()}),n=null;else{switch(ix(r)){case 1:n=Zh;break;case 4:n=nx;break;case 16:n=Hl;break;case 536870912:n=rx;break;default:n=Hl}n=kv(n,_v.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function _v(t,e){if(Sl=-1,Il=0,ye&6)throw Error($(327));var n=t.callbackNode;if(ii()&&t.callbackNode!==n)return null;var r=ql(t,t===tt?at:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=cc(t,r);else{e=r;var s=ye;ye|=2;var i=Nv();(tt!==t||at!==e)&&(Ln=null,xi=Be()+500,cs(t,e));do try{pb();break}catch(c){Ev(t,c)}while(!0);ff(),oc.current=i,ye=s,$e!==null?e=0:(tt=null,at=0,e=Ye)}if(e!==0){if(e===2&&(s=Ld(t),s!==0&&(r=s,e=dh(t,s))),e===1)throw n=ea,cs(t,0),hr(t,r),Mt(t,Be()),n;if(e===6)hr(t,r);else{if(s=t.current.alternate,!(r&30)&&!fb(s)&&(e=cc(t,r),e===2&&(i=Ld(t),i!==0&&(r=i,e=dh(t,i))),e===1))throw n=ea,cs(t,0),hr(t,r),Mt(t,Be()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error($(345));case 2:rs(t,jt,Ln);break;case 3:if(hr(t,r),(r&130023424)===r&&(e=kf+500-Be(),10<e)){if(ql(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Tt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=qd(rs.bind(null,t,jt,Ln),e);break}rs(t,jt,Ln);break;case 4:if(hr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-dn(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=Be()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*hb(r/1960))-r,10<r){t.timeoutHandle=qd(rs.bind(null,t,jt,Ln),r);break}rs(t,jt,Ln);break;case 5:rs(t,jt,Ln);break;default:throw Error($(329))}}}return Mt(t,Be()),t.callbackNode===n?_v.bind(null,t):null}function dh(t,e){var n=jo;return t.current.memoizedState.isDehydrated&&(cs(t,e).flags|=256),t=cc(t,e),t!==2&&(e=jt,jt=n,e!==null&&hh(e)),t}function hh(t){jt===null?jt=t:jt.push.apply(jt,t)}function fb(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!fn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function hr(t,e){for(e&=~If,e&=~zc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-dn(e),r=1<<n;t[n]=-1,e&=~r}}function Dg(t){if(ye&6)throw Error($(327));ii();var e=ql(t,0);if(!(e&1))return Mt(t,Be()),null;var n=cc(t,e);if(t.tag!==0&&n===2){var r=Ld(t);r!==0&&(e=r,n=dh(t,r))}if(n===1)throw n=ea,cs(t,0),hr(t,e),Mt(t,Be()),n;if(n===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,rs(t,jt,Ln),Mt(t,Be()),null}function Cf(t,e){var n=ye;ye|=1;try{return t(e)}finally{ye=n,ye===0&&(xi=Be()+500,Oc&&Gr())}}function vs(t){yr!==null&&yr.tag===0&&!(ye&6)&&ii();var e=ye;ye|=1;var n=Xt.transition,r=_e;try{if(Xt.transition=null,_e=1,t)return t()}finally{_e=r,Xt.transition=n,ye=e,!(ye&6)&&Gr()}}function jf(){Lt=Js.current,Ce(Js)}function cs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,$N(n)),$e!==null)for(n=$e.return;n!==null;){var r=n;switch(uf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Yl();break;case 3:gi(),Ce(Rt),Ce(vt),vf();break;case 5:xf(r);break;case 4:gi();break;case 13:Ce(Pe);break;case 19:Ce(Pe);break;case 10:mf(r.type._context);break;case 22:case 23:jf()}n=n.return}if(tt=t,$e=t=Sr(t.current,null),at=Lt=e,Ye=0,ea=null,If=zc=xs=0,jt=jo=null,os!==null){for(e=0;e<os.length;e++)if(n=os[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}os=null}return t}function Ev(t,e){do{var n=$e;try{if(ff(),Nl.current=ic,sc){for(var r=Re.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}sc=!1}if(ys=0,et=Ge=Re=null,ko=!1,Xo=0,Sf.current=null,n===null||n.return===null){Ye=1,ea=e,$e=null;break}e:{var i=t,a=n.return,c=n,u=e;if(e=at,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,p=c,f=p.tag;if(!(p.mode&1)&&(f===0||f===11||f===15)){var m=p.alternate;m?(p.updateQueue=m.updateQueue,p.memoizedState=m.memoizedState,p.lanes=m.lanes):(p.updateQueue=null,p.memoizedState=null)}var T=_g(a);if(T!==null){T.flags&=-257,Eg(T,a,c,i,e),T.mode&1&&wg(i,d,e),e=T,u=d;var k=e.updateQueue;if(k===null){var j=new Set;j.add(u),e.updateQueue=j}else k.add(u);break e}else{if(!(e&1)){wg(i,d,e),Af();break e}u=Error($(426))}}else if(je&&c.mode&1){var P=_g(a);if(P!==null){!(P.flags&65536)&&(P.flags|=256),Eg(P,a,c,i,e),df(yi(u,c));break e}}i=u=yi(u,c),Ye!==4&&(Ye=2),jo===null?jo=[i]:jo.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var b=iv(i,u,e);mg(i,b);break e;case 1:c=u;var y=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(br===null||!br.has(w)))){i.flags|=65536,e&=-e,i.lanes|=e;var A=ov(i,c,e);mg(i,A);break e}}i=i.return}while(i!==null)}Tv(n)}catch(D){e=D,$e===n&&n!==null&&($e=n=n.return);continue}break}while(!0)}function Nv(){var t=oc.current;return oc.current=ic,t===null?ic:t}function Af(){(Ye===0||Ye===3||Ye===2)&&(Ye=4),tt===null||!(xs&268435455)&&!(zc&268435455)||hr(tt,at)}function cc(t,e){var n=ye;ye|=2;var r=Nv();(tt!==t||at!==e)&&(Ln=null,cs(t,e));do try{mb();break}catch(s){Ev(t,s)}while(!0);if(ff(),ye=n,oc.current=r,$e!==null)throw Error($(261));return tt=null,at=0,Ye}function mb(){for(;$e!==null;)bv($e)}function pb(){for(;$e!==null&&!UE();)bv($e)}function bv(t){var e=Iv(t.alternate,t,Lt);t.memoizedProps=t.pendingProps,e===null?Tv(t):$e=e,Sf.current=null}function Tv(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=lb(n,e),n!==null){n.flags&=32767,$e=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ye=6,$e=null;return}}else if(n=ab(n,e,Lt),n!==null){$e=n;return}if(e=e.sibling,e!==null){$e=e;return}$e=e=t}while(e!==null);Ye===0&&(Ye=5)}function rs(t,e,n){var r=_e,s=Xt.transition;try{Xt.transition=null,_e=1,gb(t,e,n,r)}finally{Xt.transition=s,_e=r}return null}function gb(t,e,n,r){do ii();while(yr!==null);if(ye&6)throw Error($(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(YE(t,i),t===tt&&($e=tt=null,at=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ll||(ll=!0,kv(Hl,function(){return ii(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Xt.transition,Xt.transition=null;var a=_e;_e=1;var c=ye;ye|=4,Sf.current=null,ub(t,n),vv(n,t),VN($d),Wl=!!zd,$d=zd=null,t.current=n,db(n),BE(),ye=c,_e=a,Xt.transition=i}else t.current=n;if(ll&&(ll=!1,yr=t,lc=s),i=t.pendingLanes,i===0&&(br=null),HE(n.stateNode),Mt(t,Be()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(ac)throw ac=!1,t=ch,ch=null,t;return lc&1&&t.tag!==0&&ii(),i=t.pendingLanes,i&1?t===uh?Ao++:(Ao=0,uh=t):Ao=0,Gr(),null}function ii(){if(yr!==null){var t=ix(lc),e=Xt.transition,n=_e;try{if(Xt.transition=null,_e=16>t?16:t,yr===null)var r=!1;else{if(t=yr,yr=null,lc=0,ye&6)throw Error($(331));var s=ye;for(ye|=4,Y=t.current;Y!==null;){var i=Y,a=i.child;if(Y.flags&16){var c=i.deletions;if(c!==null){for(var u=0;u<c.length;u++){var d=c[u];for(Y=d;Y!==null;){var p=Y;switch(p.tag){case 0:case 11:case 15:Co(8,p,i)}var f=p.child;if(f!==null)f.return=p,Y=f;else for(;Y!==null;){p=Y;var m=p.sibling,T=p.return;if(gv(p),p===d){Y=null;break}if(m!==null){m.return=T,Y=m;break}Y=T}}}var k=i.alternate;if(k!==null){var j=k.child;if(j!==null){k.child=null;do{var P=j.sibling;j.sibling=null,j=P}while(j!==null)}}Y=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,Y=a;else e:for(;Y!==null;){if(i=Y,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Co(9,i,i.return)}var b=i.sibling;if(b!==null){b.return=i.return,Y=b;break e}Y=i.return}}var y=t.current;for(Y=y;Y!==null;){a=Y;var w=a.child;if(a.subtreeFlags&2064&&w!==null)w.return=a,Y=w;else e:for(a=y;Y!==null;){if(c=Y,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Bc(9,c)}}catch(D){Fe(c,c.return,D)}if(c===a){Y=null;break e}var A=c.sibling;if(A!==null){A.return=c.return,Y=A;break e}Y=c.return}}if(ye=s,Gr(),En&&typeof En.onPostCommitFiberRoot=="function")try{En.onPostCommitFiberRoot(Rc,t)}catch{}r=!0}return r}finally{_e=n,Xt.transition=e}}return!1}function Mg(t,e,n){e=yi(n,e),e=iv(t,e,1),t=Nr(t,e,1),e=Tt(),t!==null&&(ha(t,1,e),Mt(t,e))}function Fe(t,e,n){if(t.tag===3)Mg(t,t,n);else for(;e!==null;){if(e.tag===3){Mg(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(br===null||!br.has(r))){t=yi(n,t),t=ov(e,t,1),e=Nr(e,t,1),t=Tt(),e!==null&&(ha(e,1,t),Mt(e,t));break}}e=e.return}}function yb(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Tt(),t.pingedLanes|=t.suspendedLanes&n,tt===t&&(at&n)===n&&(Ye===4||Ye===3&&(at&130023424)===at&&500>Be()-kf?cs(t,0):If|=n),Mt(t,e)}function Sv(t,e){e===0&&(t.mode&1?(e=Ja,Ja<<=1,!(Ja&130023424)&&(Ja=4194304)):e=1);var n=Tt();t=Kn(t,e),t!==null&&(ha(t,e,n),Mt(t,n))}function xb(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Sv(t,n)}function vb(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(e),Sv(t,n)}var Iv;Iv=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Rt.current)Pt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Pt=!1,ob(t,e,n);Pt=!!(t.flags&131072)}else Pt=!1,je&&e.flags&1048576&&Ax(e,Zl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Tl(t,e),t=e.pendingProps;var s=fi(e,vt.current);si(e,n),s=_f(null,e,r,t,s,n);var i=Ef();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Dt(r)?(i=!0,Xl(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,gf(e),s.updater=Uc,e.stateNode=s,s._reactInternals=e,Jd(e,r,t,n),e=th(null,e,r,!0,i,n)):(e.tag=0,je&&i&&cf(e),Nt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Tl(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=_b(r),t=an(r,t),s){case 0:e=eh(null,e,r,t,n);break e;case 1:e=Tg(null,e,r,t,n);break e;case 11:e=Ng(null,e,r,t,n);break e;case 14:e=bg(null,e,r,an(r.type,t),n);break e}throw Error($(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:an(r,s),eh(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:an(r,s),Tg(t,e,r,s,n);case 3:e:{if(uv(e),t===null)throw Error($(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Lx(t,e),nc(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=yi(Error($(423)),e),e=Sg(t,e,r,n,s);break e}else if(r!==s){s=yi(Error($(424)),e),e=Sg(t,e,r,n,s);break e}else for(Ot=Er(e.stateNode.containerInfo.firstChild),Bt=e,je=!0,cn=null,n=Mx(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(mi(),r===s){e=Qn(t,e,n);break e}Nt(t,e,r,n)}e=e.child}return e;case 5:return Ox(e),t===null&&Qd(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,Hd(r,s)?a=null:i!==null&&Hd(r,i)&&(e.flags|=32),cv(t,e),Nt(t,e,a,n),e.child;case 6:return t===null&&Qd(e),null;case 13:return dv(t,e,n);case 4:return yf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=pi(e,null,r,n):Nt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:an(r,s),Ng(t,e,r,s,n);case 7:return Nt(t,e,e.pendingProps,n),e.child;case 8:return Nt(t,e,e.pendingProps.children,n),e.child;case 12:return Nt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,Ne(ec,r._currentValue),r._currentValue=a,i!==null)if(fn(i.value,a)){if(i.children===s.children&&!Rt.current){e=Qn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var c=i.dependencies;if(c!==null){a=i.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Hn(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var p=d.pending;p===null?u.next=u:(u.next=p.next,p.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Yd(i.return,n,e),c.lanes|=n;break}u=u.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error($(341));a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),Yd(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Nt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,si(e,n),s=tn(s),r=r(s),e.flags|=1,Nt(t,e,r,n),e.child;case 14:return r=e.type,s=an(r,e.pendingProps),s=an(r.type,s),bg(t,e,r,s,n);case 15:return av(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:an(r,s),Tl(t,e),e.tag=1,Dt(r)?(t=!0,Xl(e)):t=!1,si(e,n),sv(e,r,s),Jd(e,r,s,n),th(null,e,r,!0,t,n);case 19:return hv(t,e,n);case 22:return lv(t,e,n)}throw Error($(156,e.tag))};function kv(t,e){return tx(t,e)}function wb(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yt(t,e,n,r){return new wb(t,e,n,r)}function Pf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function _b(t){if(typeof t=="function")return Pf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Yh)return 11;if(t===Xh)return 14}return 2}function Sr(t,e){var n=t.alternate;return n===null?(n=Yt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function kl(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")Pf(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case zs:return us(n.children,s,i,e);case Qh:a=8,s|=8;break;case Ed:return t=Yt(12,n,e,s|2),t.elementType=Ed,t.lanes=i,t;case Nd:return t=Yt(13,n,e,s),t.elementType=Nd,t.lanes=i,t;case bd:return t=Yt(19,n,e,s),t.elementType=bd,t.lanes=i,t;case O0:return $c(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case V0:a=10;break e;case L0:a=9;break e;case Yh:a=11;break e;case Xh:a=14;break e;case cr:a=16,r=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=Yt(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function us(t,e,n,r){return t=Yt(7,t,r,e),t.lanes=n,t}function $c(t,e,n,r){return t=Yt(22,t,r,e),t.elementType=O0,t.lanes=n,t.stateNode={isHidden:!1},t}function rd(t,e,n){return t=Yt(6,t,null,e),t.lanes=n,t}function sd(t,e,n){return e=Yt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Eb(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ou(0),this.expirationTimes=Ou(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ou(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Rf(t,e,n,r,s,i,a,c,u){return t=new Eb(t,e,n,c,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Yt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},gf(i),t}function Nb(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Bs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Cv(t){if(!t)return Vr;t=t._reactInternals;e:{if(Ss(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Dt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var n=t.type;if(Dt(n))return Cx(t,n,e)}return e}function jv(t,e,n,r,s,i,a,c,u){return t=Rf(n,r,!0,t,s,i,a,c,u),t.context=Cv(null),n=t.current,r=Tt(),s=Tr(n),i=Hn(r,s),i.callback=e??null,Nr(n,i,s),t.current.lanes=s,ha(t,s,r),Mt(t,r),t}function Hc(t,e,n,r){var s=e.current,i=Tt(),a=Tr(s);return n=Cv(n),e.context===null?e.context=n:e.pendingContext=n,e=Hn(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Nr(s,e,a),t!==null&&(hn(t,s,a,i),El(t,s,a)),a}function uc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Vg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Df(t,e){Vg(t,e),(t=t.alternate)&&Vg(t,e)}function bb(){return null}var Av=typeof reportError=="function"?reportError:function(t){console.error(t)};function Mf(t){this._internalRoot=t}qc.prototype.render=Mf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));Hc(t,e,null,null)};qc.prototype.unmount=Mf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;vs(function(){Hc(null,t,null,null)}),e[Gn]=null}};function qc(t){this._internalRoot=t}qc.prototype.unstable_scheduleHydration=function(t){if(t){var e=lx();t={blockedOn:null,target:t,priority:e};for(var n=0;n<dr.length&&e!==0&&e<dr[n].priority;n++);dr.splice(n,0,t),n===0&&ux(t)}};function Vf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Wc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Lg(){}function Tb(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=uc(a);i.call(d)}}var a=jv(e,r,t,0,null,!1,!1,"",Lg);return t._reactRootContainer=a,t[Gn]=a.current,Wo(t.nodeType===8?t.parentNode:t),vs(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var c=r;r=function(){var d=uc(u);c.call(d)}}var u=Rf(t,0,!1,null,null,!1,!1,"",Lg);return t._reactRootContainer=u,t[Gn]=u.current,Wo(t.nodeType===8?t.parentNode:t),vs(function(){Hc(e,u,n,r)}),u}function Gc(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var c=s;s=function(){var u=uc(a);c.call(u)}}Hc(e,a,t,s)}else a=Tb(n,e,t,s,r);return uc(a)}ox=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=yo(e.pendingLanes);n!==0&&(ef(e,n|1),Mt(e,Be()),!(ye&6)&&(xi=Be()+500,Gr()))}break;case 13:vs(function(){var r=Kn(t,1);if(r!==null){var s=Tt();hn(r,t,1,s)}}),Df(t,1)}};tf=function(t){if(t.tag===13){var e=Kn(t,134217728);if(e!==null){var n=Tt();hn(e,t,134217728,n)}Df(t,134217728)}};ax=function(t){if(t.tag===13){var e=Tr(t),n=Kn(t,e);if(n!==null){var r=Tt();hn(n,t,e,r)}Df(t,e)}};lx=function(){return _e};cx=function(t,e){var n=_e;try{return _e=t,e()}finally{_e=n}};Dd=function(t,e,n){switch(e){case"input":if(Id(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Lc(r);if(!s)throw Error($(90));U0(r),Id(r,s)}}}break;case"textarea":z0(t,n);break;case"select":e=n.value,e!=null&&ei(t,!!n.multiple,e,!1)}};Q0=Cf;Y0=vs;var Sb={usingClientEntryPoint:!1,Events:[ma,Ws,Lc,G0,K0,Cf]},ho={findFiberByHostInstance:is,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ib={bundleType:ho.bundleType,version:ho.version,rendererPackageName:ho.rendererPackageName,rendererConfig:ho.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:nr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Z0(t),t===null?null:t.stateNode},findFiberByHostInstance:ho.findFiberByHostInstance||bb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cl.isDisabled&&cl.supportsFiber)try{Rc=cl.inject(Ib),En=cl}catch{}}$t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Sb;$t.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vf(e))throw Error($(200));return Nb(t,e,null,n)};$t.createRoot=function(t,e){if(!Vf(t))throw Error($(299));var n=!1,r="",s=Av;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Rf(t,1,!1,null,null,n,!1,r,s),t[Gn]=e.current,Wo(t.nodeType===8?t.parentNode:t),new Mf(e)};$t.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=Z0(e),t=t===null?null:t.stateNode,t};$t.flushSync=function(t){return vs(t)};$t.hydrate=function(t,e,n){if(!Wc(e))throw Error($(200));return Gc(null,t,e,!0,n)};$t.hydrateRoot=function(t,e,n){if(!Vf(t))throw Error($(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=Av;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=jv(e,null,t,1,n??null,s,!1,i,a),t[Gn]=e.current,Wo(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new qc(e)};$t.render=function(t,e,n){if(!Wc(e))throw Error($(200));return Gc(null,t,e,!1,n)};$t.unmountComponentAtNode=function(t){if(!Wc(t))throw Error($(40));return t._reactRootContainer?(vs(function(){Gc(null,null,t,!1,function(){t._reactRootContainer=null,t[Gn]=null})}),!0):!1};$t.unstable_batchedUpdates=Cf;$t.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Wc(n))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return Gc(t,e,n,!1,r)};$t.version="18.3.1-next-f1338f8080-20240426";function Pv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Pv)}catch(t){console.error(t)}}Pv(),P0.exports=$t;var kb=P0.exports,Rv,Og=kb;Rv=Og.createRoot,Og.hydrateRoot;/**
 * react-router v7.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Fg="popstate";function Cb(t={}){function e(r,s){let{pathname:i,search:a,hash:c}=r.location;return fh("",{pathname:i,search:a,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:ta(s)}return Ab(e,n,null,t)}function De(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function jn(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function jb(){return Math.random().toString(36).substring(2,10)}function Ug(t,e){return{usr:t.state,key:t.key,idx:e}}function fh(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Ai(e):e,state:n,key:e&&e.key||r||jb()}}function ta({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Ai(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function Ab(t,e,n,r={}){let{window:s=document.defaultView,v5Compat:i=!1}=r,a=s.history,c="POP",u=null,d=p();d==null&&(d=0,a.replaceState({...a.state,idx:d},""));function p(){return(a.state||{idx:null}).idx}function f(){c="POP";let P=p(),b=P==null?null:P-d;d=P,u&&u({action:c,location:j.location,delta:b})}function m(P,b){c="PUSH";let y=fh(j.location,P,b);d=p()+1;let w=Ug(y,d),A=j.createHref(y);try{a.pushState(w,"",A)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;s.location.assign(A)}i&&u&&u({action:c,location:j.location,delta:1})}function T(P,b){c="REPLACE";let y=fh(j.location,P,b);d=p();let w=Ug(y,d),A=j.createHref(y);a.replaceState(w,"",A),i&&u&&u({action:c,location:j.location,delta:0})}function k(P){return Pb(P)}let j={get action(){return c},get location(){return t(s,a)},listen(P){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(Fg,f),u=P,()=>{s.removeEventListener(Fg,f),u=null}},createHref(P){return e(s,P)},createURL:k,encodeLocation(P){let b=k(P);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:m,replace:T,go(P){return a.go(P)}};return j}function Pb(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),De(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:ta(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function Dv(t,e,n="/"){return Rb(t,e,n,!1)}function Rb(t,e,n,r){let s=typeof e=="string"?Ai(e):e,i=Yn(s.pathname||"/",n);if(i==null)return null;let a=Mv(t);Db(a);let c=null;for(let u=0;c==null&&u<a.length;++u){let d=qb(i);c=$b(a[u],d,r)}return c}function Mv(t,e=[],n=[],r=""){let s=(i,a,c)=>{let u={relativePath:c===void 0?i.path||"":c,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};u.relativePath.startsWith("/")&&(De(u.relativePath.startsWith(r),`Absolute route path "${u.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(r.length));let d=qn([r,u.relativePath]),p=n.concat(u);i.children&&i.children.length>0&&(De(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),Mv(i.children,e,p,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:Bb(d,i.index),routesMeta:p})};return t.forEach((i,a)=>{var c;if(i.path===""||!((c=i.path)!=null&&c.includes("?")))s(i,a);else for(let u of Vv(i.path))s(i,a,u)}),e}function Vv(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let a=Vv(r.join("/")),c=[];return c.push(...a.map(u=>u===""?i:[i,u].join("/"))),s&&c.push(...a),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function Db(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:zb(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var Mb=/^:[\w-]+$/,Vb=3,Lb=2,Ob=1,Fb=10,Ub=-2,Bg=t=>t==="*";function Bb(t,e){let n=t.split("/"),r=n.length;return n.some(Bg)&&(r+=Ub),e&&(r+=Lb),n.filter(s=>!Bg(s)).reduce((s,i)=>s+(Mb.test(i)?Vb:i===""?Ob:Fb),r)}function zb(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function $b(t,e,n=!1){let{routesMeta:r}=t,s={},i="/",a=[];for(let c=0;c<r.length;++c){let u=r[c],d=c===r.length-1,p=i==="/"?e:e.slice(i.length)||"/",f=dc({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},p),m=u.route;if(!f&&d&&n&&!r[r.length-1].route.index&&(f=dc({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},p)),!f)return null;Object.assign(s,f.params),a.push({params:s,pathname:qn([i,f.pathname]),pathnameBase:Qb(qn([i,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(i=qn([i,f.pathnameBase]))}return a}function dc(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Hb(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:r.reduce((d,{paramName:p,isOptional:f},m)=>{if(p==="*"){let k=c[m]||"";a=i.slice(0,i.length-k.length).replace(/(.)\/+$/,"$1")}const T=c[m];return f&&!T?d[p]=void 0:d[p]=(T||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:a,pattern:t}}function Hb(t,e=!1,n=!0){jn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function qb(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return jn(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Yn(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function Wb(t,e="/"){let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Ai(t):t;return{pathname:n?n.startsWith("/")?n:Gb(n,e):e,search:Yb(r),hash:Xb(s)}}function Gb(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function id(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Kb(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Lv(t){let e=Kb(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function Ov(t,e,n,r=!1){let s;typeof t=="string"?s=Ai(t):(s={...t},De(!s.pathname||!s.pathname.includes("?"),id("?","pathname","search",s)),De(!s.pathname||!s.pathname.includes("#"),id("#","pathname","hash",s)),De(!s.search||!s.search.includes("#"),id("#","search","hash",s)));let i=t===""||s.pathname==="",a=i?"/":s.pathname,c;if(a==null)c=n;else{let f=e.length-1;if(!r&&a.startsWith("..")){let m=a.split("/");for(;m[0]==="..";)m.shift(),f-=1;s.pathname=m.join("/")}c=f>=0?e[f]:"/"}let u=Wb(s,c),d=a&&a!=="/"&&a.endsWith("/"),p=(i||a===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||p)&&(u.pathname+="/"),u}var qn=t=>t.join("/").replace(/\/\/+/g,"/"),Qb=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Yb=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Xb=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Jb(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var Fv=["POST","PUT","PATCH","DELETE"];new Set(Fv);var Zb=["GET",...Fv];new Set(Zb);var Pi=R.createContext(null);Pi.displayName="DataRouter";var Kc=R.createContext(null);Kc.displayName="DataRouterState";R.createContext(!1);var Uv=R.createContext({isTransitioning:!1});Uv.displayName="ViewTransition";var eT=R.createContext(new Map);eT.displayName="Fetchers";var tT=R.createContext(null);tT.displayName="Await";var Rn=R.createContext(null);Rn.displayName="Navigation";var ga=R.createContext(null);ga.displayName="Location";var Dn=R.createContext({outlet:null,matches:[],isDataRoute:!1});Dn.displayName="Route";var Lf=R.createContext(null);Lf.displayName="RouteError";function nT(t,{relative:e}={}){De(ya(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=R.useContext(Rn),{hash:s,pathname:i,search:a}=xa(t,{relative:e}),c=i;return n!=="/"&&(c=i==="/"?n:qn([n,i])),r.createHref({pathname:c,search:a,hash:s})}function ya(){return R.useContext(ga)!=null}function Kr(){return De(ya(),"useLocation() may be used only in the context of a <Router> component."),R.useContext(ga).location}var Bv="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function zv(t){R.useContext(Rn).static||R.useLayoutEffect(t)}function Is(){let{isDataRoute:t}=R.useContext(Dn);return t?gT():rT()}function rT(){De(ya(),"useNavigate() may be used only in the context of a <Router> component.");let t=R.useContext(Pi),{basename:e,navigator:n}=R.useContext(Rn),{matches:r}=R.useContext(Dn),{pathname:s}=Kr(),i=JSON.stringify(Lv(r)),a=R.useRef(!1);return zv(()=>{a.current=!0}),R.useCallback((u,d={})=>{if(jn(a.current,Bv),!a.current)return;if(typeof u=="number"){n.go(u);return}let p=Ov(u,JSON.parse(i),s,d.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:qn([e,p.pathname])),(d.replace?n.replace:n.push)(p,d.state,d)},[e,n,i,s,t])}R.createContext(null);function sT(){let{matches:t}=R.useContext(Dn),e=t[t.length-1];return e?e.params:{}}function xa(t,{relative:e}={}){let{matches:n}=R.useContext(Dn),{pathname:r}=Kr(),s=JSON.stringify(Lv(n));return R.useMemo(()=>Ov(t,JSON.parse(s),r,e==="path"),[t,s,r,e])}function iT(t,e){return $v(t,e)}function $v(t,e,n,r){var b;De(ya(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=R.useContext(Rn),{matches:i}=R.useContext(Dn),a=i[i.length-1],c=a?a.params:{},u=a?a.pathname:"/",d=a?a.pathnameBase:"/",p=a&&a.route;{let y=p&&p.path||"";Hv(u,!p||y.endsWith("*")||y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${y}"> to <Route path="${y==="/"?"*":`${y}/*`}">.`)}let f=Kr(),m;if(e){let y=typeof e=="string"?Ai(e):e;De(d==="/"||((b=y.pathname)==null?void 0:b.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${y.pathname}" was given in the \`location\` prop.`),m=y}else m=f;let T=m.pathname||"/",k=T;if(d!=="/"){let y=d.replace(/^\//,"").split("/");k="/"+T.replace(/^\//,"").split("/").slice(y.length).join("/")}let j=Dv(t,{pathname:k});jn(p||j!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),jn(j==null||j[j.length-1].route.element!==void 0||j[j.length-1].route.Component!==void 0||j[j.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let P=uT(j&&j.map(y=>Object.assign({},y,{params:Object.assign({},c,y.params),pathname:qn([d,s.encodeLocation?s.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?d:qn([d,s.encodeLocation?s.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,n,r);return e&&P?R.createElement(ga.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},P):P}function oT(){let t=pT(),e=Jb(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},a=null;return console.error("Error handled by React Router default ErrorBoundary:",t),a=R.createElement(R.Fragment,null,R.createElement("p",null," Hey developer "),R.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",R.createElement("code",{style:i},"ErrorBoundary")," or"," ",R.createElement("code",{style:i},"errorElement")," prop on your route.")),R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},e),n?R.createElement("pre",{style:s},n):null,a)}var aT=R.createElement(oT,null),lT=class extends R.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?R.createElement(Dn.Provider,{value:this.props.routeContext},R.createElement(Lf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function cT({routeContext:t,match:e,children:n}){let r=R.useContext(Pi);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),R.createElement(Dn.Provider,{value:t},n)}function uT(t,e=[],n=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,i=n==null?void 0:n.errors;if(i!=null){let u=s.findIndex(d=>d.route.id&&(i==null?void 0:i[d.route.id])!==void 0);De(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),s=s.slice(0,Math.min(s.length,u+1))}let a=!1,c=-1;if(n)for(let u=0;u<s.length;u++){let d=s[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:p,errors:f}=n,m=d.route.loader&&!p.hasOwnProperty(d.route.id)&&(!f||f[d.route.id]===void 0);if(d.route.lazy||m){a=!0,c>=0?s=s.slice(0,c+1):s=[s[0]];break}}}return s.reduceRight((u,d,p)=>{let f,m=!1,T=null,k=null;n&&(f=i&&d.route.id?i[d.route.id]:void 0,T=d.route.errorElement||aT,a&&(c<0&&p===0?(Hv("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,k=null):c===p&&(m=!0,k=d.route.hydrateFallbackElement||null)));let j=e.concat(s.slice(0,p+1)),P=()=>{let b;return f?b=T:m?b=k:d.route.Component?b=R.createElement(d.route.Component,null):d.route.element?b=d.route.element:b=u,R.createElement(cT,{match:d,routeContext:{outlet:u,matches:j,isDataRoute:n!=null},children:b})};return n&&(d.route.ErrorBoundary||d.route.errorElement||p===0)?R.createElement(lT,{location:n.location,revalidation:n.revalidation,component:T,error:f,children:P(),routeContext:{outlet:null,matches:j,isDataRoute:!0}}):P()},null)}function Of(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function dT(t){let e=R.useContext(Pi);return De(e,Of(t)),e}function hT(t){let e=R.useContext(Kc);return De(e,Of(t)),e}function fT(t){let e=R.useContext(Dn);return De(e,Of(t)),e}function Ff(t){let e=fT(t),n=e.matches[e.matches.length-1];return De(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function mT(){return Ff("useRouteId")}function pT(){var r;let t=R.useContext(Lf),e=hT("useRouteError"),n=Ff("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function gT(){let{router:t}=dT("useNavigate"),e=Ff("useNavigate"),n=R.useRef(!1);return zv(()=>{n.current=!0}),R.useCallback(async(s,i={})=>{jn(n.current,Bv),n.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:e,...i}))},[t,e])}var zg={};function Hv(t,e,n){!e&&!zg[t]&&(zg[t]=!0,jn(!1,n))}R.memo(yT);function yT({routes:t,future:e,state:n}){return $v(t,void 0,n,e)}function Wt(t){De(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function xT({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:s,static:i=!1}){De(!ya(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=t.replace(/^\/*/,"/"),c=R.useMemo(()=>({basename:a,navigator:s,static:i,future:{}}),[a,s,i]);typeof n=="string"&&(n=Ai(n));let{pathname:u="/",search:d="",hash:p="",state:f=null,key:m="default"}=n,T=R.useMemo(()=>{let k=Yn(u,a);return k==null?null:{location:{pathname:k,search:d,hash:p,state:f,key:m},navigationType:r}},[a,u,d,p,f,m,r]);return jn(T!=null,`<Router basename="${a}"> is not able to match the URL "${u}${d}${p}" because it does not start with the basename, so the <Router> won't render anything.`),T==null?null:R.createElement(Rn.Provider,{value:c},R.createElement(ga.Provider,{children:e,value:T}))}function vT({children:t,location:e}){return iT(mh(t),e)}function mh(t,e=[]){let n=[];return R.Children.forEach(t,(r,s)=>{if(!R.isValidElement(r))return;let i=[...e,s];if(r.type===R.Fragment){n.push.apply(n,mh(r.props.children,i));return}De(r.type===Wt,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),De(!r.props.index||!r.props.children,"An index route cannot have child routes.");let a={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=mh(r.props.children,i)),n.push(a)}),n}var Cl="get",jl="application/x-www-form-urlencoded";function Qc(t){return t!=null&&typeof t.tagName=="string"}function wT(t){return Qc(t)&&t.tagName.toLowerCase()==="button"}function _T(t){return Qc(t)&&t.tagName.toLowerCase()==="form"}function ET(t){return Qc(t)&&t.tagName.toLowerCase()==="input"}function NT(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function bT(t,e){return t.button===0&&(!e||e==="_self")&&!NT(t)}var ul=null;function TT(){if(ul===null)try{new FormData(document.createElement("form"),0),ul=!1}catch{ul=!0}return ul}var ST=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function od(t){return t!=null&&!ST.has(t)?(jn(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${jl}"`),null):t}function IT(t,e){let n,r,s,i,a;if(_T(t)){let c=t.getAttribute("action");r=c?Yn(c,e):null,n=t.getAttribute("method")||Cl,s=od(t.getAttribute("enctype"))||jl,i=new FormData(t)}else if(wT(t)||ET(t)&&(t.type==="submit"||t.type==="image")){let c=t.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||c.getAttribute("action");if(r=u?Yn(u,e):null,n=t.getAttribute("formmethod")||c.getAttribute("method")||Cl,s=od(t.getAttribute("formenctype"))||od(c.getAttribute("enctype"))||jl,i=new FormData(c,t),!TT()){let{name:d,type:p,value:f}=t;if(p==="image"){let m=d?`${d}.`:"";i.append(`${m}x`,"0"),i.append(`${m}y`,"0")}else d&&i.append(d,f)}}else{if(Qc(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Cl,r=null,s=jl,a=t}return i&&s==="text/plain"&&(a=i,i=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:i,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Uf(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function kT(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&Yn(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function CT(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function jT(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function AT(t,e,n){let r=await Promise.all(t.map(async s=>{let i=e.routes[s.route.id];if(i){let a=await CT(i,n);return a.links?a.links():[]}return[]}));return MT(r.flat(1).filter(jT).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function $g(t,e,n,r,s,i){let a=(u,d)=>n[d]?u.route.id!==n[d].route.id:!0,c=(u,d)=>{var p;return n[d].pathname!==u.pathname||((p=n[d].route.path)==null?void 0:p.endsWith("*"))&&n[d].params["*"]!==u.params["*"]};return i==="assets"?e.filter((u,d)=>a(u,d)||c(u,d)):i==="data"?e.filter((u,d)=>{var f;let p=r.routes[u.route.id];if(!p||!p.hasLoader)return!1;if(a(u,d)||c(u,d))return!0;if(u.route.shouldRevalidate){let m=u.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((f=n[0])==null?void 0:f.params)||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function PT(t,e,{includeHydrateFallback:n}={}){return RT(t.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function RT(t){return[...new Set(t)]}function DT(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function MT(t,e){let n=new Set;return new Set(e),t.reduce((r,s)=>{let i=JSON.stringify(DT(s));return n.has(i)||(n.add(i),r.push({key:i,link:s})),r},[])}function qv(){let t=R.useContext(Pi);return Uf(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function VT(){let t=R.useContext(Kc);return Uf(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Bf=R.createContext(void 0);Bf.displayName="FrameworkContext";function Wv(){let t=R.useContext(Bf);return Uf(t,"You must render this element inside a <HydratedRouter> element"),t}function LT(t,e){let n=R.useContext(Bf),[r,s]=R.useState(!1),[i,a]=R.useState(!1),{onFocus:c,onBlur:u,onMouseEnter:d,onMouseLeave:p,onTouchStart:f}=e,m=R.useRef(null);R.useEffect(()=>{if(t==="render"&&a(!0),t==="viewport"){let j=b=>{b.forEach(y=>{a(y.isIntersecting)})},P=new IntersectionObserver(j,{threshold:.5});return m.current&&P.observe(m.current),()=>{P.disconnect()}}},[t]),R.useEffect(()=>{if(r){let j=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(j)}}},[r]);let T=()=>{s(!0)},k=()=>{s(!1),a(!1)};return n?t!=="intent"?[i,m,{}]:[i,m,{onFocus:fo(c,T),onBlur:fo(u,k),onMouseEnter:fo(d,T),onMouseLeave:fo(p,k),onTouchStart:fo(f,T)}]:[!1,m,{}]}function fo(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function OT({page:t,...e}){let{router:n}=qv(),r=R.useMemo(()=>Dv(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?R.createElement(UT,{page:t,matches:r,...e}):null}function FT(t){let{manifest:e,routeModules:n}=Wv(),[r,s]=R.useState([]);return R.useEffect(()=>{let i=!1;return AT(t,e,n).then(a=>{i||s(a)}),()=>{i=!0}},[t,e,n]),r}function UT({page:t,matches:e,...n}){let r=Kr(),{manifest:s,routeModules:i}=Wv(),{basename:a}=qv(),{loaderData:c,matches:u}=VT(),d=R.useMemo(()=>$g(t,e,u,s,r,"data"),[t,e,u,s,r]),p=R.useMemo(()=>$g(t,e,u,s,r,"assets"),[t,e,u,s,r]),f=R.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let k=new Set,j=!1;if(e.forEach(b=>{var w;let y=s.routes[b.route.id];!y||!y.hasLoader||(!d.some(A=>A.route.id===b.route.id)&&b.route.id in c&&((w=i[b.route.id])!=null&&w.shouldRevalidate)||y.hasClientLoader?j=!0:k.add(b.route.id))}),k.size===0)return[];let P=kT(t,a,"data");return j&&k.size>0&&P.searchParams.set("_routes",e.filter(b=>k.has(b.route.id)).map(b=>b.route.id).join(",")),[P.pathname+P.search]},[a,c,r,s,d,e,t,i]),m=R.useMemo(()=>PT(p,s),[p,s]),T=FT(p);return R.createElement(R.Fragment,null,f.map(k=>R.createElement("link",{key:k,rel:"prefetch",as:"fetch",href:k,...n})),m.map(k=>R.createElement("link",{key:k,rel:"modulepreload",href:k,...n})),T.map(({key:k,link:j})=>R.createElement("link",{key:k,nonce:n.nonce,...j})))}function BT(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Gv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Gv&&(window.__reactRouterVersion="7.8.0")}catch{}function zT({basename:t,children:e,window:n}){let r=R.useRef();r.current==null&&(r.current=Cb({window:n,v5Compat:!0}));let s=r.current,[i,a]=R.useState({action:s.action,location:s.location}),c=R.useCallback(u=>{R.startTransition(()=>a(u))},[a]);return R.useLayoutEffect(()=>s.listen(c),[s,c]),R.createElement(xT,{basename:t,children:e,location:i.location,navigationType:i.action,navigator:s})}var Kv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Qv=R.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:s,reloadDocument:i,replace:a,state:c,target:u,to:d,preventScrollReset:p,viewTransition:f,...m},T){let{basename:k}=R.useContext(Rn),j=typeof d=="string"&&Kv.test(d),P,b=!1;if(typeof d=="string"&&j&&(P=d,Gv))try{let E=new URL(window.location.href),I=d.startsWith("//")?new URL(E.protocol+d):new URL(d),S=Yn(I.pathname,k);I.origin===E.origin&&S!=null?d=S+I.search+I.hash:b=!0}catch{jn(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let y=nT(d,{relative:s}),[w,A,D]=LT(r,m),V=WT(d,{replace:a,state:c,target:u,preventScrollReset:p,relative:s,viewTransition:f});function N(E){e&&e(E),E.defaultPrevented||V(E)}let x=R.createElement("a",{...m,...D,href:P||y,onClick:b||i?e:N,ref:BT(T,A),target:u,"data-discover":!j&&n==="render"?"true":void 0});return w&&!j?R.createElement(R.Fragment,null,x,R.createElement(OT,{page:y})):x});Qv.displayName="Link";var $T=R.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:s=!1,style:i,to:a,viewTransition:c,children:u,...d},p){let f=xa(a,{relative:d.relative}),m=Kr(),T=R.useContext(Kc),{navigator:k,basename:j}=R.useContext(Rn),P=T!=null&&XT(f)&&c===!0,b=k.encodeLocation?k.encodeLocation(f).pathname:f.pathname,y=m.pathname,w=T&&T.navigation&&T.navigation.location?T.navigation.location.pathname:null;n||(y=y.toLowerCase(),w=w?w.toLowerCase():null,b=b.toLowerCase()),w&&j&&(w=Yn(w,j)||w);const A=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let D=y===b||!s&&y.startsWith(b)&&y.charAt(A)==="/",V=w!=null&&(w===b||!s&&w.startsWith(b)&&w.charAt(b.length)==="/"),N={isActive:D,isPending:V,isTransitioning:P},x=D?e:void 0,E;typeof r=="function"?E=r(N):E=[r,D?"active":null,V?"pending":null,P?"transitioning":null].filter(Boolean).join(" ");let I=typeof i=="function"?i(N):i;return R.createElement(Qv,{...d,"aria-current":x,className:E,ref:p,style:I,to:a,viewTransition:c},typeof u=="function"?u(N):u)});$T.displayName="NavLink";var HT=R.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:s,state:i,method:a=Cl,action:c,onSubmit:u,relative:d,preventScrollReset:p,viewTransition:f,...m},T)=>{let k=QT(),j=YT(c,{relative:d}),P=a.toLowerCase()==="get"?"get":"post",b=typeof c=="string"&&Kv.test(c),y=w=>{if(u&&u(w),w.defaultPrevented)return;w.preventDefault();let A=w.nativeEvent.submitter,D=(A==null?void 0:A.getAttribute("formmethod"))||a;k(A||w.currentTarget,{fetcherKey:e,method:D,navigate:n,replace:s,state:i,relative:d,preventScrollReset:p,viewTransition:f})};return R.createElement("form",{ref:T,method:P,action:j,onSubmit:r?u:y,...m,"data-discover":!b&&t==="render"?"true":void 0})});HT.displayName="Form";function qT(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Yv(t){let e=R.useContext(Pi);return De(e,qT(t)),e}function WT(t,{target:e,replace:n,state:r,preventScrollReset:s,relative:i,viewTransition:a}={}){let c=Is(),u=Kr(),d=xa(t,{relative:i});return R.useCallback(p=>{if(bT(p,e)){p.preventDefault();let f=n!==void 0?n:ta(u)===ta(d);c(t,{replace:f,state:r,preventScrollReset:s,relative:i,viewTransition:a})}},[u,c,d,n,r,e,t,s,i,a])}var GT=0,KT=()=>`__${String(++GT)}__`;function QT(){let{router:t}=Yv("useSubmit"),{basename:e}=R.useContext(Rn),n=mT();return R.useCallback(async(r,s={})=>{let{action:i,method:a,encType:c,formData:u,body:d}=IT(r,e);if(s.navigate===!1){let p=s.fetcherKey||KT();await t.fetch(p,n,s.action||i,{preventScrollReset:s.preventScrollReset,formData:u,body:d,formMethod:s.method||a,formEncType:s.encType||c,flushSync:s.flushSync})}else await t.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:u,body:d,formMethod:s.method||a,formEncType:s.encType||c,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,e,n])}function YT(t,{relative:e}={}){let{basename:n}=R.useContext(Rn),r=R.useContext(Dn);De(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),i={...xa(t||".",{relative:e})},a=Kr();if(t==null){i.search=a.search;let c=new URLSearchParams(i.search),u=c.getAll("index");if(u.some(p=>p==="")){c.delete("index"),u.filter(f=>f).forEach(f=>c.append("index",f));let p=c.toString();i.search=p?`?${p}`:""}}return(!t||t===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:qn([n,i.pathname])),ta(i)}function XT(t,{relative:e}={}){let n=R.useContext(Uv);De(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Yv("useViewTransitionState"),s=xa(t,{relative:e});if(!n.isTransitioning)return!1;let i=Yn(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=Yn(n.nextLocation.pathname,r)||n.nextLocation.pathname;return dc(s.pathname,a)!=null||dc(s.pathname,i)!=null}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var JT={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZT=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ae=(t,e)=>{const n=R.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:c="",children:u,...d},p)=>R.createElement("svg",{ref:p,...JT,width:s,height:s,stroke:r,strokeWidth:a?Number(i)*24/Number(s):i,className:["lucide",`lucide-${ZT(t)}`,c].join(" "),...d},[...e.map(([f,m])=>R.createElement(f,m)),...Array.isArray(u)?u:[u]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xv=ae("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jv=ae("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lr=ae("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zv=ae("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eS=ae("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tS=ae("Bus",[["path",{d:"M8 6v6",key:"18i7km"}],["path",{d:"M15 6v6",key:"1sg6z9"}],["path",{d:"M2 12h19.6",key:"de5uta"}],["path",{d:"M18 18h3s.5-1.7.8-2.8c.1-.4.2-.8.2-1.2 0-.4-.1-.8-.2-1.2l-1.4-5C20.1 6.8 19.1 6 18 6H4a2 2 0 0 0-2 2v10h3",key:"1wwztk"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M9 18h5",key:"lrx6i"}],["circle",{cx:"16",cy:"18",r:"2",key:"1v4tcr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rn=ae("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hg=ae("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ir=ae("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qg=ae("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nS=ae("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rS=ae("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ew=ae("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ft=ae("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ad=ae("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sS=ae("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ph=ae("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const na=ae("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oi=ae("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tw=ae("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iS=ae("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oS=ae("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aS=ae("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wg=ae("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nw=ae("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _n=ae("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lS=ae("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rw=ae("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sw=ae("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=ae("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iw=ae("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gg=ae("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cS=ae("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uS=ae("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dS=ae("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hS=ae("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zf=ae("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ai=ae("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=ae("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ow=ae("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ld=ae("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kr=ae("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),fS=()=>{};var Kg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aw=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},mS=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],a=t[n++],c=t[n++],u=((s&7)<<18|(i&63)<<12|(a&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},lw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,c=a?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,p=i>>2,f=(i&3)<<4|c>>4;let m=(c&15)<<2|d>>6,T=d&63;u||(T=64,a||(m=64)),r.push(n[p],n[f],n[m],n[T])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(aw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):mS(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||c==null||d==null||f==null)throw new pS;const m=i<<2|c>>4;if(r.push(m),d!==64){const T=c<<4&240|d>>2;if(r.push(T),f!==64){const k=d<<6&192|f;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class pS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const gS=function(t){const e=aw(t);return lw.encodeByteArray(e,!0)},hc=function(t){return gS(t).replace(/\./g,"")},cw=function(t){try{return lw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS=()=>yS().__FIREBASE_DEFAULTS__,vS=()=>{if(typeof process>"u"||typeof Kg>"u")return;const t=Kg.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},wS=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&cw(t[1]);return e&&JSON.parse(e)},Yc=()=>{try{return fS()||xS()||vS()||wS()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},uw=t=>{var e,n;return(n=(e=Yc())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},_S=t=>{const e=uw(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},dw=()=>{var t;return(t=Yc())==null?void 0:t.config},hw=t=>{var e;return(e=Yc())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ri(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function fw(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[hc(JSON.stringify(n)),hc(JSON.stringify(a)),""].join(".")}const Po={};function bS(){const t={prod:[],emulator:[]};for(const e of Object.keys(Po))Po[e]?t.emulator.push(e):t.prod.push(e);return t}function TS(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Qg=!1;function mw(t,e){if(typeof window>"u"||typeof document>"u"||!Ri(window.location.host)||Po[t]===e||Po[t]||Qg)return;Po[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",i=bS().prod.length>0;function a(){const m=document.getElementById(r);m&&m.remove()}function c(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,T){m.setAttribute("width","24"),m.setAttribute("id",T),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function d(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{Qg=!0,a()},m}function p(m,T){m.setAttribute("id",T),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function f(){const m=TS(r),T=n("text"),k=document.getElementById(T)||document.createElement("span"),j=n("learnmore"),P=document.getElementById(j)||document.createElement("a"),b=n("preprendIcon"),y=document.getElementById(b)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const w=m.element;c(w),p(P,j);const A=d();u(y,b),w.append(y,k,P,A),document.body.appendChild(w)}i?(k.innerText="Preview backend disconnected.",y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function SS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wt())}function IS(){var e;const t=(e=Yc())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function kS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function CS(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function jS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function AS(){const t=wt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function PS(){return!IS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function RS(){try{return typeof indexedDB=="object"}catch{return!1}}function DS(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS="FirebaseError";class rr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=MS,Object.setPrototypeOf(this,rr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,va.prototype.create)}}class va{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?VS(i,r):"Error",c=`${this.serviceName}: ${a} (${s}).`;return new rr(s,c,r)}}function VS(t,e){return t.replace(LS,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const LS=/\{\$([^}]+)}/g;function OS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ws(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],a=e[s];if(Yg(i)&&Yg(a)){if(!ws(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Yg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wa(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function FS(t,e){const n=new US(t,e);return n.subscribe.bind(n)}class US{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");BS(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=cd),s.error===void 0&&(s.error=cd),s.complete===void 0&&(s.complete=cd);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function BS(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function cd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(t){return t&&t._delegate?t._delegate:t}class _s{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ss="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new ES;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(HS(e))try{this.getOrInitializeService({instanceIdentifier:ss})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=ss){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ss){return this.instances.has(e)}getOptions(e=ss){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);r===c&&a.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:$S(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ss){return this.component?this.component.multipleInstances?e:ss:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function $S(t){return t===ss?void 0:t}function HS(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new zS(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(fe||(fe={}));const WS={debug:fe.DEBUG,verbose:fe.VERBOSE,info:fe.INFO,warn:fe.WARN,error:fe.ERROR,silent:fe.SILENT},GS=fe.INFO,KS={[fe.DEBUG]:"log",[fe.VERBOSE]:"log",[fe.INFO]:"info",[fe.WARN]:"warn",[fe.ERROR]:"error"},QS=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=KS[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class $f{constructor(e){this.name=e,this._logLevel=GS,this._logHandler=QS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?WS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,fe.DEBUG,...e),this._logHandler(this,fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,fe.VERBOSE,...e),this._logHandler(this,fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,fe.INFO,...e),this._logHandler(this,fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,fe.WARN,...e),this._logHandler(this,fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,fe.ERROR,...e),this._logHandler(this,fe.ERROR,...e)}}const YS=(t,e)=>e.some(n=>t instanceof n);let Xg,Jg;function XS(){return Xg||(Xg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function JS(){return Jg||(Jg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const pw=new WeakMap,gh=new WeakMap,gw=new WeakMap,ud=new WeakMap,Hf=new WeakMap;function ZS(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(Cr(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&pw.set(n,t)}).catch(()=>{}),Hf.set(e,t),e}function e2(t){if(gh.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});gh.set(t,e)}let yh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return gh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||gw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Cr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function t2(t){yh=t(yh)}function n2(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(dd(this),e,...n);return gw.set(r,e.sort?e.sort():[e]),Cr(r)}:JS().includes(t)?function(...e){return t.apply(dd(this),e),Cr(pw.get(this))}:function(...e){return Cr(t.apply(dd(this),e))}}function r2(t){return typeof t=="function"?n2(t):(t instanceof IDBTransaction&&e2(t),YS(t,XS())?new Proxy(t,yh):t)}function Cr(t){if(t instanceof IDBRequest)return ZS(t);if(ud.has(t))return ud.get(t);const e=r2(t);return e!==t&&(ud.set(t,e),Hf.set(e,t)),e}const dd=t=>Hf.get(t);function s2(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),c=Cr(a);return r&&a.addEventListener("upgradeneeded",u=>{r(Cr(a.result),u.oldVersion,u.newVersion,Cr(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const i2=["get","getKey","getAll","getAllKeys","count"],o2=["put","add","delete","clear"],hd=new Map;function Zg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(hd.get(e))return hd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=o2.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||i2.includes(n)))return;const i=async function(a,...c){const u=this.transaction(a,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),s&&u.done]))[0]};return hd.set(e,i),i}t2(t=>({...t,get:(e,n,r)=>Zg(e,n)||t.get(e,n,r),has:(e,n)=>!!Zg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(l2(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function l2(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const xh="@firebase/app",ey="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xn=new $f("@firebase/app"),c2="@firebase/app-compat",u2="@firebase/analytics-compat",d2="@firebase/analytics",h2="@firebase/app-check-compat",f2="@firebase/app-check",m2="@firebase/auth",p2="@firebase/auth-compat",g2="@firebase/database",y2="@firebase/data-connect",x2="@firebase/database-compat",v2="@firebase/functions",w2="@firebase/functions-compat",_2="@firebase/installations",E2="@firebase/installations-compat",N2="@firebase/messaging",b2="@firebase/messaging-compat",T2="@firebase/performance",S2="@firebase/performance-compat",I2="@firebase/remote-config",k2="@firebase/remote-config-compat",C2="@firebase/storage",j2="@firebase/storage-compat",A2="@firebase/firestore",P2="@firebase/ai",R2="@firebase/firestore-compat",D2="firebase",M2="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vh="[DEFAULT]",V2={[xh]:"fire-core",[c2]:"fire-core-compat",[d2]:"fire-analytics",[u2]:"fire-analytics-compat",[f2]:"fire-app-check",[h2]:"fire-app-check-compat",[m2]:"fire-auth",[p2]:"fire-auth-compat",[g2]:"fire-rtdb",[y2]:"fire-data-connect",[x2]:"fire-rtdb-compat",[v2]:"fire-fn",[w2]:"fire-fn-compat",[_2]:"fire-iid",[E2]:"fire-iid-compat",[N2]:"fire-fcm",[b2]:"fire-fcm-compat",[T2]:"fire-perf",[S2]:"fire-perf-compat",[I2]:"fire-rc",[k2]:"fire-rc-compat",[C2]:"fire-gcs",[j2]:"fire-gcs-compat",[A2]:"fire-fst",[R2]:"fire-fst-compat",[P2]:"fire-vertex","fire-js":"fire-js",[D2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fc=new Map,L2=new Map,wh=new Map;function ty(t,e){try{t.container.addComponent(e)}catch(n){Xn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function vi(t){const e=t.name;if(wh.has(e))return Xn.debug(`There were multiple attempts to register component ${e}.`),!1;wh.set(e,t);for(const n of fc.values())ty(n,t);for(const n of L2.values())ty(n,t);return!0}function qf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function wn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},jr=new va("app","Firebase",O2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new _s("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw jr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Di=M2;function yw(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:vh,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw jr.create("bad-app-name",{appName:String(s)});if(n||(n=dw()),!n)throw jr.create("no-options");const i=fc.get(s);if(i){if(ws(n,i.options)&&ws(r,i.config))return i;throw jr.create("duplicate-app",{appName:s})}const a=new qS(s);for(const u of wh.values())a.addComponent(u);const c=new F2(n,r,a);return fc.set(s,c),c}function xw(t=vh){const e=fc.get(t);if(!e&&t===vh&&dw())return yw();if(!e)throw jr.create("no-app",{appName:t});return e}function Ar(t,e,n){let r=V2[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&a.push("and"),i&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Xn.warn(a.join(" "));return}vi(new _s(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U2="firebase-heartbeat-database",B2=1,ra="firebase-heartbeat-store";let fd=null;function vw(){return fd||(fd=s2(U2,B2,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ra)}catch(n){console.warn(n)}}}}).catch(t=>{throw jr.create("idb-open",{originalErrorMessage:t.message})})),fd}async function z2(t){try{const n=(await vw()).transaction(ra),r=await n.objectStore(ra).get(ww(t));return await n.done,r}catch(e){if(e instanceof rr)Xn.warn(e.message);else{const n=jr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Xn.warn(n.message)}}}async function ny(t,e){try{const r=(await vw()).transaction(ra,"readwrite");await r.objectStore(ra).put(e,ww(t)),await r.done}catch(n){if(n instanceof rr)Xn.warn(n.message);else{const r=jr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Xn.warn(r.message)}}}function ww(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $2=1024,H2=30;class q2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new G2(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=ry();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>H2){const a=K2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Xn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=ry(),{heartbeatsToSend:r,unsentEntries:s}=W2(this._heartbeatsCache.heartbeats),i=hc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Xn.warn(n),""}}}function ry(){return new Date().toISOString().substring(0,10)}function W2(t,e=$2){const n=[];let r=t.slice();for(const s of t){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),sy(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),sy(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class G2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return RS()?DS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await z2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return ny(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return ny(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function sy(t){return hc(JSON.stringify({version:2,heartbeats:t})).length}function K2(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q2(t){vi(new _s("platform-logger",e=>new a2(e),"PRIVATE")),vi(new _s("heartbeat",e=>new q2(e),"PRIVATE")),Ar(xh,ey,t),Ar(xh,ey,"esm2020"),Ar("fire-js","")}Q2("");var iy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Pr,_w;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,x){function E(){}E.prototype=x.prototype,N.D=x.prototype,N.prototype=new E,N.prototype.constructor=N,N.C=function(I,S,C){for(var v=Array(arguments.length-2),H=2;H<arguments.length;H++)v[H-2]=arguments[H];return x.prototype[S].apply(I,v)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(N,x,E){E||(E=0);var I=Array(16);if(typeof x=="string")for(var S=0;16>S;++S)I[S]=x.charCodeAt(E++)|x.charCodeAt(E++)<<8|x.charCodeAt(E++)<<16|x.charCodeAt(E++)<<24;else for(S=0;16>S;++S)I[S]=x[E++]|x[E++]<<8|x[E++]<<16|x[E++]<<24;x=N.g[0],E=N.g[1],S=N.g[2];var C=N.g[3],v=x+(C^E&(S^C))+I[0]+3614090360&4294967295;x=E+(v<<7&4294967295|v>>>25),v=C+(S^x&(E^S))+I[1]+3905402710&4294967295,C=x+(v<<12&4294967295|v>>>20),v=S+(E^C&(x^E))+I[2]+606105819&4294967295,S=C+(v<<17&4294967295|v>>>15),v=E+(x^S&(C^x))+I[3]+3250441966&4294967295,E=S+(v<<22&4294967295|v>>>10),v=x+(C^E&(S^C))+I[4]+4118548399&4294967295,x=E+(v<<7&4294967295|v>>>25),v=C+(S^x&(E^S))+I[5]+1200080426&4294967295,C=x+(v<<12&4294967295|v>>>20),v=S+(E^C&(x^E))+I[6]+2821735955&4294967295,S=C+(v<<17&4294967295|v>>>15),v=E+(x^S&(C^x))+I[7]+4249261313&4294967295,E=S+(v<<22&4294967295|v>>>10),v=x+(C^E&(S^C))+I[8]+1770035416&4294967295,x=E+(v<<7&4294967295|v>>>25),v=C+(S^x&(E^S))+I[9]+2336552879&4294967295,C=x+(v<<12&4294967295|v>>>20),v=S+(E^C&(x^E))+I[10]+4294925233&4294967295,S=C+(v<<17&4294967295|v>>>15),v=E+(x^S&(C^x))+I[11]+2304563134&4294967295,E=S+(v<<22&4294967295|v>>>10),v=x+(C^E&(S^C))+I[12]+1804603682&4294967295,x=E+(v<<7&4294967295|v>>>25),v=C+(S^x&(E^S))+I[13]+4254626195&4294967295,C=x+(v<<12&4294967295|v>>>20),v=S+(E^C&(x^E))+I[14]+2792965006&4294967295,S=C+(v<<17&4294967295|v>>>15),v=E+(x^S&(C^x))+I[15]+1236535329&4294967295,E=S+(v<<22&4294967295|v>>>10),v=x+(S^C&(E^S))+I[1]+4129170786&4294967295,x=E+(v<<5&4294967295|v>>>27),v=C+(E^S&(x^E))+I[6]+3225465664&4294967295,C=x+(v<<9&4294967295|v>>>23),v=S+(x^E&(C^x))+I[11]+643717713&4294967295,S=C+(v<<14&4294967295|v>>>18),v=E+(C^x&(S^C))+I[0]+3921069994&4294967295,E=S+(v<<20&4294967295|v>>>12),v=x+(S^C&(E^S))+I[5]+3593408605&4294967295,x=E+(v<<5&4294967295|v>>>27),v=C+(E^S&(x^E))+I[10]+38016083&4294967295,C=x+(v<<9&4294967295|v>>>23),v=S+(x^E&(C^x))+I[15]+3634488961&4294967295,S=C+(v<<14&4294967295|v>>>18),v=E+(C^x&(S^C))+I[4]+3889429448&4294967295,E=S+(v<<20&4294967295|v>>>12),v=x+(S^C&(E^S))+I[9]+568446438&4294967295,x=E+(v<<5&4294967295|v>>>27),v=C+(E^S&(x^E))+I[14]+3275163606&4294967295,C=x+(v<<9&4294967295|v>>>23),v=S+(x^E&(C^x))+I[3]+4107603335&4294967295,S=C+(v<<14&4294967295|v>>>18),v=E+(C^x&(S^C))+I[8]+1163531501&4294967295,E=S+(v<<20&4294967295|v>>>12),v=x+(S^C&(E^S))+I[13]+2850285829&4294967295,x=E+(v<<5&4294967295|v>>>27),v=C+(E^S&(x^E))+I[2]+4243563512&4294967295,C=x+(v<<9&4294967295|v>>>23),v=S+(x^E&(C^x))+I[7]+1735328473&4294967295,S=C+(v<<14&4294967295|v>>>18),v=E+(C^x&(S^C))+I[12]+2368359562&4294967295,E=S+(v<<20&4294967295|v>>>12),v=x+(E^S^C)+I[5]+4294588738&4294967295,x=E+(v<<4&4294967295|v>>>28),v=C+(x^E^S)+I[8]+2272392833&4294967295,C=x+(v<<11&4294967295|v>>>21),v=S+(C^x^E)+I[11]+1839030562&4294967295,S=C+(v<<16&4294967295|v>>>16),v=E+(S^C^x)+I[14]+4259657740&4294967295,E=S+(v<<23&4294967295|v>>>9),v=x+(E^S^C)+I[1]+2763975236&4294967295,x=E+(v<<4&4294967295|v>>>28),v=C+(x^E^S)+I[4]+1272893353&4294967295,C=x+(v<<11&4294967295|v>>>21),v=S+(C^x^E)+I[7]+4139469664&4294967295,S=C+(v<<16&4294967295|v>>>16),v=E+(S^C^x)+I[10]+3200236656&4294967295,E=S+(v<<23&4294967295|v>>>9),v=x+(E^S^C)+I[13]+681279174&4294967295,x=E+(v<<4&4294967295|v>>>28),v=C+(x^E^S)+I[0]+3936430074&4294967295,C=x+(v<<11&4294967295|v>>>21),v=S+(C^x^E)+I[3]+3572445317&4294967295,S=C+(v<<16&4294967295|v>>>16),v=E+(S^C^x)+I[6]+76029189&4294967295,E=S+(v<<23&4294967295|v>>>9),v=x+(E^S^C)+I[9]+3654602809&4294967295,x=E+(v<<4&4294967295|v>>>28),v=C+(x^E^S)+I[12]+3873151461&4294967295,C=x+(v<<11&4294967295|v>>>21),v=S+(C^x^E)+I[15]+530742520&4294967295,S=C+(v<<16&4294967295|v>>>16),v=E+(S^C^x)+I[2]+3299628645&4294967295,E=S+(v<<23&4294967295|v>>>9),v=x+(S^(E|~C))+I[0]+4096336452&4294967295,x=E+(v<<6&4294967295|v>>>26),v=C+(E^(x|~S))+I[7]+1126891415&4294967295,C=x+(v<<10&4294967295|v>>>22),v=S+(x^(C|~E))+I[14]+2878612391&4294967295,S=C+(v<<15&4294967295|v>>>17),v=E+(C^(S|~x))+I[5]+4237533241&4294967295,E=S+(v<<21&4294967295|v>>>11),v=x+(S^(E|~C))+I[12]+1700485571&4294967295,x=E+(v<<6&4294967295|v>>>26),v=C+(E^(x|~S))+I[3]+2399980690&4294967295,C=x+(v<<10&4294967295|v>>>22),v=S+(x^(C|~E))+I[10]+4293915773&4294967295,S=C+(v<<15&4294967295|v>>>17),v=E+(C^(S|~x))+I[1]+2240044497&4294967295,E=S+(v<<21&4294967295|v>>>11),v=x+(S^(E|~C))+I[8]+1873313359&4294967295,x=E+(v<<6&4294967295|v>>>26),v=C+(E^(x|~S))+I[15]+4264355552&4294967295,C=x+(v<<10&4294967295|v>>>22),v=S+(x^(C|~E))+I[6]+2734768916&4294967295,S=C+(v<<15&4294967295|v>>>17),v=E+(C^(S|~x))+I[13]+1309151649&4294967295,E=S+(v<<21&4294967295|v>>>11),v=x+(S^(E|~C))+I[4]+4149444226&4294967295,x=E+(v<<6&4294967295|v>>>26),v=C+(E^(x|~S))+I[11]+3174756917&4294967295,C=x+(v<<10&4294967295|v>>>22),v=S+(x^(C|~E))+I[2]+718787259&4294967295,S=C+(v<<15&4294967295|v>>>17),v=E+(C^(S|~x))+I[9]+3951481745&4294967295,N.g[0]=N.g[0]+x&4294967295,N.g[1]=N.g[1]+(S+(v<<21&4294967295|v>>>11))&4294967295,N.g[2]=N.g[2]+S&4294967295,N.g[3]=N.g[3]+C&4294967295}r.prototype.u=function(N,x){x===void 0&&(x=N.length);for(var E=x-this.blockSize,I=this.B,S=this.h,C=0;C<x;){if(S==0)for(;C<=E;)s(this,N,C),C+=this.blockSize;if(typeof N=="string"){for(;C<x;)if(I[S++]=N.charCodeAt(C++),S==this.blockSize){s(this,I),S=0;break}}else for(;C<x;)if(I[S++]=N[C++],S==this.blockSize){s(this,I),S=0;break}}this.h=S,this.o+=x},r.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var x=1;x<N.length-8;++x)N[x]=0;var E=8*this.o;for(x=N.length-8;x<N.length;++x)N[x]=E&255,E/=256;for(this.u(N),N=Array(16),x=E=0;4>x;++x)for(var I=0;32>I;I+=8)N[E++]=this.g[x]>>>I&255;return N};function i(N,x){var E=c;return Object.prototype.hasOwnProperty.call(E,N)?E[N]:E[N]=x(N)}function a(N,x){this.h=x;for(var E=[],I=!0,S=N.length-1;0<=S;S--){var C=N[S]|0;I&&C==x||(E[S]=C,I=!1)}this.g=E}var c={};function u(N){return-128<=N&&128>N?i(N,function(x){return new a([x|0],0>x?-1:0)}):new a([N|0],0>N?-1:0)}function d(N){if(isNaN(N)||!isFinite(N))return f;if(0>N)return P(d(-N));for(var x=[],E=1,I=0;N>=E;I++)x[I]=N/E|0,E*=4294967296;return new a(x,0)}function p(N,x){if(N.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(N.charAt(0)=="-")return P(p(N.substring(1),x));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=d(Math.pow(x,8)),I=f,S=0;S<N.length;S+=8){var C=Math.min(8,N.length-S),v=parseInt(N.substring(S,S+C),x);8>C?(C=d(Math.pow(x,C)),I=I.j(C).add(d(v))):(I=I.j(E),I=I.add(d(v)))}return I}var f=u(0),m=u(1),T=u(16777216);t=a.prototype,t.m=function(){if(j(this))return-P(this).m();for(var N=0,x=1,E=0;E<this.g.length;E++){var I=this.i(E);N+=(0<=I?I:4294967296+I)*x,x*=4294967296}return N},t.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(k(this))return"0";if(j(this))return"-"+P(this).toString(N);for(var x=d(Math.pow(N,6)),E=this,I="";;){var S=A(E,x).g;E=b(E,S.j(x));var C=((0<E.g.length?E.g[0]:E.h)>>>0).toString(N);if(E=S,k(E))return C+I;for(;6>C.length;)C="0"+C;I=C+I}},t.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function k(N){if(N.h!=0)return!1;for(var x=0;x<N.g.length;x++)if(N.g[x]!=0)return!1;return!0}function j(N){return N.h==-1}t.l=function(N){return N=b(this,N),j(N)?-1:k(N)?0:1};function P(N){for(var x=N.g.length,E=[],I=0;I<x;I++)E[I]=~N.g[I];return new a(E,~N.h).add(m)}t.abs=function(){return j(this)?P(this):this},t.add=function(N){for(var x=Math.max(this.g.length,N.g.length),E=[],I=0,S=0;S<=x;S++){var C=I+(this.i(S)&65535)+(N.i(S)&65535),v=(C>>>16)+(this.i(S)>>>16)+(N.i(S)>>>16);I=v>>>16,C&=65535,v&=65535,E[S]=v<<16|C}return new a(E,E[E.length-1]&-2147483648?-1:0)};function b(N,x){return N.add(P(x))}t.j=function(N){if(k(this)||k(N))return f;if(j(this))return j(N)?P(this).j(P(N)):P(P(this).j(N));if(j(N))return P(this.j(P(N)));if(0>this.l(T)&&0>N.l(T))return d(this.m()*N.m());for(var x=this.g.length+N.g.length,E=[],I=0;I<2*x;I++)E[I]=0;for(I=0;I<this.g.length;I++)for(var S=0;S<N.g.length;S++){var C=this.i(I)>>>16,v=this.i(I)&65535,H=N.i(S)>>>16,G=N.i(S)&65535;E[2*I+2*S]+=v*G,y(E,2*I+2*S),E[2*I+2*S+1]+=C*G,y(E,2*I+2*S+1),E[2*I+2*S+1]+=v*H,y(E,2*I+2*S+1),E[2*I+2*S+2]+=C*H,y(E,2*I+2*S+2)}for(I=0;I<x;I++)E[I]=E[2*I+1]<<16|E[2*I];for(I=x;I<2*x;I++)E[I]=0;return new a(E,0)};function y(N,x){for(;(N[x]&65535)!=N[x];)N[x+1]+=N[x]>>>16,N[x]&=65535,x++}function w(N,x){this.g=N,this.h=x}function A(N,x){if(k(x))throw Error("division by zero");if(k(N))return new w(f,f);if(j(N))return x=A(P(N),x),new w(P(x.g),P(x.h));if(j(x))return x=A(N,P(x)),new w(P(x.g),x.h);if(30<N.g.length){if(j(N)||j(x))throw Error("slowDivide_ only works with positive integers.");for(var E=m,I=x;0>=I.l(N);)E=D(E),I=D(I);var S=V(E,1),C=V(I,1);for(I=V(I,2),E=V(E,2);!k(I);){var v=C.add(I);0>=v.l(N)&&(S=S.add(E),C=v),I=V(I,1),E=V(E,1)}return x=b(N,S.j(x)),new w(S,x)}for(S=f;0<=N.l(x);){for(E=Math.max(1,Math.floor(N.m()/x.m())),I=Math.ceil(Math.log(E)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),C=d(E),v=C.j(x);j(v)||0<v.l(N);)E-=I,C=d(E),v=C.j(x);k(C)&&(C=m),S=S.add(C),N=b(N,v)}return new w(S,N)}t.A=function(N){return A(this,N).h},t.and=function(N){for(var x=Math.max(this.g.length,N.g.length),E=[],I=0;I<x;I++)E[I]=this.i(I)&N.i(I);return new a(E,this.h&N.h)},t.or=function(N){for(var x=Math.max(this.g.length,N.g.length),E=[],I=0;I<x;I++)E[I]=this.i(I)|N.i(I);return new a(E,this.h|N.h)},t.xor=function(N){for(var x=Math.max(this.g.length,N.g.length),E=[],I=0;I<x;I++)E[I]=this.i(I)^N.i(I);return new a(E,this.h^N.h)};function D(N){for(var x=N.g.length+1,E=[],I=0;I<x;I++)E[I]=N.i(I)<<1|N.i(I-1)>>>31;return new a(E,N.h)}function V(N,x){var E=x>>5;x%=32;for(var I=N.g.length-E,S=[],C=0;C<I;C++)S[C]=0<x?N.i(C+E)>>>x|N.i(C+E+1)<<32-x:N.i(C+E);return new a(S,N.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,_w=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=p,Pr=a}).apply(typeof iy<"u"?iy:typeof self<"u"?self:typeof window<"u"?window:{});var dl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ew,vo,Nw,Al,_h,bw,Tw,Sw;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,h,g){return l==Array.prototype||l==Object.prototype||(l[h]=g.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof dl=="object"&&dl];for(var h=0;h<l.length;++h){var g=l[h];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function s(l,h){if(h)e:{var g=r;l=l.split(".");for(var _=0;_<l.length-1;_++){var M=l[_];if(!(M in g))break e;g=g[M]}l=l[l.length-1],_=g[l],h=h(_),h!=_&&h!=null&&e(g,l,{configurable:!0,writable:!0,value:h})}}function i(l,h){l instanceof String&&(l+="");var g=0,_=!1,M={next:function(){if(!_&&g<l.length){var L=g++;return{value:h(L,l[L]),done:!1}}return _=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}s("Array.prototype.values",function(l){return l||function(){return i(this,function(h,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},c=this||self;function u(l){var h=typeof l;return h=h!="object"?h:l?Array.isArray(l)?"array":h:"null",h=="array"||h=="object"&&typeof l.length=="number"}function d(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function p(l,h,g){return l.call.apply(l.bind,arguments)}function f(l,h,g){if(!l)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,_),l.apply(h,M)}}return function(){return l.apply(h,arguments)}}function m(l,h,g){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:f,m.apply(null,arguments)}function T(l,h){var g=Array.prototype.slice.call(arguments,1);return function(){var _=g.slice();return _.push.apply(_,arguments),l.apply(this,_)}}function k(l,h){function g(){}g.prototype=h.prototype,l.aa=h.prototype,l.prototype=new g,l.prototype.constructor=l,l.Qb=function(_,M,L){for(var W=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)W[Ee-2]=arguments[Ee];return h.prototype[M].apply(_,W)}}function j(l){const h=l.length;if(0<h){const g=Array(h);for(let _=0;_<h;_++)g[_]=l[_];return g}return[]}function P(l,h){for(let g=1;g<arguments.length;g++){const _=arguments[g];if(u(_)){const M=l.length||0,L=_.length||0;l.length=M+L;for(let W=0;W<L;W++)l[M+W]=_[W]}else l.push(_)}}class b{constructor(h,g){this.i=h,this.j=g,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function y(l){return/^[\s\xa0]*$/.test(l)}function w(){var l=c.navigator;return l&&(l=l.userAgent)?l:""}function A(l){return A[" "](l),l}A[" "]=function(){};var D=w().indexOf("Gecko")!=-1&&!(w().toLowerCase().indexOf("webkit")!=-1&&w().indexOf("Edge")==-1)&&!(w().indexOf("Trident")!=-1||w().indexOf("MSIE")!=-1)&&w().indexOf("Edge")==-1;function V(l,h,g){for(const _ in l)h.call(g,l[_],_,l)}function N(l,h){for(const g in l)h.call(void 0,l[g],g,l)}function x(l){const h={};for(const g in l)h[g]=l[g];return h}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(l,h){let g,_;for(let M=1;M<arguments.length;M++){_=arguments[M];for(g in _)l[g]=_[g];for(let L=0;L<E.length;L++)g=E[L],Object.prototype.hasOwnProperty.call(_,g)&&(l[g]=_[g])}}function S(l){var h=1;l=l.split(":");const g=[];for(;0<h&&l.length;)g.push(l.shift()),h--;return l.length&&g.push(l.join(":")),g}function C(l){c.setTimeout(()=>{throw l},0)}function v(){var l=z;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class H{constructor(){this.h=this.g=null}add(h,g){const _=G.get();_.set(h,g),this.h?this.h.next=_:this.g=_,this.h=_}}var G=new b(()=>new te,l=>l.reset());class te{constructor(){this.next=this.g=this.h=null}set(h,g){this.h=h,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let X,O=!1,z=new H,q=()=>{const l=c.Promise.resolve(void 0);X=()=>{l.then(Z)}};var Z=()=>{for(var l;l=v();){try{l.h.call(l.g)}catch(g){C(g)}var h=G;h.j(l),100>h.h&&(h.h++,l.next=h.g,h.g=l)}O=!1};function ue(){this.s=this.s,this.C=this.C}ue.prototype.s=!1,ue.prototype.ma=function(){this.s||(this.s=!0,this.N())},ue.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function de(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}de.prototype.h=function(){this.defaultPrevented=!0};var Je=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const g=()=>{};c.addEventListener("test",g,h),c.removeEventListener("test",g,h)}catch{}return l}();function be(l,h){if(de.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var g=this.type=l.type,_=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget){if(D){e:{try{A(h.nodeName);var M=!0;break e}catch{}M=!1}M||(h=null)}}else g=="mouseover"?h=l.fromElement:g=="mouseout"&&(h=l.toElement);this.relatedTarget=h,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Ae[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&be.aa.h.call(this)}}k(be,de);var Ae={2:"touch",3:"pen",4:"mouse"};be.prototype.h=function(){be.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var F="closure_listenable_"+(1e6*Math.random()|0),K=0;function oe(l,h,g,_,M){this.listener=l,this.proxy=null,this.src=h,this.type=g,this.capture=!!_,this.ha=M,this.key=++K,this.da=this.fa=!1}function le(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function _t(l){this.src=l,this.g={},this.h=0}_t.prototype.add=function(l,h,g,_,M){var L=l.toString();l=this.g[L],l||(l=this.g[L]=[],this.h++);var W=pn(l,h,_,M);return-1<W?(h=l[W],g||(h.fa=!1)):(h=new oe(h,this.src,L,!!_,M),h.fa=g,l.push(h)),h};function nt(l,h){var g=h.type;if(g in l.g){var _=l.g[g],M=Array.prototype.indexOf.call(_,h,void 0),L;(L=0<=M)&&Array.prototype.splice.call(_,M,1),L&&(le(h),l.g[g].length==0&&(delete l.g[g],l.h--))}}function pn(l,h,g,_){for(var M=0;M<l.length;++M){var L=l[M];if(!L.da&&L.listener==h&&L.capture==!!g&&L.ha==_)return M}return-1}var We="closure_lm_"+(1e6*Math.random()|0),js={};function Ui(l,h,g,_,M){if(Array.isArray(h)){for(var L=0;L<h.length;L++)Ui(l,h[L],g,_,M);return null}return g=zi(g),l&&l[F]?l.K(h,g,d(_)?!!_.capture:!1,M):As(l,h,g,!1,_,M)}function As(l,h,g,_,M,L){if(!h)throw Error("Invalid event type");var W=d(M)?!!M.capture:!!M,Ee=qt(l);if(Ee||(l[We]=Ee=new _t(l)),g=Ee.add(h,g,_,W,L),g.proxy)return g;if(_=ja(),g.proxy=_,_.src=l,_.listener=g,l.addEventListener)Je||(M=W),M===void 0&&(M=!1),l.addEventListener(h.toString(),_,M);else if(l.attachEvent)l.attachEvent(gu(h.toString()),_);else if(l.addListener&&l.removeListener)l.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return g}function ja(){function l(g){return h.call(l.src,l.listener,g)}const h=ce;return l}function Bi(l,h,g,_,M){if(Array.isArray(h))for(var L=0;L<h.length;L++)Bi(l,h[L],g,_,M);else _=d(_)?!!_.capture:!!_,g=zi(g),l&&l[F]?(l=l.i,h=String(h).toString(),h in l.g&&(L=l.g[h],g=pn(L,g,_,M),-1<g&&(le(L[g]),Array.prototype.splice.call(L,g,1),L.length==0&&(delete l.g[h],l.h--)))):l&&(l=qt(l))&&(h=l.g[h.toString()],l=-1,h&&(l=pn(h,g,_,M)),(g=-1<l?h[l]:null)&&Aa(g))}function Aa(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[F])nt(h.i,l);else{var g=l.type,_=l.proxy;h.removeEventListener?h.removeEventListener(g,_,l.capture):h.detachEvent?h.detachEvent(gu(g),_):h.addListener&&h.removeListener&&h.removeListener(_),(g=qt(h))?(nt(g,l),g.h==0&&(g.src=null,h[We]=null)):le(l)}}}function gu(l){return l in js?js[l]:js[l]="on"+l}function ce(l,h){if(l.da)l=!0;else{h=new be(h,this);var g=l.listener,_=l.ha||l.src;l.fa&&Aa(l),l=g.call(_,h)}return l}function qt(l){return l=l[We],l instanceof _t?l:null}var Xr="__closure_events_fn_"+(1e9*Math.random()>>>0);function zi(l){return typeof l=="function"?l:(l[Xr]||(l[Xr]=function(h){return l.handleEvent(h)}),l[Xr])}function Le(){ue.call(this),this.i=new _t(this),this.M=this,this.F=null}k(Le,ue),Le.prototype[F]=!0,Le.prototype.removeEventListener=function(l,h,g,_){Bi(this,l,h,g,_)};function ut(l,h){var g,_=l.F;if(_)for(g=[];_;_=_.F)g.push(_);if(l=l.M,_=h.type||h,typeof h=="string")h=new de(h,l);else if(h instanceof de)h.target=h.target||l;else{var M=h;h=new de(_,l),I(h,M)}if(M=!0,g)for(var L=g.length-1;0<=L;L--){var W=h.g=g[L];M=$i(W,_,!0,h)&&M}if(W=h.g=l,M=$i(W,_,!0,h)&&M,M=$i(W,_,!1,h)&&M,g)for(L=0;L<g.length;L++)W=h.g=g[L],M=$i(W,_,!1,h)&&M}Le.prototype.N=function(){if(Le.aa.N.call(this),this.i){var l=this.i,h;for(h in l.g){for(var g=l.g[h],_=0;_<g.length;_++)le(g[_]);delete l.g[h],l.h--}}this.F=null},Le.prototype.K=function(l,h,g,_){return this.i.add(String(l),h,!1,g,_)},Le.prototype.L=function(l,h,g,_){return this.i.add(String(l),h,!0,g,_)};function $i(l,h,g,_){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();for(var M=!0,L=0;L<h.length;++L){var W=h[L];if(W&&!W.da&&W.capture==g){var Ee=W.listener,rt=W.ha||W.src;W.fa&&nt(l.i,W),M=Ee.call(rt,_)!==!1&&M}}return M&&!_.defaultPrevented}function Hi(l,h,g){if(typeof l=="function")g&&(l=m(l,g));else if(l&&typeof l.handleEvent=="function")l=m(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:c.setTimeout(l,h||0)}function Vm(l){l.g=Hi(()=>{l.g=null,l.i&&(l.i=!1,Vm(l))},l.l);const h=l.h;l.h=null,l.m.apply(null,h)}class A1 extends ue{constructor(h,g){super(),this.m=h,this.l=g,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Vm(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qi(l){ue.call(this),this.h=l,this.g={}}k(qi,ue);var Lm=[];function Om(l){V(l.g,function(h,g){this.g.hasOwnProperty(g)&&Aa(h)},l),l.g={}}qi.prototype.N=function(){qi.aa.N.call(this),Om(this)},qi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var yu=c.JSON.stringify,P1=c.JSON.parse,R1=class{stringify(l){return c.JSON.stringify(l,void 0)}parse(l){return c.JSON.parse(l,void 0)}};function xu(){}xu.prototype.h=null;function Fm(l){return l.h||(l.h=l.i())}function Um(){}var Wi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function vu(){de.call(this,"d")}k(vu,de);function wu(){de.call(this,"c")}k(wu,de);var Jr={},Bm=null;function Pa(){return Bm=Bm||new Le}Jr.La="serverreachability";function zm(l){de.call(this,Jr.La,l)}k(zm,de);function Gi(l){const h=Pa();ut(h,new zm(h))}Jr.STAT_EVENT="statevent";function $m(l,h){de.call(this,Jr.STAT_EVENT,l),this.stat=h}k($m,de);function Et(l){const h=Pa();ut(h,new $m(h,l))}Jr.Ma="timingevent";function Hm(l,h){de.call(this,Jr.Ma,l),this.size=h}k(Hm,de);function Ki(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){l()},h)}function Qi(){this.g=!0}Qi.prototype.xa=function(){this.g=!1};function D1(l,h,g,_,M,L){l.info(function(){if(l.g)if(L)for(var W="",Ee=L.split("&"),rt=0;rt<Ee.length;rt++){var xe=Ee[rt].split("=");if(1<xe.length){var dt=xe[0];xe=xe[1];var ht=dt.split("_");W=2<=ht.length&&ht[1]=="type"?W+(dt+"="+xe+"&"):W+(dt+"=redacted&")}}else W=null;else W=L;return"XMLHTTP REQ ("+_+") [attempt "+M+"]: "+h+`
`+g+`
`+W})}function M1(l,h,g,_,M,L,W){l.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+M+"]: "+h+`
`+g+`
`+L+" "+W})}function Ps(l,h,g,_){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+L1(l,g)+(_?" "+_:"")})}function V1(l,h){l.info(function(){return"TIMEOUT: "+h})}Qi.prototype.info=function(){};function L1(l,h){if(!l.g)return h;if(!h)return null;try{var g=JSON.parse(h);if(g){for(l=0;l<g.length;l++)if(Array.isArray(g[l])){var _=g[l];if(!(2>_.length)){var M=_[1];if(Array.isArray(M)&&!(1>M.length)){var L=M[0];if(L!="noop"&&L!="stop"&&L!="close")for(var W=1;W<M.length;W++)M[W]=""}}}}return yu(g)}catch{return h}}var Ra={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},qm={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},_u;function Da(){}k(Da,xu),Da.prototype.g=function(){return new XMLHttpRequest},Da.prototype.i=function(){return{}},_u=new Da;function sr(l,h,g,_){this.j=l,this.i=h,this.l=g,this.R=_||1,this.U=new qi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Wm}function Wm(){this.i=null,this.g="",this.h=!1}var Gm={},Eu={};function Nu(l,h,g){l.L=1,l.v=Oa(Mn(h)),l.m=g,l.P=!0,Km(l,null)}function Km(l,h){l.F=Date.now(),Ma(l),l.A=Mn(l.v);var g=l.A,_=l.R;Array.isArray(_)||(_=[String(_)]),lp(g.i,"t",_),l.C=0,g=l.j.J,l.h=new Wm,l.g=Sp(l.j,g?h:null,!l.m),0<l.O&&(l.M=new A1(m(l.Y,l,l.g),l.O)),h=l.U,g=l.g,_=l.ca;var M="readystatechange";Array.isArray(M)||(M&&(Lm[0]=M.toString()),M=Lm);for(var L=0;L<M.length;L++){var W=Ui(g,M[L],_||h.handleEvent,!1,h.h||h);if(!W)break;h.g[W.key]=W}h=l.H?x(l.H):{},l.m?(l.u||(l.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,h)):(l.u="GET",l.g.ea(l.A,l.u,null,h)),Gi(),D1(l.i,l.u,l.A,l.l,l.R,l.m)}sr.prototype.ca=function(l){l=l.target;const h=this.M;h&&Vn(l)==3?h.j():this.Y(l)},sr.prototype.Y=function(l){try{if(l==this.g)e:{const ht=Vn(this.g);var h=this.g.Ba();const Ms=this.g.Z();if(!(3>ht)&&(ht!=3||this.g&&(this.h.h||this.g.oa()||pp(this.g)))){this.J||ht!=4||h==7||(h==8||0>=Ms?Gi(3):Gi(2)),bu(this);var g=this.g.Z();this.X=g;t:if(Qm(this)){var _=pp(this.g);l="";var M=_.length,L=Vn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Zr(this),Yi(this);var W="";break t}this.h.i=new c.TextDecoder}for(h=0;h<M;h++)this.h.h=!0,l+=this.h.i.decode(_[h],{stream:!(L&&h==M-1)});_.length=0,this.h.g+=l,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=g==200,M1(this.i,this.u,this.A,this.l,this.R,ht,g),this.o){if(this.T&&!this.K){t:{if(this.g){var Ee,rt=this.g;if((Ee=rt.g?rt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(Ee)){var xe=Ee;break t}}xe=null}if(g=xe)Ps(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Tu(this,g);else{this.o=!1,this.s=3,Et(12),Zr(this),Yi(this);break e}}if(this.P){g=!0;let sn;for(;!this.J&&this.C<W.length;)if(sn=O1(this,W),sn==Eu){ht==4&&(this.s=4,Et(14),g=!1),Ps(this.i,this.l,null,"[Incomplete Response]");break}else if(sn==Gm){this.s=4,Et(15),Ps(this.i,this.l,W,"[Invalid Chunk]"),g=!1;break}else Ps(this.i,this.l,sn,null),Tu(this,sn);if(Qm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ht!=4||W.length!=0||this.h.h||(this.s=1,Et(16),g=!1),this.o=this.o&&g,!g)Ps(this.i,this.l,W,"[Invalid Chunked Response]"),Zr(this),Yi(this);else if(0<W.length&&!this.W){this.W=!0;var dt=this.j;dt.g==this&&dt.ba&&!dt.M&&(dt.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),Au(dt),dt.M=!0,Et(11))}}else Ps(this.i,this.l,W,null),Tu(this,W);ht==4&&Zr(this),this.o&&!this.J&&(ht==4?Ep(this.j,this):(this.o=!1,Ma(this)))}else tE(this.g),g==400&&0<W.indexOf("Unknown SID")?(this.s=3,Et(12)):(this.s=0,Et(13)),Zr(this),Yi(this)}}}catch{}finally{}};function Qm(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function O1(l,h){var g=l.C,_=h.indexOf(`
`,g);return _==-1?Eu:(g=Number(h.substring(g,_)),isNaN(g)?Gm:(_+=1,_+g>h.length?Eu:(h=h.slice(_,_+g),l.C=_+g,h)))}sr.prototype.cancel=function(){this.J=!0,Zr(this)};function Ma(l){l.S=Date.now()+l.I,Ym(l,l.I)}function Ym(l,h){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Ki(m(l.ba,l),h)}function bu(l){l.B&&(c.clearTimeout(l.B),l.B=null)}sr.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(V1(this.i,this.A),this.L!=2&&(Gi(),Et(17)),Zr(this),this.s=2,Yi(this)):Ym(this,this.S-l)};function Yi(l){l.j.G==0||l.J||Ep(l.j,l)}function Zr(l){bu(l);var h=l.M;h&&typeof h.ma=="function"&&h.ma(),l.M=null,Om(l.U),l.g&&(h=l.g,l.g=null,h.abort(),h.ma())}function Tu(l,h){try{var g=l.j;if(g.G!=0&&(g.g==l||Su(g.h,l))){if(!l.K&&Su(g.h,l)&&g.G==3){try{var _=g.Da.g.parse(h)}catch{_=null}if(Array.isArray(_)&&_.length==3){var M=_;if(M[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<l.F)Ha(g),za(g);else break e;ju(g),Et(18)}}else g.za=M[1],0<g.za-g.T&&37500>M[2]&&g.F&&g.v==0&&!g.C&&(g.C=Ki(m(g.Za,g),6e3));if(1>=Zm(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else ts(g,11)}else if((l.K||g.g==l)&&Ha(g),!y(h))for(M=g.Da.g.parse(h),h=0;h<M.length;h++){let xe=M[h];if(g.T=xe[0],xe=xe[1],g.G==2)if(xe[0]=="c"){g.K=xe[1],g.ia=xe[2];const dt=xe[3];dt!=null&&(g.la=dt,g.j.info("VER="+g.la));const ht=xe[4];ht!=null&&(g.Aa=ht,g.j.info("SVER="+g.Aa));const Ms=xe[5];Ms!=null&&typeof Ms=="number"&&0<Ms&&(_=1.5*Ms,g.L=_,g.j.info("backChannelRequestTimeoutMs_="+_)),_=g;const sn=l.g;if(sn){const Wa=sn.g?sn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Wa){var L=_.h;L.g||Wa.indexOf("spdy")==-1&&Wa.indexOf("quic")==-1&&Wa.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(Iu(L,L.h),L.h=null))}if(_.D){const Pu=sn.g?sn.g.getResponseHeader("X-HTTP-Session-Id"):null;Pu&&(_.ya=Pu,Te(_.I,_.D,Pu))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-l.F,g.j.info("Handshake RTT: "+g.R+"ms")),_=g;var W=l;if(_.qa=Tp(_,_.J?_.ia:null,_.W),W.K){ep(_.h,W);var Ee=W,rt=_.L;rt&&(Ee.I=rt),Ee.B&&(bu(Ee),Ma(Ee)),_.g=W}else wp(_);0<g.i.length&&$a(g)}else xe[0]!="stop"&&xe[0]!="close"||ts(g,7);else g.G==3&&(xe[0]=="stop"||xe[0]=="close"?xe[0]=="stop"?ts(g,7):Cu(g):xe[0]!="noop"&&g.l&&g.l.ta(xe),g.v=0)}}Gi(4)}catch{}}var F1=class{constructor(l,h){this.g=l,this.map=h}};function Xm(l){this.l=l||10,c.PerformanceNavigationTiming?(l=c.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Jm(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Zm(l){return l.h?1:l.g?l.g.size:0}function Su(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function Iu(l,h){l.g?l.g.add(h):l.h=h}function ep(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}Xm.prototype.cancel=function(){if(this.i=tp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function tp(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let h=l.i;for(const g of l.g.values())h=h.concat(g.D);return h}return j(l.i)}function U1(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var h=[],g=l.length,_=0;_<g;_++)h.push(l[_]);return h}h=[],g=0;for(_ in l)h[g++]=l[_];return h}function B1(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var h=[];l=l.length;for(var g=0;g<l;g++)h.push(g);return h}h=[],g=0;for(const _ in l)h[g++]=_;return h}}}function np(l,h){if(l.forEach&&typeof l.forEach=="function")l.forEach(h,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,h,void 0);else for(var g=B1(l),_=U1(l),M=_.length,L=0;L<M;L++)h.call(void 0,_[L],g&&g[L],l)}var rp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function z1(l,h){if(l){l=l.split("&");for(var g=0;g<l.length;g++){var _=l[g].indexOf("="),M=null;if(0<=_){var L=l[g].substring(0,_);M=l[g].substring(_+1)}else L=l[g];h(L,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function es(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof es){this.h=l.h,Va(this,l.j),this.o=l.o,this.g=l.g,La(this,l.s),this.l=l.l;var h=l.i,g=new Zi;g.i=h.i,h.g&&(g.g=new Map(h.g),g.h=h.h),sp(this,g),this.m=l.m}else l&&(h=String(l).match(rp))?(this.h=!1,Va(this,h[1]||"",!0),this.o=Xi(h[2]||""),this.g=Xi(h[3]||"",!0),La(this,h[4]),this.l=Xi(h[5]||"",!0),sp(this,h[6]||"",!0),this.m=Xi(h[7]||"")):(this.h=!1,this.i=new Zi(null,this.h))}es.prototype.toString=function(){var l=[],h=this.j;h&&l.push(Ji(h,ip,!0),":");var g=this.g;return(g||h=="file")&&(l.push("//"),(h=this.o)&&l.push(Ji(h,ip,!0),"@"),l.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&l.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&l.push("/"),l.push(Ji(g,g.charAt(0)=="/"?q1:H1,!0))),(g=this.i.toString())&&l.push("?",g),(g=this.m)&&l.push("#",Ji(g,G1)),l.join("")};function Mn(l){return new es(l)}function Va(l,h,g){l.j=g?Xi(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function La(l,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);l.s=h}else l.s=null}function sp(l,h,g){h instanceof Zi?(l.i=h,K1(l.i,l.h)):(g||(h=Ji(h,W1)),l.i=new Zi(h,l.h))}function Te(l,h,g){l.i.set(h,g)}function Oa(l){return Te(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Xi(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Ji(l,h,g){return typeof l=="string"?(l=encodeURI(l).replace(h,$1),g&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function $1(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var ip=/[#\/\?@]/g,H1=/[#\?:]/g,q1=/[#\?]/g,W1=/[#\?@]/g,G1=/#/g;function Zi(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function ir(l){l.g||(l.g=new Map,l.h=0,l.i&&z1(l.i,function(h,g){l.add(decodeURIComponent(h.replace(/\+/g," ")),g)}))}t=Zi.prototype,t.add=function(l,h){ir(this),this.i=null,l=Rs(this,l);var g=this.g.get(l);return g||this.g.set(l,g=[]),g.push(h),this.h+=1,this};function op(l,h){ir(l),h=Rs(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function ap(l,h){return ir(l),h=Rs(l,h),l.g.has(h)}t.forEach=function(l,h){ir(this),this.g.forEach(function(g,_){g.forEach(function(M){l.call(h,M,_,this)},this)},this)},t.na=function(){ir(this);const l=Array.from(this.g.values()),h=Array.from(this.g.keys()),g=[];for(let _=0;_<h.length;_++){const M=l[_];for(let L=0;L<M.length;L++)g.push(h[_])}return g},t.V=function(l){ir(this);let h=[];if(typeof l=="string")ap(this,l)&&(h=h.concat(this.g.get(Rs(this,l))));else{l=Array.from(this.g.values());for(let g=0;g<l.length;g++)h=h.concat(l[g])}return h},t.set=function(l,h){return ir(this),this.i=null,l=Rs(this,l),ap(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},t.get=function(l,h){return l?(l=this.V(l),0<l.length?String(l[0]):h):h};function lp(l,h,g){op(l,h),0<g.length&&(l.i=null,l.g.set(Rs(l,h),j(g)),l.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],h=Array.from(this.g.keys());for(var g=0;g<h.length;g++){var _=h[g];const L=encodeURIComponent(String(_)),W=this.V(_);for(_=0;_<W.length;_++){var M=L;W[_]!==""&&(M+="="+encodeURIComponent(String(W[_]))),l.push(M)}}return this.i=l.join("&")};function Rs(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function K1(l,h){h&&!l.j&&(ir(l),l.i=null,l.g.forEach(function(g,_){var M=_.toLowerCase();_!=M&&(op(this,_),lp(this,M,g))},l)),l.j=h}function Q1(l,h){const g=new Qi;if(c.Image){const _=new Image;_.onload=T(or,g,"TestLoadImage: loaded",!0,h,_),_.onerror=T(or,g,"TestLoadImage: error",!1,h,_),_.onabort=T(or,g,"TestLoadImage: abort",!1,h,_),_.ontimeout=T(or,g,"TestLoadImage: timeout",!1,h,_),c.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=l}else h(!1)}function Y1(l,h){const g=new Qi,_=new AbortController,M=setTimeout(()=>{_.abort(),or(g,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:_.signal}).then(L=>{clearTimeout(M),L.ok?or(g,"TestPingServer: ok",!0,h):or(g,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(M),or(g,"TestPingServer: error",!1,h)})}function or(l,h,g,_,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),_(g)}catch{}}function X1(){this.g=new R1}function J1(l,h,g){const _=g||"";try{np(l,function(M,L){let W=M;d(M)&&(W=yu(M)),h.push(_+L+"="+encodeURIComponent(W))})}catch(M){throw h.push(_+"type="+encodeURIComponent("_badmap")),M}}function Fa(l){this.l=l.Ub||null,this.j=l.eb||!1}k(Fa,xu),Fa.prototype.g=function(){return new Ua(this.l,this.j)},Fa.prototype.i=function(l){return function(){return l}}({});function Ua(l,h){Le.call(this),this.D=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}k(Ua,Le),t=Ua.prototype,t.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=h,this.readyState=1,to(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(h.body=l),(this.D||c).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,eo(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,to(this)),this.g&&(this.readyState=3,to(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;cp(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function cp(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?eo(this):to(this),this.readyState==3&&cp(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,eo(this))},t.Qa=function(l){this.g&&(this.response=l,eo(this))},t.ga=function(){this.g&&eo(this)};function eo(l){l.readyState=4,l.l=null,l.j=null,l.v=null,to(l)}t.setRequestHeader=function(l,h){this.u.append(l,h)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],h=this.h.entries();for(var g=h.next();!g.done;)g=g.value,l.push(g[0]+": "+g[1]),g=h.next();return l.join(`\r
`)};function to(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Ua.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function up(l){let h="";return V(l,function(g,_){h+=_,h+=":",h+=g,h+=`\r
`}),h}function ku(l,h,g){e:{for(_ in g){var _=!1;break e}_=!0}_||(g=up(g),typeof l=="string"?g!=null&&encodeURIComponent(String(g)):Te(l,h,g))}function Oe(l){Le.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}k(Oe,Le);var Z1=/^https?$/i,eE=["POST","PUT"];t=Oe.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,h,g,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():_u.g(),this.v=this.o?Fm(this.o):Fm(_u),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(L){dp(this,L);return}if(l=g||"",g=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var M in _)g.set(M,_[M]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const L of _.keys())g.set(L,_.get(L));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(g.keys()).find(L=>L.toLowerCase()=="content-type"),M=c.FormData&&l instanceof c.FormData,!(0<=Array.prototype.indexOf.call(eE,h,void 0))||_||M||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,W]of g)this.g.setRequestHeader(L,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{mp(this),this.u=!0,this.g.send(l),this.u=!1}catch(L){dp(this,L)}};function dp(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.m=5,hp(l),Ba(l)}function hp(l){l.A||(l.A=!0,ut(l,"complete"),ut(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,ut(this,"complete"),ut(this,"abort"),Ba(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ba(this,!0)),Oe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?fp(this):this.bb())},t.bb=function(){fp(this)};function fp(l){if(l.h&&typeof a<"u"&&(!l.v[1]||Vn(l)!=4||l.Z()!=2)){if(l.u&&Vn(l)==4)Hi(l.Ea,0,l);else if(ut(l,"readystatechange"),Vn(l)==4){l.h=!1;try{const W=l.Z();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var g;if(!(g=h)){var _;if(_=W===0){var M=String(l.D).match(rp)[1]||null;!M&&c.self&&c.self.location&&(M=c.self.location.protocol.slice(0,-1)),_=!Z1.test(M?M.toLowerCase():"")}g=_}if(g)ut(l,"complete"),ut(l,"success");else{l.m=6;try{var L=2<Vn(l)?l.g.statusText:""}catch{L=""}l.l=L+" ["+l.Z()+"]",hp(l)}}finally{Ba(l)}}}}function Ba(l,h){if(l.g){mp(l);const g=l.g,_=l.v[0]?()=>{}:null;l.g=null,l.v=null,h||ut(l,"ready");try{g.onreadystatechange=_}catch{}}}function mp(l){l.I&&(c.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function Vn(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<Vn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),P1(h)}};function pp(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function tE(l){const h={};l=(l.g&&2<=Vn(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<l.length;_++){if(y(l[_]))continue;var g=S(l[_]);const M=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const L=h[M]||[];h[M]=L,L.push(g)}N(h,function(_){return _.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function no(l,h,g){return g&&g.internalChannelParams&&g.internalChannelParams[l]||h}function gp(l){this.Aa=0,this.i=[],this.j=new Qi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=no("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=no("baseRetryDelayMs",5e3,l),this.cb=no("retryDelaySeedMs",1e4,l),this.Wa=no("forwardChannelMaxRetries",2,l),this.wa=no("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Xm(l&&l.concurrentRequestLimit),this.Da=new X1,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=gp.prototype,t.la=8,t.G=1,t.connect=function(l,h,g,_){Et(0),this.W=l,this.H=h||{},g&&_!==void 0&&(this.H.OSID=g,this.H.OAID=_),this.F=this.X,this.I=Tp(this,null,this.W),$a(this)};function Cu(l){if(yp(l),l.G==3){var h=l.U++,g=Mn(l.I);if(Te(g,"SID",l.K),Te(g,"RID",h),Te(g,"TYPE","terminate"),ro(l,g),h=new sr(l,l.j,h),h.L=2,h.v=Oa(Mn(g)),g=!1,c.navigator&&c.navigator.sendBeacon)try{g=c.navigator.sendBeacon(h.v.toString(),"")}catch{}!g&&c.Image&&(new Image().src=h.v,g=!0),g||(h.g=Sp(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Ma(h)}bp(l)}function za(l){l.g&&(Au(l),l.g.cancel(),l.g=null)}function yp(l){za(l),l.u&&(c.clearTimeout(l.u),l.u=null),Ha(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&c.clearTimeout(l.s),l.s=null)}function $a(l){if(!Jm(l.h)&&!l.s){l.s=!0;var h=l.Ga;X||q(),O||(X(),O=!0),z.add(h,l),l.B=0}}function nE(l,h){return Zm(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=h.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Ki(m(l.Ga,l,h),Np(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const M=new sr(this,this.j,l);let L=this.o;if(this.S&&(L?(L=x(L),I(L,this.S)):L=this.S),this.m!==null||this.O||(M.H=L,L=null),this.P)e:{for(var h=0,g=0;g<this.i.length;g++){t:{var _=this.i[g];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(h+=_,4096<h){h=g;break e}if(h===4096||g===this.i.length-1){h=g+1;break e}}h=1e3}else h=1e3;h=vp(this,M,h),g=Mn(this.I),Te(g,"RID",l),Te(g,"CVER",22),this.D&&Te(g,"X-HTTP-Session-Id",this.D),ro(this,g),L&&(this.O?h="headers="+encodeURIComponent(String(up(L)))+"&"+h:this.m&&ku(g,this.m,L)),Iu(this.h,M),this.Ua&&Te(g,"TYPE","init"),this.P?(Te(g,"$req",h),Te(g,"SID","null"),M.T=!0,Nu(M,g,null)):Nu(M,g,h),this.G=2}}else this.G==3&&(l?xp(this,l):this.i.length==0||Jm(this.h)||xp(this))};function xp(l,h){var g;h?g=h.l:g=l.U++;const _=Mn(l.I);Te(_,"SID",l.K),Te(_,"RID",g),Te(_,"AID",l.T),ro(l,_),l.m&&l.o&&ku(_,l.m,l.o),g=new sr(l,l.j,g,l.B+1),l.m===null&&(g.H=l.o),h&&(l.i=h.D.concat(l.i)),h=vp(l,g,1e3),g.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Iu(l.h,g),Nu(g,_,h)}function ro(l,h){l.H&&V(l.H,function(g,_){Te(h,_,g)}),l.l&&np({},function(g,_){Te(h,_,g)})}function vp(l,h,g){g=Math.min(l.i.length,g);var _=l.l?m(l.l.Na,l.l,l):null;e:{var M=l.i;let L=-1;for(;;){const W=["count="+g];L==-1?0<g?(L=M[0].g,W.push("ofs="+L)):L=0:W.push("ofs="+L);let Ee=!0;for(let rt=0;rt<g;rt++){let xe=M[rt].g;const dt=M[rt].map;if(xe-=L,0>xe)L=Math.max(0,M[rt].g-100),Ee=!1;else try{J1(dt,W,"req"+xe+"_")}catch{_&&_(dt)}}if(Ee){_=W.join("&");break e}}}return l=l.i.splice(0,g),h.D=l,_}function wp(l){if(!l.g&&!l.u){l.Y=1;var h=l.Fa;X||q(),O||(X(),O=!0),z.add(h,l),l.v=0}}function ju(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Ki(m(l.Fa,l),Np(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,_p(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Ki(m(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Et(10),za(this),_p(this))};function Au(l){l.A!=null&&(c.clearTimeout(l.A),l.A=null)}function _p(l){l.g=new sr(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var h=Mn(l.qa);Te(h,"RID","rpc"),Te(h,"SID",l.K),Te(h,"AID",l.T),Te(h,"CI",l.F?"0":"1"),!l.F&&l.ja&&Te(h,"TO",l.ja),Te(h,"TYPE","xmlhttp"),ro(l,h),l.m&&l.o&&ku(h,l.m,l.o),l.L&&(l.g.I=l.L);var g=l.g;l=l.ia,g.L=1,g.v=Oa(Mn(h)),g.m=null,g.P=!0,Km(g,l)}t.Za=function(){this.C!=null&&(this.C=null,za(this),ju(this),Et(19))};function Ha(l){l.C!=null&&(c.clearTimeout(l.C),l.C=null)}function Ep(l,h){var g=null;if(l.g==h){Ha(l),Au(l),l.g=null;var _=2}else if(Su(l.h,h))g=h.D,ep(l.h,h),_=1;else return;if(l.G!=0){if(h.o)if(_==1){g=h.m?h.m.length:0,h=Date.now()-h.F;var M=l.B;_=Pa(),ut(_,new Hm(_,g)),$a(l)}else wp(l);else if(M=h.s,M==3||M==0&&0<h.X||!(_==1&&nE(l,h)||_==2&&ju(l)))switch(g&&0<g.length&&(h=l.h,h.i=h.i.concat(g)),M){case 1:ts(l,5);break;case 4:ts(l,10);break;case 3:ts(l,6);break;default:ts(l,2)}}}function Np(l,h){let g=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(g*=2),g*h}function ts(l,h){if(l.j.info("Error code "+h),h==2){var g=m(l.fb,l),_=l.Xa;const M=!_;_=new es(_||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Va(_,"https"),Oa(_),M?Q1(_.toString(),g):Y1(_.toString(),g)}else Et(2);l.G=0,l.l&&l.l.sa(h),bp(l),yp(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),Et(2)):(this.j.info("Failed to ping google.com"),Et(1))};function bp(l){if(l.G=0,l.ka=[],l.l){const h=tp(l.h);(h.length!=0||l.i.length!=0)&&(P(l.ka,h),P(l.ka,l.i),l.h.i.length=0,j(l.i),l.i.length=0),l.l.ra()}}function Tp(l,h,g){var _=g instanceof es?Mn(g):new es(g);if(_.g!="")h&&(_.g=h+"."+_.g),La(_,_.s);else{var M=c.location;_=M.protocol,h=h?h+"."+M.hostname:M.hostname,M=+M.port;var L=new es(null);_&&Va(L,_),h&&(L.g=h),M&&La(L,M),g&&(L.l=g),_=L}return g=l.D,h=l.ya,g&&h&&Te(_,g,h),Te(_,"VER",l.la),ro(l,_),_}function Sp(l,h,g){if(h&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Ca&&!l.pa?new Oe(new Fa({eb:g})):new Oe(l.pa),h.Ha(l.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ip(){}t=Ip.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function qa(){}qa.prototype.g=function(l,h){return new Vt(l,h)};function Vt(l,h){Le.call(this),this.g=new gp(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(l?l["X-WebChannel-Client-Profile"]=h.va:l={"X-WebChannel-Client-Profile":h.va}),this.g.S=l,(l=h&&h.Sb)&&!y(l)&&(this.g.m=l),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!y(h)&&(this.g.D=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new Ds(this)}k(Vt,Le),Vt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Vt.prototype.close=function(){Cu(this.g)},Vt.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var g={};g.__data__=l,l=g}else this.u&&(g={},g.__data__=yu(l),l=g);h.i.push(new F1(h.Ya++,l)),h.G==3&&$a(h)},Vt.prototype.N=function(){this.g.l=null,delete this.j,Cu(this.g),delete this.g,Vt.aa.N.call(this)};function kp(l){vu.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(const g in h){l=g;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}k(kp,vu);function Cp(){wu.call(this),this.status=1}k(Cp,wu);function Ds(l){this.g=l}k(Ds,Ip),Ds.prototype.ua=function(){ut(this.g,"a")},Ds.prototype.ta=function(l){ut(this.g,new kp(l))},Ds.prototype.sa=function(l){ut(this.g,new Cp)},Ds.prototype.ra=function(){ut(this.g,"b")},qa.prototype.createWebChannel=qa.prototype.g,Vt.prototype.send=Vt.prototype.o,Vt.prototype.open=Vt.prototype.m,Vt.prototype.close=Vt.prototype.close,Sw=function(){return new qa},Tw=function(){return Pa()},bw=Jr,_h={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ra.NO_ERROR=0,Ra.TIMEOUT=8,Ra.HTTP_ERROR=6,Al=Ra,qm.COMPLETE="complete",Nw=qm,Um.EventType=Wi,Wi.OPEN="a",Wi.CLOSE="b",Wi.ERROR="c",Wi.MESSAGE="d",Le.prototype.listen=Le.prototype.K,vo=Um,Oe.prototype.listenOnce=Oe.prototype.L,Oe.prototype.getLastError=Oe.prototype.Ka,Oe.prototype.getLastErrorCode=Oe.prototype.Ba,Oe.prototype.getStatus=Oe.prototype.Z,Oe.prototype.getResponseJson=Oe.prototype.Oa,Oe.prototype.getResponseText=Oe.prototype.oa,Oe.prototype.send=Oe.prototype.ea,Oe.prototype.setWithCredentials=Oe.prototype.Ha,Ew=Oe}).apply(typeof dl<"u"?dl:typeof self<"u"?self:typeof window<"u"?window:{});const oy="@firebase/firestore",ay="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}gt.UNAUTHENTICATED=new gt(null),gt.GOOGLE_CREDENTIALS=new gt("google-credentials-uid"),gt.FIRST_PARTY=new gt("first-party-uid"),gt.MOCK_USER=new gt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mi="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Es=new $f("@firebase/firestore");function Ls(){return Es.logLevel}function Q(t,...e){if(Es.logLevel<=fe.DEBUG){const n=e.map(Wf);Es.debug(`Firestore (${Mi}): ${t}`,...n)}}function Jn(t,...e){if(Es.logLevel<=fe.ERROR){const n=e.map(Wf);Es.error(`Firestore (${Mi}): ${t}`,...n)}}function wi(t,...e){if(Es.logLevel<=fe.WARN){const n=e.map(Wf);Es.warn(`Firestore (${Mi}): ${t}`,...n)}}function Wf(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Iw(t,r,n)}function Iw(t,e,n){let r=`FIRESTORE (${Mi}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Jn(r),new Error(r)}function we(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||Iw(e,s,r)}function ie(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class J extends rr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Y2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(gt.UNAUTHENTICATED))}shutdown(){}}class X2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class J2{constructor(e){this.t=e,this.currentUser=gt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){we(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Rr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Rr,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},c=u=>{Q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(Q("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Rr)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(we(typeof r.accessToken=="string",31837,{l:r}),new kw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return we(e===null||typeof e=="string",2055,{h:e}),new gt(e)}}class Z2{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=gt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class eI{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new Z2(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(gt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ly{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class tI{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,wn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){we(this.o===void 0,3512);const r=i=>{i.error!=null&&Q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,Q("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{Q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):Q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ly(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(we(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new ly(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nI(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=nI(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function me(t,e){return t<e?-1:t>e?1:0}function Eh(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return md(s)===md(i)?me(s,i):md(s)?1:-1}return me(t.length,e.length)}const rI=55296,sI=57343;function md(t){const e=t.charCodeAt(0);return e>=rI&&e<=sI}function _i(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cy="__name__";class xn{constructor(e,n,r){n===void 0?n=0:n>e.length&&ne(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ne(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return xn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof xn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=xn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return me(e.length,n.length)}static compareSegments(e,n){const r=xn.isNumericId(e),s=xn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?xn.extractNumericId(e).compare(xn.extractNumericId(n)):Eh(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Pr.fromString(e.substring(4,e.length-2))}}class Ie extends xn{construct(e,n,r){return new Ie(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new J(B.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ie(n)}static emptyPath(){return new Ie([])}}const iI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ot extends xn{construct(e,n,r){return new ot(e,n,r)}static isValidIdentifier(e){return iI.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ot.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===cy}static keyField(){return new ot([cy])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new J(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new J(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new J(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else c==="`"?(a=!a,s++):c!=="."||a?(r+=c,s++):(i(),s++)}if(i(),a)throw new J(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ot(n)}static emptyPath(){return new ot([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.path=e}static fromPath(e){return new ee(Ie.fromString(e))}static fromName(e){return new ee(Ie.fromString(e).popFirst(5))}static empty(){return new ee(Ie.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ie.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ie.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ee(new Ie(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cw(t,e,n){if(!n)throw new J(B.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function oI(t,e,n,r){if(e===!0&&r===!0)throw new J(B.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function uy(t){if(!ee.isDocumentKey(t))throw new J(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function dy(t){if(ee.isDocumentKey(t))throw new J(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function jw(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Kf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ne(12329,{type:typeof t})}function Zt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new J(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Kf(t);throw new J(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function He(t,e){const n={typeString:t};return e&&(n.value=e),n}function _a(t,e){if(!jw(t))throw new J(B.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const a=t[r];if(s&&typeof a!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&a!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new J(B.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hy=-62135596800,fy=1e6;class ke{static now(){return ke.fromMillis(Date.now())}static fromDate(e){return ke.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*fy);return new ke(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new J(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new J(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<hy)throw new J(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new J(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/fy}_compareTo(e){return this.seconds===e.seconds?me(this.nanoseconds,e.nanoseconds):me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ke._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(_a(e,ke._jsonSchema))return new ke(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-hy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ke._jsonSchemaVersion="firestore/timestamp/1.0",ke._jsonSchema={type:He("string",ke._jsonSchemaVersion),seconds:He("number"),nanoseconds:He("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{static fromTimestamp(e){return new se(e)}static min(){return new se(new ke(0,0))}static max(){return new se(new ke(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sa=-1;function aI(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=se.fromTimestamp(r===1e9?new ke(n+1,0):new ke(n,r));return new Or(s,ee.empty(),e)}function lI(t){return new Or(t.readTime,t.key,sa)}class Or{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Or(se.min(),ee.empty(),sa)}static max(){return new Or(se.max(),ee.empty(),sa)}}function cI(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ee.comparator(t.documentKey,e.documentKey),n!==0?n:me(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class dI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vi(t){if(t.code!==B.FAILED_PRECONDITION||t.message!==uI)throw t;Q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ne(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let s=0,i=0,a=!1;e.forEach(c=>{++s,c.next(()=>{++i,a&&i===s&&n()},u=>r(u))}),a=!0,i===s&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(s=>s?U.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new U((r,s)=>{const i=e.length,a=new Array(i);let c=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(p=>{a[d]=p,++c,c===i&&r(a)},p=>s(p))}})}static doWhile(e,n){return new U((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function hI(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Li(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Xc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qf=-1;function Jc(t){return t==null}function mc(t){return t===0&&1/t==-1/0}function fI(t){return typeof t=="number"&&Number.isInteger(t)&&!mc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aw="";function mI(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=my(e)),e=pI(t.get(n),e);return my(e)}function pI(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case Aw:n+="";break;default:n+=i}}return n}function my(t){return t+Aw+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function py(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Qr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Pw(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e,n){this.comparator=e,this.root=n||it.EMPTY}insert(e,n){return new Ve(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,it.BLACK,null,null))}remove(e){return new Ve(this.comparator,this.root.remove(e,this.comparator).copy(null,null,it.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new hl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new hl(this.root,e,this.comparator,!1)}getReverseIterator(){return new hl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new hl(this.root,e,this.comparator,!0)}}class hl{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class it{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??it.RED,this.left=s??it.EMPTY,this.right=i??it.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new it(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return it.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return it.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,it.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,it.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ne(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ne(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ne(27949);return e+(this.isRed()?0:1)}}it.EMPTY=null,it.RED=!0,it.BLACK=!1;it.EMPTY=new class{constructor(){this.size=0}get key(){throw ne(57766)}get value(){throw ne(16141)}get color(){throw ne(16727)}get left(){throw ne(29726)}get right(){throw ne(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new it(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e){this.comparator=e,this.data=new Ve(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new gy(this.data.getIterator())}getIteratorFrom(e){return new gy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Xe)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Xe(this.comparator);return n.data=e,n}}class gy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.fields=e,e.sort(ot.comparator)}static empty(){return new Ut([])}unionWith(e){let n=new Xe(ot.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ut(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return _i(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Rw("Invalid base64 string: "+i):i}}(e);return new ct(n)}static fromUint8Array(e){const n=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new ct(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ct.EMPTY_BYTE_STRING=new ct("");const gI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fr(t){if(we(!!t,39018),typeof t=="string"){let e=0;const n=gI.exec(t);if(we(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ue(t.seconds),nanos:Ue(t.nanos)}}function Ue(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ur(t){return typeof t=="string"?ct.fromBase64String(t):ct.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dw="server_timestamp",Mw="__type__",Vw="__previous_value__",Lw="__local_write_time__";function Yf(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Mw])==null?void 0:r.stringValue)===Dw}function Zc(t){const e=t.mapValue.fields[Vw];return Yf(e)?Zc(e):e}function ia(t){const e=Fr(t.mapValue.fields[Lw].timestampValue);return new ke(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(e,n,r,s,i,a,c,u,d,p){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=p}}const pc="(default)";class oa{constructor(e,n){this.projectId=e,this.database=n||pc}static empty(){return new oa("","")}get isDefaultDatabase(){return this.database===pc}isEqual(e){return e instanceof oa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ow="__type__",xI="__max__",fl={mapValue:{}},Fw="__vector__",gc="value";function Br(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Yf(t)?4:wI(t)?9007199254740991:vI(t)?10:11:ne(28295,{value:t})}function An(t,e){if(t===e)return!0;const n=Br(t);if(n!==Br(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ia(t).isEqual(ia(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=Fr(s.timestampValue),c=Fr(i.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Ur(s.bytesValue).isEqual(Ur(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Ue(s.geoPointValue.latitude)===Ue(i.geoPointValue.latitude)&&Ue(s.geoPointValue.longitude)===Ue(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ue(s.integerValue)===Ue(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Ue(s.doubleValue),c=Ue(i.doubleValue);return a===c?mc(a)===mc(c):isNaN(a)&&isNaN(c)}return!1}(t,e);case 9:return _i(t.arrayValue.values||[],e.arrayValue.values||[],An);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},c=i.mapValue.fields||{};if(py(a)!==py(c))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(c[u]===void 0||!An(a[u],c[u])))return!1;return!0}(t,e);default:return ne(52216,{left:t})}}function aa(t,e){return(t.values||[]).find(n=>An(n,e))!==void 0}function Ei(t,e){if(t===e)return 0;const n=Br(t),r=Br(e);if(n!==r)return me(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return me(t.booleanValue,e.booleanValue);case 2:return function(i,a){const c=Ue(i.integerValue||i.doubleValue),u=Ue(a.integerValue||a.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return yy(t.timestampValue,e.timestampValue);case 4:return yy(ia(t),ia(e));case 5:return Eh(t.stringValue,e.stringValue);case 6:return function(i,a){const c=Ur(i),u=Ur(a);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const c=i.split("/"),u=a.split("/");for(let d=0;d<c.length&&d<u.length;d++){const p=me(c[d],u[d]);if(p!==0)return p}return me(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const c=me(Ue(i.latitude),Ue(a.latitude));return c!==0?c:me(Ue(i.longitude),Ue(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return xy(t.arrayValue,e.arrayValue);case 10:return function(i,a){var m,T,k,j;const c=i.fields||{},u=a.fields||{},d=(m=c[gc])==null?void 0:m.arrayValue,p=(T=u[gc])==null?void 0:T.arrayValue,f=me(((k=d==null?void 0:d.values)==null?void 0:k.length)||0,((j=p==null?void 0:p.values)==null?void 0:j.length)||0);return f!==0?f:xy(d,p)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===fl.mapValue&&a===fl.mapValue)return 0;if(i===fl.mapValue)return 1;if(a===fl.mapValue)return-1;const c=i.fields||{},u=Object.keys(c),d=a.fields||{},p=Object.keys(d);u.sort(),p.sort();for(let f=0;f<u.length&&f<p.length;++f){const m=Eh(u[f],p[f]);if(m!==0)return m;const T=Ei(c[u[f]],d[p[f]]);if(T!==0)return T}return me(u.length,p.length)}(t.mapValue,e.mapValue);default:throw ne(23264,{he:n})}}function yy(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return me(t,e);const n=Fr(t),r=Fr(e),s=me(n.seconds,r.seconds);return s!==0?s:me(n.nanos,r.nanos)}function xy(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Ei(n[s],r[s]);if(i)return i}return me(n.length,r.length)}function Ni(t){return Nh(t)}function Nh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Fr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ur(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ee.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Nh(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${Nh(n.fields[a])}`;return s+"}"}(t.mapValue):ne(61005,{value:t})}function Pl(t){switch(Br(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Zc(t);return e?16+Pl(e):16;case 5:return 2*t.stringValue.length;case 6:return Ur(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Pl(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Qr(r.fields,(i,a)=>{s+=i.length+Pl(a)}),s}(t.mapValue);default:throw ne(13486,{value:t})}}function bh(t){return!!t&&"integerValue"in t}function Xf(t){return!!t&&"arrayValue"in t}function vy(t){return!!t&&"nullValue"in t}function wy(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Rl(t){return!!t&&"mapValue"in t}function vI(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Ow])==null?void 0:r.stringValue)===Fw}function Ro(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Qr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ro(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ro(t.arrayValue.values[n]);return e}return{...t}}function wI(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===xI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.value=e}static empty(){return new At({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Rl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ro(n)}setAll(e){let n=ot.emptyPath(),r={},s=[];e.forEach((a,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=c.popLast()}a?r[c.lastSegment()]=Ro(a):s.push(c.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Rl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return An(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Rl(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Qr(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new At(Ro(this.value))}}function Uw(t){const e=[];return Qr(t.fields,(n,r)=>{const s=new ot([n]);if(Rl(r)){const i=Uw(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new Ut(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e,n,r,s,i,a,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=c}static newInvalidDocument(e){return new xt(e,0,se.min(),se.min(),se.min(),At.empty(),0)}static newFoundDocument(e,n,r,s){return new xt(e,1,n,se.min(),r,s,0)}static newNoDocument(e,n){return new xt(e,2,n,se.min(),se.min(),At.empty(),0)}static newUnknownDocument(e,n){return new xt(e,3,n,se.min(),se.min(),At.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=At.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=At.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof xt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new xt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e,n){this.position=e,this.inclusive=n}}function _y(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?r=ee.comparator(ee.fromName(a.referenceValue),n.key):r=Ei(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Ey(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!An(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(e,n="asc"){this.field=e,this.dir=n}}function _I(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{}class Ke extends Bw{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new NI(e,n,r):n==="array-contains"?new SI(e,r):n==="in"?new II(e,r):n==="not-in"?new kI(e,r):n==="array-contains-any"?new CI(e,r):new Ke(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new bI(e,r):new TI(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ei(n,this.value)):n!==null&&Br(this.value)===Br(n)&&this.matchesComparison(Ei(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ne(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Pn extends Bw{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Pn(e,n)}matches(e){return zw(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function zw(t){return t.op==="and"}function $w(t){return EI(t)&&zw(t)}function EI(t){for(const e of t.filters)if(e instanceof Pn)return!1;return!0}function Th(t){if(t instanceof Ke)return t.field.canonicalString()+t.op.toString()+Ni(t.value);if($w(t))return t.filters.map(e=>Th(e)).join(",");{const e=t.filters.map(n=>Th(n)).join(",");return`${t.op}(${e})`}}function Hw(t,e){return t instanceof Ke?function(r,s){return s instanceof Ke&&r.op===s.op&&r.field.isEqual(s.field)&&An(r.value,s.value)}(t,e):t instanceof Pn?function(r,s){return s instanceof Pn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,c)=>i&&Hw(a,s.filters[c]),!0):!1}(t,e):void ne(19439)}function qw(t){return t instanceof Ke?function(n){return`${n.field.canonicalString()} ${n.op} ${Ni(n.value)}`}(t):t instanceof Pn?function(n){return n.op.toString()+" {"+n.getFilters().map(qw).join(" ,")+"}"}(t):"Filter"}class NI extends Ke{constructor(e,n,r){super(e,n,r),this.key=ee.fromName(r.referenceValue)}matches(e){const n=ee.comparator(e.key,this.key);return this.matchesComparison(n)}}class bI extends Ke{constructor(e,n){super(e,"in",n),this.keys=Ww("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class TI extends Ke{constructor(e,n){super(e,"not-in",n),this.keys=Ww("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Ww(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>ee.fromName(r.referenceValue))}class SI extends Ke{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Xf(n)&&aa(n.arrayValue,this.value)}}class II extends Ke{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&aa(this.value.arrayValue,n)}}class kI extends Ke{constructor(e,n){super(e,"not-in",n)}matches(e){if(aa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!aa(this.value.arrayValue,n)}}class CI extends Ke{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Xf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>aa(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(e,n=null,r=[],s=[],i=null,a=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=c,this.Te=null}}function Ny(t,e=null,n=[],r=[],s=null,i=null,a=null){return new jI(t,e,n,r,s,i,a)}function Jf(t){const e=ie(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Th(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Jc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ni(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ni(r)).join(",")),e.Te=n}return e.Te}function Zf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!_I(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Hw(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ey(t.startAt,e.startAt)&&Ey(t.endAt,e.endAt)}function Sh(t){return ee.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(e,n=null,r=[],s=[],i=null,a="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function AI(t,e,n,r,s,i,a,c){return new eu(t,e,n,r,s,i,a,c)}function em(t){return new eu(t)}function by(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function PI(t){return t.collectionGroup!==null}function Do(t){const e=ie(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new Xe(ot.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new xc(i,r))}),n.has(ot.keyField().canonicalString())||e.Ie.push(new xc(ot.keyField(),r))}return e.Ie}function bn(t){const e=ie(t);return e.Ee||(e.Ee=RI(e,Do(t))),e.Ee}function RI(t,e){if(t.limitType==="F")return Ny(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new xc(s.field,i)});const n=t.endAt?new yc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new yc(t.startAt.position,t.startAt.inclusive):null;return Ny(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Ih(t,e,n){return new eu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function tu(t,e){return Zf(bn(t),bn(e))&&t.limitType===e.limitType}function Gw(t){return`${Jf(bn(t))}|lt:${t.limitType}`}function Os(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>qw(s)).join(", ")}]`),Jc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Ni(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Ni(s)).join(",")),`Target(${r})`}(bn(t))}; limitType=${t.limitType})`}function nu(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ee.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Do(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(a,c,u){const d=_y(a,c,u);return a.inclusive?d<=0:d<0}(r.startAt,Do(r),s)||r.endAt&&!function(a,c,u){const d=_y(a,c,u);return a.inclusive?d>=0:d>0}(r.endAt,Do(r),s))}(t,e)}function DI(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Kw(t){return(e,n)=>{let r=!1;for(const s of Do(t)){const i=MI(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function MI(t,e,n){const r=t.field.isKeyField()?ee.comparator(e.key,n.key):function(i,a,c){const u=a.data.field(i),d=c.data.field(i);return u!==null&&d!==null?Ei(u,d):ne(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ne(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Qr(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return Pw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VI=new Ve(ee.comparator);function Zn(){return VI}const Qw=new Ve(ee.comparator);function wo(...t){let e=Qw;for(const n of t)e=e.insert(n.key,n);return e}function Yw(t){let e=Qw;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ls(){return Mo()}function Xw(){return Mo()}function Mo(){return new ks(t=>t.toString(),(t,e)=>t.isEqual(e))}const LI=new Ve(ee.comparator),OI=new Xe(ee.comparator);function pe(...t){let e=OI;for(const n of t)e=e.add(n);return e}const FI=new Xe(me);function UI(){return FI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mc(e)?"-0":e}}function Jw(t){return{integerValue:""+t}}function BI(t,e){return fI(e)?Jw(e):tm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(){this._=void 0}}function zI(t,e,n){return t instanceof vc?function(s,i){const a={fields:{[Mw]:{stringValue:Dw},[Lw]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Yf(i)&&(i=Zc(i)),i&&(a.fields[Vw]=i),{mapValue:a}}(n,e):t instanceof la?e_(t,e):t instanceof ca?t_(t,e):function(s,i){const a=Zw(s,i),c=Ty(a)+Ty(s.Ae);return bh(a)&&bh(s.Ae)?Jw(c):tm(s.serializer,c)}(t,e)}function $I(t,e,n){return t instanceof la?e_(t,e):t instanceof ca?t_(t,e):n}function Zw(t,e){return t instanceof wc?function(r){return bh(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class vc extends ru{}class la extends ru{constructor(e){super(),this.elements=e}}function e_(t,e){const n=n_(e);for(const r of t.elements)n.some(s=>An(s,r))||n.push(r);return{arrayValue:{values:n}}}class ca extends ru{constructor(e){super(),this.elements=e}}function t_(t,e){let n=n_(e);for(const r of t.elements)n=n.filter(s=>!An(s,r));return{arrayValue:{values:n}}}class wc extends ru{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Ty(t){return Ue(t.integerValue||t.doubleValue)}function n_(t){return Xf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function HI(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof la&&s instanceof la||r instanceof ca&&s instanceof ca?_i(r.elements,s.elements,An):r instanceof wc&&s instanceof wc?An(r.Ae,s.Ae):r instanceof vc&&s instanceof vc}(t.transform,e.transform)}class qI{constructor(e,n){this.version=e,this.transformResults=n}}class en{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new en}static exists(e){return new en(void 0,e)}static updateTime(e){return new en(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Dl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class su{}function r_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new nm(t.key,en.none()):new Ea(t.key,t.data,en.none());{const n=t.data,r=At.empty();let s=new Xe(ot.comparator);for(let i of e.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new Yr(t.key,r,new Ut(s.toArray()),en.none())}}function WI(t,e,n){t instanceof Ea?function(s,i,a){const c=s.value.clone(),u=Iy(s.fieldTransforms,i,a.transformResults);c.setAll(u),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Yr?function(s,i,a){if(!Dl(s.precondition,i))return void i.convertToUnknownDocument(a.version);const c=Iy(s.fieldTransforms,i,a.transformResults),u=i.data;u.setAll(s_(s)),u.setAll(c),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Vo(t,e,n,r){return t instanceof Ea?function(i,a,c,u){if(!Dl(i.precondition,a))return c;const d=i.value.clone(),p=ky(i.fieldTransforms,u,a);return d.setAll(p),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Yr?function(i,a,c,u){if(!Dl(i.precondition,a))return c;const d=ky(i.fieldTransforms,u,a),p=a.data;return p.setAll(s_(i)),p.setAll(d),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,a,c){return Dl(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c}(t,e,n)}function GI(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=Zw(r.transform,s||null);i!=null&&(n===null&&(n=At.empty()),n.set(r.field,i))}return n||null}function Sy(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&_i(r,s,(i,a)=>HI(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ea extends su{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Yr extends su{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function s_(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Iy(t,e,n){const r=new Map;we(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],a=i.transform,c=e.data.field(i.field);r.set(i.field,$I(a,c,n[s]))}return r}function ky(t,e,n){const r=new Map;for(const s of t){const i=s.transform,a=n.data.field(s.field);r.set(s.field,zI(i,a,e))}return r}class nm extends su{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class KI extends su{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&WI(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Vo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Vo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Xw();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let c=this.applyToLocalView(a,i.mutatedFields);c=n.has(s.key)?null:c;const u=r_(a,c);u!==null&&r.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(se.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),pe())}isEqual(e){return this.batchId===e.batchId&&_i(this.mutations,e.mutations,(n,r)=>Sy(n,r))&&_i(this.baseMutations,e.baseMutations,(n,r)=>Sy(n,r))}}class rm{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){we(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return LI}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new rm(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze,ge;function JI(t){switch(t){case B.OK:return ne(64938);case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0;default:return ne(15467,{code:t})}}function i_(t){if(t===void 0)return Jn("GRPC error has no .code"),B.UNKNOWN;switch(t){case ze.OK:return B.OK;case ze.CANCELLED:return B.CANCELLED;case ze.UNKNOWN:return B.UNKNOWN;case ze.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case ze.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case ze.INTERNAL:return B.INTERNAL;case ze.UNAVAILABLE:return B.UNAVAILABLE;case ze.UNAUTHENTICATED:return B.UNAUTHENTICATED;case ze.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case ze.NOT_FOUND:return B.NOT_FOUND;case ze.ALREADY_EXISTS:return B.ALREADY_EXISTS;case ze.PERMISSION_DENIED:return B.PERMISSION_DENIED;case ze.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case ze.ABORTED:return B.ABORTED;case ze.OUT_OF_RANGE:return B.OUT_OF_RANGE;case ze.UNIMPLEMENTED:return B.UNIMPLEMENTED;case ze.DATA_LOSS:return B.DATA_LOSS;default:return ne(39323,{code:t})}}(ge=ze||(ze={}))[ge.OK=0]="OK",ge[ge.CANCELLED=1]="CANCELLED",ge[ge.UNKNOWN=2]="UNKNOWN",ge[ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ge[ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ge[ge.NOT_FOUND=5]="NOT_FOUND",ge[ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",ge[ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",ge[ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",ge[ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ge[ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ge[ge.ABORTED=10]="ABORTED",ge[ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",ge[ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",ge[ge.INTERNAL=13]="INTERNAL",ge[ge.UNAVAILABLE=14]="UNAVAILABLE",ge[ge.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ek=new Pr([4294967295,4294967295],0);function Cy(t){const e=ZI().encode(t),n=new _w;return n.update(e),new Uint8Array(n.digest())}function jy(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Pr([n,r],0),new Pr([s,i],0)]}class sm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new _o(`Invalid padding: ${n}`);if(r<0)throw new _o(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new _o(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new _o(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Pr.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Pr.fromNumber(r)));return s.compare(ek)===1&&(s=new Pr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Cy(e),[r,s]=jy(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);if(!this.we(a))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new sm(i,s,n);return r.forEach(c=>a.insert(c)),a}insert(e){if(this.ge===0)return;const n=Cy(e),[r,s]=jy(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);this.Se(a)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class _o extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Na.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new iu(se.min(),s,new Ve(me),Zn(),pe())}}class Na{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Na(r,n,pe(),pe(),pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class o_{constructor(e,n){this.targetId=e,this.Ce=n}}class a_{constructor(e,n,r=ct.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Ay{constructor(){this.ve=0,this.Fe=Py(),this.Me=ct.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=pe(),n=pe(),r=pe();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ne(38017,{changeType:i})}}),new Na(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=Py()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,we(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class tk{constructor(e){this.Ge=e,this.ze=new Map,this.je=Zn(),this.Je=ml(),this.He=ml(),this.Ye=new Ve(me)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ne(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(Sh(i))if(r===0){const a=new ee(i.path);this.et(n,a,xt.newNoDocument(a,se.min()))}else we(r===1,20013,{expectedCount:r});else{const a=this._t(n);if(a!==r){const c=this.ut(e),u=c?this.ct(c,e,a):1;if(u!==0){this.it(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,c;try{a=Ur(r).toUint8Array()}catch(u){if(u instanceof Rw)return wi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new sm(a,s,i)}catch(u){return wi(u instanceof _o?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.ge===0?null:c}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const a=this.Ge.ht(),c=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,a)=>{const c=this.ot(a);if(c){if(i.current&&Sh(c.target)){const u=new ee(c.target.path);this.It(u).has(a)||this.Et(a,u)||this.et(a,u,xt.newNoDocument(u,e))}i.Be&&(n.set(a,i.ke()),i.qe())}});let r=pe();this.He.forEach((i,a)=>{let c=!0;a.forEachWhile(u=>{const d=this.ot(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(i))}),this.je.forEach((i,a)=>a.setReadTime(e));const s=new iu(e,n,this.Ye,this.je,r);return this.je=Zn(),this.Je=ml(),this.He=ml(),this.Ye=new Ve(me),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Ay,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Xe(me),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Xe(me),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Q("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Ay),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function ml(){return new Ve(ee.comparator)}function Py(){return new Ve(ee.comparator)}const nk={asc:"ASCENDING",desc:"DESCENDING"},rk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},sk={and:"AND",or:"OR"};class ik{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function kh(t,e){return t.useProto3Json||Jc(e)?e:{value:e}}function _c(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function l_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function ok(t,e){return _c(t,e.toTimestamp())}function Tn(t){return we(!!t,49232),se.fromTimestamp(function(n){const r=Fr(n);return new ke(r.seconds,r.nanos)}(t))}function im(t,e){return Ch(t,e).canonicalString()}function Ch(t,e){const n=function(s){return new Ie(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function c_(t){const e=Ie.fromString(t);return we(m_(e),10190,{key:e.toString()}),e}function jh(t,e){return im(t.databaseId,e.path)}function pd(t,e){const n=c_(e);if(n.get(1)!==t.databaseId.projectId)throw new J(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new J(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ee(d_(n))}function u_(t,e){return im(t.databaseId,e)}function ak(t){const e=c_(t);return e.length===4?Ie.emptyPath():d_(e)}function Ah(t){return new Ie(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function d_(t){return we(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Ry(t,e,n){return{name:jh(t,e),fields:n.value.mapValue.fields}}function lk(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ne(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,p){return d.useProto3Json?(we(p===void 0||typeof p=="string",58123),ct.fromBase64String(p||"")):(we(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),ct.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&function(d){const p=d.code===void 0?B.UNKNOWN:i_(d.code);return new J(p,d.message||"")}(a);n=new a_(r,s,i,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=pd(t,r.document.name),i=Tn(r.document.updateTime),a=r.document.createTime?Tn(r.document.createTime):se.min(),c=new At({mapValue:{fields:r.document.fields}}),u=xt.newFoundDocument(s,i,a,c),d=r.targetIds||[],p=r.removedTargetIds||[];n=new Ml(d,p,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=pd(t,r.document),i=r.readTime?Tn(r.readTime):se.min(),a=xt.newNoDocument(s,i),c=r.removedTargetIds||[];n=new Ml([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=pd(t,r.document),i=r.removedTargetIds||[];n=new Ml([],i,s,null)}else{if(!("filter"in e))return ne(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new XI(s,i),c=r.targetId;n=new o_(c,a)}}return n}function ck(t,e){let n;if(e instanceof Ea)n={update:Ry(t,e.key,e.value)};else if(e instanceof nm)n={delete:jh(t,e.key)};else if(e instanceof Yr)n={update:Ry(t,e.key,e.data),updateMask:xk(e.fieldMask)};else{if(!(e instanceof KI))return ne(16599,{Vt:e.type});n={verify:jh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const c=a.transform;if(c instanceof vc)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof la)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof ca)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof wc)return{fieldPath:a.field.canonicalString(),increment:c.Ae};throw ne(20930,{transform:a.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:ok(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ne(27497)}(t,e.precondition)),n}function uk(t,e){return t&&t.length>0?(we(e!==void 0,14353),t.map(n=>function(s,i){let a=s.updateTime?Tn(s.updateTime):Tn(i);return a.isEqual(se.min())&&(a=Tn(i)),new qI(a,s.transformResults||[])}(n,e))):[]}function dk(t,e){return{documents:[u_(t,e.path)]}}function hk(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=u_(t,s);const i=function(d){if(d.length!==0)return f_(Pn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const a=function(d){if(d.length!==0)return d.map(p=>function(m){return{field:Fs(m.field),direction:pk(m.dir)}}(p))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const c=kh(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:s}}function fk(t){let e=ak(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){we(r===1,65062);const p=n.from[0];p.allDescendants?s=p.collectionId:e=e.child(p.collectionId)}let i=[];n.where&&(i=function(f){const m=h_(f);return m instanceof Pn&&$w(m)?m.getFilters():[m]}(n.where));let a=[];n.orderBy&&(a=function(f){return f.map(m=>function(k){return new xc(Us(k.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(m))}(n.orderBy));let c=null;n.limit&&(c=function(f){let m;return m=typeof f=="object"?f.value:f,Jc(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(f){const m=!!f.before,T=f.values||[];return new yc(T,m)}(n.startAt));let d=null;return n.endAt&&(d=function(f){const m=!f.before,T=f.values||[];return new yc(T,m)}(n.endAt)),AI(e,s,a,i,c,"F",u,d)}function mk(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ne(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function h_(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Us(n.unaryFilter.field);return Ke.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Us(n.unaryFilter.field);return Ke.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Us(n.unaryFilter.field);return Ke.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Us(n.unaryFilter.field);return Ke.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ne(61313);default:return ne(60726)}}(t):t.fieldFilter!==void 0?function(n){return Ke.create(Us(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ne(58110);default:return ne(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Pn.create(n.compositeFilter.filters.map(r=>h_(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ne(1026)}}(n.compositeFilter.op))}(t):ne(30097,{filter:t})}function pk(t){return nk[t]}function gk(t){return rk[t]}function yk(t){return sk[t]}function Fs(t){return{fieldPath:t.canonicalString()}}function Us(t){return ot.fromServerFormat(t.fieldPath)}function f_(t){return t instanceof Ke?function(n){if(n.op==="=="){if(wy(n.value))return{unaryFilter:{field:Fs(n.field),op:"IS_NAN"}};if(vy(n.value))return{unaryFilter:{field:Fs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(wy(n.value))return{unaryFilter:{field:Fs(n.field),op:"IS_NOT_NAN"}};if(vy(n.value))return{unaryFilter:{field:Fs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fs(n.field),op:gk(n.op),value:n.value}}}(t):t instanceof Pn?function(n){const r=n.getFilters().map(s=>f_(s));return r.length===1?r[0]:{compositeFilter:{op:yk(n.op),filters:r}}}(t):ne(54877,{filter:t})}function xk(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function m_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e,n,r,s,i=se.min(),a=se.min(),c=ct.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new xr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new xr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new xr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new xr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(e){this.yt=e}}function wk(t){const e=fk({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ih(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(){this.Cn=new Ek}addToCollectionParentIndex(e,n){return this.Cn.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(Or.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(Or.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class Ek{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Xe(Ie.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Xe(Ie.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},p_=41943040;class Ct{static withCacheSize(e){return new Ct(e,Ct.DEFAULT_COLLECTION_PERCENTILE,Ct.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ct.DEFAULT_COLLECTION_PERCENTILE=10,Ct.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ct.DEFAULT=new Ct(p_,Ct.DEFAULT_COLLECTION_PERCENTILE,Ct.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ct.DISABLED=new Ct(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new bi(0)}static cr(){return new bi(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const My="LruGarbageCollector",Nk=1048576;function Vy([t,e],[n,r]){const s=me(t,n);return s===0?me(e,r):s}class bk{constructor(e){this.Ir=e,this.buffer=new Xe(Vy),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Vy(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Tk{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Q(My,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Li(n)?Q(My,"Ignoring IndexedDB error during garbage collection: ",n):await Vi(n)}await this.Vr(3e5)})}}class Sk{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return U.resolve(Xc.ce);const r=new bk(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Q("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(Dy)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Q("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Dy):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,a,c,u,d;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(Q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,a=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(r=f,c=Date.now(),this.removeTargets(e,r,n))).next(f=>(i=f,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(d=Date.now(),Ls()<=fe.DEBUG&&Q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-p}ms
	Determined least recently used ${s} in `+(c-a)+`ms
	Removed ${i} targets in `+(u-c)+`ms
	Removed ${f} documents in `+(d-u)+`ms
Total Duration: ${d-p}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f})))}}function Ik(t,e){return new Sk(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{constructor(){this.changes=new ks(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,xt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Vo(r.mutation,s,Ut.empty(),ke.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,pe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=pe()){const s=ls();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let a=wo();return i.forEach((c,u)=>{a=a.insert(c,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=ls();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,pe()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,c)=>{n.set(a,c)})})}computeViews(e,n,r,s){let i=Zn();const a=Mo(),c=function(){return Mo()}();return n.forEach((u,d)=>{const p=r.get(d.key);s.has(d.key)&&(p===void 0||p.mutation instanceof Yr)?i=i.insert(d.key,d):p!==void 0?(a.set(d.key,p.mutation.getFieldMask()),Vo(p.mutation,d,p.mutation.getFieldMask(),ke.now())):a.set(d.key,Ut.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,p)=>a.set(d,p)),n.forEach((d,p)=>c.set(d,new Ck(p,a.get(d)??null))),c))}recalculateAndSaveOverlays(e,n){const r=Mo();let s=new Ve((a,c)=>a-c),i=pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const c of a)c.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let p=r.get(u)||Ut.empty();p=c.applyToLocalView(d,p),r.set(u,p);const f=(s.get(c.batchId)||pe()).add(u);s=s.insert(c.batchId,f)})}).next(()=>{const a=[],c=s.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,p=u.value,f=Xw();p.forEach(m=>{if(!i.has(m)){const T=r_(n.get(m),r.get(m));T!==null&&f.set(m,T),i=i.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,f))}return U.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(a){return ee.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):PI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):U.resolve(ls());let c=sa,u=i;return a.next(d=>U.forEach(d,(p,f)=>(c<f.largestBatchId&&(c=f.largestBatchId),i.get(p)?U.resolve():this.remoteDocumentCache.getEntry(e,p).next(m=>{u=u.insert(p,m)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,pe())).next(p=>({batchId:c,changes:Yw(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ee(n)).next(r=>{let s=wo();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let a=wo();return this.indexManager.getCollectionParents(e,i).next(c=>U.forEach(c,u=>{const d=function(f,m){return new eu(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(p=>{p.forEach((f,m)=>{a=a.insert(f,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(a=>{i.forEach((u,d)=>{const p=d.getKey();a.get(p)===null&&(a=a.insert(p,xt.newInvalidDocument(p)))});let c=wo();return a.forEach((u,d)=>{const p=i.get(u);p!==void 0&&Vo(p.mutation,d,Ut.empty(),ke.now()),nu(n,d)&&(c=c.insert(u,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return U.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Tn(s.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:wk(s.bundledQuery),readTime:Tn(s.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(){this.overlays=new Ve(ee.comparator),this.qr=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ls();return U.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const s=ls(),i=n.length+1,a=new ee(n.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return U.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ve((d,p)=>d-p);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let p=i.get(d.largestBatchId);p===null&&(p=ls(),i=i.insert(d.largestBatchId,p)),p.set(d.getKey(),d)}}const c=ls(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,p)=>c.set(d,p)),!(c.size()>=s)););return U.resolve(c)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new YI(n,r));let i=this.qr.get(n);i===void 0&&(i=pe(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(){this.sessionToken=ct.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(){this.Qr=new Xe(Ze.$r),this.Ur=new Xe(Ze.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Ze(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Ze(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new ee(new Ie([])),r=new Ze(n,e),s=new Ze(n,e+1),i=[];return this.Ur.forEachInRange([r,s],a=>{this.Gr(a),i.push(a.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ee(new Ie([])),r=new Ze(n,e),s=new Ze(n,e+1);let i=pe();return this.Ur.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(e){const n=new Ze(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ze{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ee.comparator(e.key,n.key)||me(e.Yr,n.Yr)}static Kr(e,n){return me(e.Yr,n.Yr)||ee.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Xe(Ze.$r)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new QI(i,n,r,s);this.mutationQueue.push(a);for(const c of s)this.Zr=this.Zr.add(new Ze(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return U.resolve(a)}lookupMutationBatch(e,n){return U.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return U.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?Qf:this.tr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ze(n,0),s=new Ze(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],a=>{const c=this.Xr(a.Yr);i.push(c)}),U.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Xe(me);return n.forEach(s=>{const i=new Ze(s,0),a=new Ze(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,a],c=>{r=r.add(c.Yr)})}),U.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ee.isDocumentKey(i)||(i=i.child(""));const a=new Ze(new ee(i),0);let c=new Xe(me);return this.Zr.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(c=c.add(u.Yr)),!0)},a),U.resolve(this.ti(c))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){we(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return U.forEach(n.mutations,s=>{const i=new Ze(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Ze(n,0),s=this.Zr.firstAfterOrEqual(r);return U.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(e){this.ri=e,this.docs=function(){return new Ve(ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():xt.newInvalidDocument(n))}getEntries(e,n){let r=Zn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():xt.newInvalidDocument(s))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Zn();const a=n.path,c=new ee(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:p}}=u.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||cI(lI(p),r)<=0||(s.has(p.key)||nu(n,p))&&(i=i.insert(p.key,p.mutableCopy()))}return U.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ne(9500)}ii(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Vk(this)}getSize(e){return U.resolve(this.size)}}class Vk extends kk{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(e){this.persistence=e,this.si=new ks(n=>Jf(n),Zf),this.lastRemoteSnapshotVersion=se.min(),this.highestTargetId=0,this.oi=0,this._i=new om,this.targetCount=0,this.ai=bi.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),U.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new bi(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Pr(n),U.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((a,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.si.delete(a),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),U.waitFor(i).next(()=>s)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),U.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_{constructor(e,n){this.ui={},this.overlays={},this.ci=new Xc(0),this.li=!1,this.li=!0,this.hi=new Rk,this.referenceDelegate=e(this),this.Pi=new Lk(this),this.indexManager=new _k,this.remoteDocumentCache=function(s){return new Mk(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new vk(n),this.Ii=new Ak(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Pk,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new Dk(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){Q("MemoryPersistence","Starting transaction:",e);const s=new Ok(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return U.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class Ok extends dI{constructor(e){super(),this.currentSequenceNumber=e}}class am{constructor(e){this.persistence=e,this.Ri=new om,this.Vi=null}static mi(e){return new am(e)}get fi(){if(this.Vi)return this.Vi;throw ne(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),U.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.fi,r=>{const s=ee.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,se.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return U.or([()=>U.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Ec{constructor(e,n){this.persistence=e,this.pi=new ks(r=>mI(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=Ik(this,n)}static mi(e,n){return new Ec(e,n)}Ei(){}di(e){return U.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return U.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?U.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,a=>this.br(e,a,n).next(c=>{c||(r++,i.removeEntry(a,se.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),U.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),U.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),U.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),U.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Pl(e.data.value)),n}br(e,n,r){return U.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return U.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=pe(),s=pe();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new lm(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return PS()?8:hI(wt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new Fk;return this.Ss(e,n,a).next(c=>{if(i.result=c,this.Vs)return this.bs(e,n,a,c.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(Ls()<=fe.DEBUG&&Q("QueryEngine","SDK will not create cache indexes for query:",Os(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),U.resolve()):(Ls()<=fe.DEBUG&&Q("QueryEngine","Query:",Os(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(Ls()<=fe.DEBUG&&Q("QueryEngine","The SDK decides to create cache indexes for query:",Os(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,bn(n))):U.resolve())}ys(e,n){if(by(n))return U.resolve(null);let r=bn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Ih(n,null,"F"),r=bn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const a=pe(...i);return this.ps.getDocuments(e,a).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.Ds(n,c);return this.Cs(n,d,a,u.readTime)?this.ys(e,Ih(n,null,"F")):this.vs(e,d,n,u)}))})))}ws(e,n,r,s){return by(n)||s.isEqual(se.min())?U.resolve(null):this.ps.getDocuments(e,r).next(i=>{const a=this.Ds(n,i);return this.Cs(n,a,r,s)?U.resolve(null):(Ls()<=fe.DEBUG&&Q("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Os(n)),this.vs(e,a,n,aI(s,sa)).next(c=>c))})}Ds(e,n){let r=new Xe(Kw(e));return n.forEach((s,i)=>{nu(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return Ls()<=fe.DEBUG&&Q("QueryEngine","Using full collection scan to execute query:",Os(n)),this.ps.getDocumentsMatchingQuery(e,n,Or.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cm="LocalStore",Bk=3e8;class zk{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Ve(me),this.xs=new ks(i=>Jf(i),Zf),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new jk(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function $k(t,e,n,r){return new zk(t,e,n,r)}async function y_(t,e){const n=ie(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],c=[];let u=pe();for(const d of s){a.push(d.batchId);for(const p of d.mutations)u=u.add(p.key)}for(const d of i){c.push(d.batchId);for(const p of d.mutations)u=u.add(p.key)}return n.localDocuments.getDocuments(r,u).next(d=>({Ls:d,removedBatchIds:a,addedBatchIds:c}))})})}function Hk(t,e){const n=ie(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(c,u,d,p){const f=d.batch,m=f.keys();let T=U.resolve();return m.forEach(k=>{T=T.next(()=>p.getEntry(u,k)).next(j=>{const P=d.docVersions.get(k);we(P!==null,48541),j.version.compareTo(P)<0&&(f.applyToRemoteDocument(j,d),j.isValidDocument()&&(j.setReadTime(d.commitVersion),p.addEntry(j)))})}),T.next(()=>c.mutationQueue.removeMutationBatch(u,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=pe();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function x_(t){const e=ie(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function qk(t,e){const n=ie(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const c=[];e.targetChanges.forEach((p,f)=>{const m=s.get(f);if(!m)return;c.push(n.Pi.removeMatchingKeys(i,p.removedDocuments,f).next(()=>n.Pi.addMatchingKeys(i,p.addedDocuments,f)));let T=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?T=T.withResumeToken(ct.EMPTY_BYTE_STRING,se.min()).withLastLimboFreeSnapshotVersion(se.min()):p.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(p.resumeToken,r)),s=s.insert(f,T),function(j,P,b){return j.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=Bk?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(m,T,p)&&c.push(n.Pi.updateTargetData(i,T))});let u=Zn(),d=pe();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(i,p))}),c.push(Wk(i,a,e.documentUpdates).next(p=>{u=p.ks,d=p.qs})),!r.isEqual(se.min())){const p=n.Pi.getLastRemoteSnapshotVersion(i).next(f=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));c.push(p)}return U.waitFor(c).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.Ms=s,i))}function Wk(t,e,n){let r=pe(),s=pe();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let a=Zn();return n.forEach((c,u)=>{const d=i.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(c)),u.isNoDocument()&&u.version.isEqual(se.min())?(e.removeEntry(c,u.readTime),a=a.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),a=a.insert(c,u)):Q(cm,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{ks:a,qs:s}})}function Gk(t,e){const n=ie(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Qf),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Kk(t,e){const n=ie(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,U.resolve(s)):n.Pi.allocateTargetId(r).next(a=>(s=new xr(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function Ph(t,e,n){const r=ie(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!Li(a))throw a;Q(cm,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function Ly(t,e,n){const r=ie(t);let s=se.min(),i=pe();return r.persistence.runTransaction("Execute query","readwrite",a=>function(u,d,p){const f=ie(u),m=f.xs.get(p);return m!==void 0?U.resolve(f.Ms.get(m)):f.Pi.getTargetData(d,p)}(r,a,bn(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,c.targetId).next(u=>{i=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(a,e,n?s:se.min(),n?i:pe())).next(c=>(Qk(r,DI(e),c),{documents:c,Qs:i})))}function Qk(t,e,n){let r=t.Os.get(e)||se.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class Oy{constructor(){this.activeTargetIds=UI()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Yk{constructor(){this.Mo=new Oy,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Oy,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fy="ConnectivityMonitor";class Uy{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Q(Fy,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Q(Fy,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pl=null;function Rh(){return pl===null?pl=function(){return 268435456+Math.round(2147483648*Math.random())}():pl++,"0x"+pl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gd="RestConnection",Jk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Zk{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===pc?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const a=Rh(),c=this.zo(e,n.toUriEncodedString());Q(gd,`Sending RPC '${e}' ${a}:`,c,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,s,i);const{host:d}=new URL(c),p=Ri(d);return this.Jo(e,c,u,r,p).then(f=>(Q(gd,`Received RPC '${e}' ${a}: `,f),f),f=>{throw wi(gd,`RPC '${e}' ${a} failed with error: `,f,"url: ",c,"request:",r),f})}Ho(e,n,r,s,i,a){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Mi}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=Jk[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pt="WebChannelConnection";class tC extends Zk{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const a=Rh();return new Promise((c,u)=>{const d=new Ew;d.setWithCredentials(!0),d.listenOnce(Nw.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Al.NO_ERROR:const f=d.getResponseJson();Q(pt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(f)),c(f);break;case Al.TIMEOUT:Q(pt,`RPC '${e}' ${a} timed out`),u(new J(B.DEADLINE_EXCEEDED,"Request time out"));break;case Al.HTTP_ERROR:const m=d.getStatus();if(Q(pt,`RPC '${e}' ${a} failed with status:`,m,"response text:",d.getResponseText()),m>0){let T=d.getResponseJson();Array.isArray(T)&&(T=T[0]);const k=T==null?void 0:T.error;if(k&&k.status&&k.message){const j=function(b){const y=b.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(y)>=0?y:B.UNKNOWN}(k.status);u(new J(j,k.message))}else u(new J(B.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new J(B.UNAVAILABLE,"Connection failed."));break;default:ne(9055,{l_:e,streamId:a,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{Q(pt,`RPC '${e}' ${a} completed.`)}});const p=JSON.stringify(s);Q(pt,`RPC '${e}' ${a} sending request:`,s),d.send(n,"POST",p,r,15)})}T_(e,n,r){const s=Rh(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Sw(),c=Tw(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const p=i.join("");Q(pt,`Creating RPC '${e}' stream ${s}: ${p}`,u);const f=a.createWebChannel(p,u);this.I_(f);let m=!1,T=!1;const k=new eC({Yo:P=>{T?Q(pt,`Not sending because RPC '${e}' stream ${s} is closed:`,P):(m||(Q(pt,`Opening RPC '${e}' stream ${s} transport.`),f.open(),m=!0),Q(pt,`RPC '${e}' stream ${s} sending:`,P),f.send(P))},Zo:()=>f.close()}),j=(P,b,y)=>{P.listen(b,w=>{try{y(w)}catch(A){setTimeout(()=>{throw A},0)}})};return j(f,vo.EventType.OPEN,()=>{T||(Q(pt,`RPC '${e}' stream ${s} transport opened.`),k.o_())}),j(f,vo.EventType.CLOSE,()=>{T||(T=!0,Q(pt,`RPC '${e}' stream ${s} transport closed`),k.a_(),this.E_(f))}),j(f,vo.EventType.ERROR,P=>{T||(T=!0,wi(pt,`RPC '${e}' stream ${s} transport errored. Name:`,P.name,"Message:",P.message),k.a_(new J(B.UNAVAILABLE,"The operation could not be completed")))}),j(f,vo.EventType.MESSAGE,P=>{var b;if(!T){const y=P.data[0];we(!!y,16349);const w=y,A=(w==null?void 0:w.error)||((b=w[0])==null?void 0:b.error);if(A){Q(pt,`RPC '${e}' stream ${s} received error:`,A);const D=A.status;let V=function(E){const I=ze[E];if(I!==void 0)return i_(I)}(D),N=A.message;V===void 0&&(V=B.INTERNAL,N="Unknown error status: "+D+" with message "+A.message),T=!0,k.a_(new J(V,N)),f.close()}else Q(pt,`RPC '${e}' stream ${s} received:`,y),k.u_(y)}}),j(c,bw.STAT_EVENT,P=>{P.stat===_h.PROXY?Q(pt,`RPC '${e}' stream ${s} detected buffering proxy`):P.stat===_h.NOPROXY&&Q(pt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{k.__()},0),k}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function yd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ou(t){return new ik(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&Q("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const By="PersistentStream";class w_{constructor(e,n,r,s,i,a,c,u){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new v_(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===B.RESOURCE_EXHAUSTED?(Jn(n.toString()),Jn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new J(B.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Q(By,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(Q(By,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class nC extends w_{constructor(e,n,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=lk(this.serializer,e),r=function(i){if(!("targetChange"in i))return se.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?se.min():a.readTime?Tn(a.readTime):se.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Ah(this.serializer),n.addTarget=function(i,a){let c;const u=a.target;if(c=Sh(u)?{documents:dk(i,u)}:{query:hk(i,u).ft},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=l_(i,a.resumeToken);const d=kh(i,a.expectedCount);d!==null&&(c.expectedCount=d)}else if(a.snapshotVersion.compareTo(se.min())>0){c.readTime=_c(i,a.snapshotVersion.toTimestamp());const d=kh(i,a.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const r=mk(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Ah(this.serializer),n.removeTarget=e,this.q_(n)}}class rC extends w_{constructor(e,n,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return we(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,we(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){we(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=uk(e.writeResults,e.commitTime),r=Tn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Ah(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>ck(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{}class iC extends sC{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new J(B.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Go(e,Ch(n,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new J(B.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Ho(e,Ch(n,r),s,a,c,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new J(B.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class oC{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Jn(n),this.aa=!1):Q("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ns="RemoteStore";class aC{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(a=>{r.enqueueAndForget(async()=>{Cs(this)&&(Q(Ns,"Restarting streams for network reachability change."),await async function(u){const d=ie(u);d.Ea.add(4),await ba(d),d.Ra.set("Unknown"),d.Ea.delete(4),await au(d)}(this))})}),this.Ra=new oC(r,s)}}async function au(t){if(Cs(t))for(const e of t.da)await e(!0)}async function ba(t){for(const e of t.da)await e(!1)}function __(t,e){const n=ie(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),fm(n)?hm(n):Oi(n).O_()&&dm(n,e))}function um(t,e){const n=ie(t),r=Oi(n);n.Ia.delete(e),r.O_()&&E_(n,e),n.Ia.size===0&&(r.O_()?r.L_():Cs(n)&&n.Ra.set("Unknown"))}function dm(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(se.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Oi(t).Y_(e)}function E_(t,e){t.Va.Ue(e),Oi(t).Z_(e)}function hm(t){t.Va=new tk({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Oi(t).start(),t.Ra.ua()}function fm(t){return Cs(t)&&!Oi(t).x_()&&t.Ia.size>0}function Cs(t){return ie(t).Ea.size===0}function N_(t){t.Va=void 0}async function lC(t){t.Ra.set("Online")}async function cC(t){t.Ia.forEach((e,n)=>{dm(t,e)})}async function uC(t,e){N_(t),fm(t)?(t.Ra.ha(e),hm(t)):t.Ra.set("Unknown")}async function dC(t,e,n){if(t.Ra.set("Online"),e instanceof a_&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const c of i.targetIds)s.Ia.has(c)&&(await s.remoteSyncer.rejectListen(c,a),s.Ia.delete(c),s.Va.removeTarget(c))}(t,e)}catch(r){Q(Ns,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Nc(t,r)}else if(e instanceof Ml?t.Va.Ze(e):e instanceof o_?t.Va.st(e):t.Va.tt(e),!n.isEqual(se.min()))try{const r=await x_(t.localStore);n.compareTo(r)>=0&&await function(i,a){const c=i.Va.Tt(a);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const p=i.Ia.get(d);p&&i.Ia.set(d,p.withResumeToken(u.resumeToken,a))}}),c.targetMismatches.forEach((u,d)=>{const p=i.Ia.get(u);if(!p)return;i.Ia.set(u,p.withResumeToken(ct.EMPTY_BYTE_STRING,p.snapshotVersion)),E_(i,u);const f=new xr(p.target,u,d,p.sequenceNumber);dm(i,f)}),i.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){Q(Ns,"Failed to raise snapshot:",r),await Nc(t,r)}}async function Nc(t,e,n){if(!Li(e))throw e;t.Ea.add(1),await ba(t),t.Ra.set("Offline"),n||(n=()=>x_(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Q(Ns,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await au(t)})}function b_(t,e){return e().catch(n=>Nc(t,n,e))}async function lu(t){const e=ie(t),n=zr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Qf;for(;hC(e);)try{const s=await Gk(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,fC(e,s)}catch(s){await Nc(e,s)}T_(e)&&S_(e)}function hC(t){return Cs(t)&&t.Ta.length<10}function fC(t,e){t.Ta.push(e);const n=zr(t);n.O_()&&n.X_&&n.ea(e.mutations)}function T_(t){return Cs(t)&&!zr(t).x_()&&t.Ta.length>0}function S_(t){zr(t).start()}async function mC(t){zr(t).ra()}async function pC(t){const e=zr(t);for(const n of t.Ta)e.ea(n.mutations)}async function gC(t,e,n){const r=t.Ta.shift(),s=rm.from(r,e,n);await b_(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await lu(t)}async function yC(t,e){e&&zr(t).X_&&await async function(r,s){if(function(a){return JI(a)&&a!==B.ABORTED}(s.code)){const i=r.Ta.shift();zr(r).B_(),await b_(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await lu(r)}}(t,e),T_(t)&&S_(t)}async function zy(t,e){const n=ie(t);n.asyncQueue.verifyOperationInProgress(),Q(Ns,"RemoteStore received new credentials");const r=Cs(n);n.Ea.add(3),await ba(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await au(n)}async function xC(t,e){const n=ie(t);e?(n.Ea.delete(2),await au(n)):e||(n.Ea.add(2),await ba(n),n.Ra.set("Unknown"))}function Oi(t){return t.ma||(t.ma=function(n,r,s){const i=ie(n);return i.sa(),new nC(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:lC.bind(null,t),t_:cC.bind(null,t),r_:uC.bind(null,t),H_:dC.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),fm(t)?hm(t):t.Ra.set("Unknown")):(await t.ma.stop(),N_(t))})),t.ma}function zr(t){return t.fa||(t.fa=function(n,r,s){const i=ie(n);return i.sa(),new rC(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:mC.bind(null,t),r_:yC.bind(null,t),ta:pC.bind(null,t),na:gC.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await lu(t)):(await t.fa.stop(),t.Ta.length>0&&(Q(Ns,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Rr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const a=Date.now()+r,c=new mm(e,n,a,s,i);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new J(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function pm(t,e){if(Jn("AsyncQueue",`${e}: ${t}`),Li(t))return new J(B.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{static emptySet(e){return new li(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ee.comparator(n.key,r.key):(n,r)=>ee.comparator(n.key,r.key),this.keyedMap=wo(),this.sortedSet=new Ve(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof li)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new li;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y{constructor(){this.ga=new Ve(ee.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ne(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ti{constructor(e,n,r,s,i,a,c,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const a=[];return n.forEach(c=>{a.push({type:0,doc:c})}),new Ti(e,n,li.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&tu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class wC{constructor(){this.queries=Hy(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=ie(n),i=s.queries;s.queries=Hy(),i.forEach((a,c)=>{for(const u of c.Sa)u.onError(r)})})(this,new J(B.ABORTED,"Firestore shutting down"))}}function Hy(){return new ks(t=>Gw(t),tu)}async function I_(t,e){const n=ie(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new vC,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const c=pm(a,`Initialization of query '${Os(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&gm(n)}async function k_(t,e){const n=ie(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const a=i.Sa.indexOf(e);a>=0&&(i.Sa.splice(a,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function _C(t,e){const n=ie(t);let r=!1;for(const s of e){const i=s.query,a=n.queries.get(i);if(a){for(const c of a.Sa)c.Fa(s)&&(r=!0);a.wa=s}}r&&gm(n)}function EC(t,e,n){const r=ie(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function gm(t){t.Ca.forEach(e=>{e.next()})}var Dh,qy;(qy=Dh||(Dh={})).Ma="default",qy.Cache="cache";class C_{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ti(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ti.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Dh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_{constructor(e){this.key=e}}class A_{constructor(e){this.key=e}}class NC{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=pe(),this.mutatedKeys=pe(),this.eu=Kw(e),this.tu=new li(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new $y,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,c=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((p,f)=>{const m=s.get(p),T=nu(this.query,f)?f:null,k=!!m&&this.mutatedKeys.has(m.key),j=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let P=!1;m&&T?m.data.isEqual(T.data)?k!==j&&(r.track({type:3,doc:T}),P=!0):this.su(m,T)||(r.track({type:2,doc:T}),P=!0,(u&&this.eu(T,u)>0||d&&this.eu(T,d)<0)&&(c=!0)):!m&&T?(r.track({type:0,doc:T}),P=!0):m&&!T&&(r.track({type:1,doc:m}),P=!0,(u||d)&&(c=!0)),P&&(T?(a=a.add(T),i=j?i.add(p):i.delete(p)):(a=a.delete(p),i=i.delete(p)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const p=this.query.limitType==="F"?a.last():a.first();a=a.delete(p.key),i=i.delete(p.key),r.track({type:1,doc:p})}return{tu:a,iu:r,Cs:c,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((p,f)=>function(T,k){const j=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ne(20277,{Rt:P})}};return j(T)-j(k)}(p.type,f.type)||this.eu(p.doc,f.doc)),this.ou(r),s=s??!1;const c=n&&!s?this._u():[],u=this.Xa.size===0&&this.current&&!s?1:0,d=u!==this.Za;return this.Za=u,a.length!==0||d?{snapshot:new Ti(this.query,e.tu,i,a,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new $y,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=pe(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new A_(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new j_(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=pe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ti.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ym="SyncEngine";class bC{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class TC{constructor(e){this.key=e,this.hu=!1}}class SC{constructor(e,n,r,s,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new ks(c=>Gw(c),tu),this.Iu=new Map,this.Eu=new Set,this.du=new Ve(ee.comparator),this.Au=new Map,this.Ru=new om,this.Vu={},this.mu=new Map,this.fu=bi.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function IC(t,e,n=!0){const r=L_(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await P_(r,e,n,!0),s}async function kC(t,e){const n=L_(t);await P_(n,e,!0,!1)}async function P_(t,e,n,r){const s=await Kk(t.localStore,bn(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,n);let c;return r&&(c=await CC(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&__(t.remoteStore,s),c}async function CC(t,e,n,r,s){t.pu=(f,m,T)=>async function(j,P,b,y){let w=P.view.ru(b);w.Cs&&(w=await Ly(j.localStore,P.query,!1).then(({documents:N})=>P.view.ru(N,w)));const A=y&&y.targetChanges.get(P.targetId),D=y&&y.targetMismatches.get(P.targetId)!=null,V=P.view.applyChanges(w,j.isPrimaryClient,A,D);return Gy(j,P.targetId,V.au),V.snapshot}(t,f,m,T);const i=await Ly(t.localStore,e,!0),a=new NC(e,i.Qs),c=a.ru(i.documents),u=Na.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=a.applyChanges(c,t.isPrimaryClient,u);Gy(t,n,d.au);const p=new bC(e,n,a);return t.Tu.set(e,p),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function jC(t,e,n){const r=ie(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(a=>!tu(a,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Ph(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&um(r.remoteStore,s.targetId),Mh(r,s.targetId)}).catch(Vi)):(Mh(r,s.targetId),await Ph(r.localStore,s.targetId,!0))}async function AC(t,e){const n=ie(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),um(n.remoteStore,r.targetId))}async function PC(t,e,n){const r=FC(t);try{const s=await function(a,c){const u=ie(a),d=ke.now(),p=c.reduce((T,k)=>T.add(k.key),pe());let f,m;return u.persistence.runTransaction("Locally write mutations","readwrite",T=>{let k=Zn(),j=pe();return u.Ns.getEntries(T,p).next(P=>{k=P,k.forEach((b,y)=>{y.isValidDocument()||(j=j.add(b))})}).next(()=>u.localDocuments.getOverlayedDocuments(T,k)).next(P=>{f=P;const b=[];for(const y of c){const w=GI(y,f.get(y.key).overlayedDocument);w!=null&&b.push(new Yr(y.key,w,Uw(w.value.mapValue),en.exists(!0)))}return u.mutationQueue.addMutationBatch(T,d,b,c)}).next(P=>{m=P;const b=P.applyToLocalDocumentSet(f,j);return u.documentOverlayCache.saveOverlays(T,P.batchId,b)})}).then(()=>({batchId:m.batchId,changes:Yw(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(a,c,u){let d=a.Vu[a.currentUser.toKey()];d||(d=new Ve(me)),d=d.insert(c,u),a.Vu[a.currentUser.toKey()]=d}(r,s.batchId,n),await Ta(r,s.changes),await lu(r.remoteStore)}catch(s){const i=pm(s,"Failed to persist write");n.reject(i)}}async function R_(t,e){const n=ie(t);try{const r=await qk(n.localStore,e);e.targetChanges.forEach((s,i)=>{const a=n.Au.get(i);a&&(we(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?we(a.hu,14607):s.removedDocuments.size>0&&(we(a.hu,42227),a.hu=!1))}),await Ta(n,r,e)}catch(r){await Vi(r)}}function Wy(t,e,n){const r=ie(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,a)=>{const c=a.view.va(e);c.snapshot&&s.push(c.snapshot)}),function(a,c){const u=ie(a);u.onlineState=c;let d=!1;u.queries.forEach((p,f)=>{for(const m of f.Sa)m.va(c)&&(d=!0)}),d&&gm(u)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function RC(t,e,n){const r=ie(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let a=new Ve(ee.comparator);a=a.insert(i,xt.newNoDocument(i,se.min()));const c=pe().add(i),u=new iu(se.min(),new Map,new Ve(me),a,c);await R_(r,u),r.du=r.du.remove(i),r.Au.delete(e),xm(r)}else await Ph(r.localStore,e,!1).then(()=>Mh(r,e,n)).catch(Vi)}async function DC(t,e){const n=ie(t),r=e.batch.batchId;try{const s=await Hk(n.localStore,e);M_(n,r,null),D_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ta(n,s)}catch(s){await Vi(s)}}async function MC(t,e,n){const r=ie(t);try{const s=await function(a,c){const u=ie(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let p;return u.mutationQueue.lookupMutationBatch(d,c).next(f=>(we(f!==null,37113),p=f.keys(),u.mutationQueue.removeMutationBatch(d,f))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,p,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,p)).next(()=>u.localDocuments.getDocuments(d,p))})}(r.localStore,e);M_(r,e,n),D_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ta(r,s)}catch(s){await Vi(s)}}function D_(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function M_(t,e,n){const r=ie(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function Mh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||V_(t,r)})}function V_(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(um(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),xm(t))}function Gy(t,e,n){for(const r of n)r instanceof j_?(t.Ru.addReference(r.key,e),VC(t,r)):r instanceof A_?(Q(ym,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||V_(t,r.key)):ne(19791,{wu:r})}function VC(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(Q(ym,"New document in limbo: "+n),t.Eu.add(r),xm(t))}function xm(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ee(Ie.fromString(e)),r=t.fu.next();t.Au.set(r,new TC(n)),t.du=t.du.insert(n,r),__(t.remoteStore,new xr(bn(em(n.path)),r,"TargetPurposeLimboResolution",Xc.ce))}}async function Ta(t,e,n){const r=ie(t),s=[],i=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((c,u)=>{a.push(r.pu(u,e,n).then(d=>{var p;if((d||n)&&r.isPrimaryClient){const f=d?!d.fromCache:(p=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:p.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(d){s.push(d);const f=lm.As(u.targetId,d);i.push(f)}}))}),await Promise.all(a),r.Pu.H_(s),await async function(u,d){const p=ie(u);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>U.forEach(d,m=>U.forEach(m.Es,T=>p.persistence.referenceDelegate.addReference(f,m.targetId,T)).next(()=>U.forEach(m.ds,T=>p.persistence.referenceDelegate.removeReference(f,m.targetId,T)))))}catch(f){if(!Li(f))throw f;Q(cm,"Failed to update sequence numbers: "+f)}for(const f of d){const m=f.targetId;if(!f.fromCache){const T=p.Ms.get(m),k=T.snapshotVersion,j=T.withLastLimboFreeSnapshotVersion(k);p.Ms=p.Ms.insert(m,j)}}}(r.localStore,i))}async function LC(t,e){const n=ie(t);if(!n.currentUser.isEqual(e)){Q(ym,"User change. New user:",e.toKey());const r=await y_(n.localStore,e);n.currentUser=e,function(i,a){i.mu.forEach(c=>{c.forEach(u=>{u.reject(new J(B.CANCELLED,a))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ta(n,r.Ls)}}function OC(t,e){const n=ie(t),r=n.Au.get(e);if(r&&r.hu)return pe().add(r.key);{let s=pe();const i=n.Iu.get(e);if(!i)return s;for(const a of i){const c=n.Tu.get(a);s=s.unionWith(c.view.nu)}return s}}function L_(t){const e=ie(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=R_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=OC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=RC.bind(null,e),e.Pu.H_=_C.bind(null,e.eventManager),e.Pu.yu=EC.bind(null,e.eventManager),e}function FC(t){const e=ie(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=DC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=MC.bind(null,e),e}class bc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ou(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return $k(this.persistence,new Uk,e.initialUser,this.serializer)}Cu(e){return new g_(am.mi,this.serializer)}Du(e){return new Yk}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}bc.provider={build:()=>new bc};class UC extends bc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){we(this.persistence.referenceDelegate instanceof Ec,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Tk(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Ct.withCacheSize(this.cacheSizeBytes):Ct.DEFAULT;return new g_(r=>Ec.mi(r,n),this.serializer)}}class Vh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Wy(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=LC.bind(null,this.syncEngine),await xC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new wC}()}createDatastore(e){const n=ou(e.databaseInfo.databaseId),r=function(i){return new tC(i)}(e.databaseInfo);return function(i,a,c,u){return new iC(i,a,c,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,a,c){return new aC(r,s,i,a,c)}(this.localStore,this.datastore,e.asyncQueue,n=>Wy(this.syncEngine,n,0),function(){return Uy.v()?new Uy:new Xk}())}createSyncEngine(e,n){return function(s,i,a,c,u,d,p){const f=new SC(s,i,a,c,u,d);return p&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ie(s);Q(Ns,"RemoteStore shutting down."),i.Ea.add(5),await ba(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Vh.provider={build:()=>new Vh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Jn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $r="FirestoreClient";class BC{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=gt.UNAUTHENTICATED,this.clientId=Gf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async a=>{Q($r,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(Q($r,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Rr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=pm(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function xd(t,e){t.asyncQueue.verifyOperationInProgress(),Q($r,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await y_(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Ky(t,e){t.asyncQueue.verifyOperationInProgress();const n=await zC(t);Q($r,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>zy(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>zy(e.remoteStore,s)),t._onlineComponents=e}async function zC(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Q($r,"Using user provided OfflineComponentProvider");try{await xd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===B.FAILED_PRECONDITION||s.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;wi("Error using user provided cache. Falling back to memory cache: "+n),await xd(t,new bc)}}else Q($r,"Using default OfflineComponentProvider"),await xd(t,new UC(void 0));return t._offlineComponents}async function F_(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Q($r,"Using user provided OnlineComponentProvider"),await Ky(t,t._uninitializedComponentsProvider._online)):(Q($r,"Using default OnlineComponentProvider"),await Ky(t,new Vh))),t._onlineComponents}function $C(t){return F_(t).then(e=>e.syncEngine)}async function Lh(t){const e=await F_(t),n=e.eventManager;return n.onListen=IC.bind(null,e.syncEngine),n.onUnlisten=jC.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=kC.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=AC.bind(null,e.syncEngine),n}function HC(t,e,n={}){const r=new Rr;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,c,u,d){const p=new O_({next:m=>{p.Nu(),a.enqueueAndForget(()=>k_(i,f)),m.fromCache&&u.source==="server"?d.reject(new J(B.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(m)},error:m=>d.reject(m)}),f=new C_(c,p,{includeMetadataChanges:!0,qa:!0});return I_(i,f)}(await Lh(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U_(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qy=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B_="firestore.googleapis.com",Yy=!0;class Xy{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new J(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=B_,this.ssl=Yy}else this.host=e.host,this.ssl=e.ssl??Yy;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=p_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Nk)throw new J(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}oI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=U_(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new J(B.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new J(B.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new J(B.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class cu{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Xy({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new J(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new J(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Xy(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Y2;switch(r.type){case"firstParty":return new eI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new J(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Qy.get(n);r&&(Q("ComponentProvider","Removing Datastore"),Qy.delete(n),r.terminate())}(this),Promise.resolve()}}function qC(t,e,n,r={}){var d;t=Zt(t,cu);const s=Ri(e),i=t._getSettings(),a={...i,emulatorOptions:t._getEmulatorOptions()},c=`${e}:${n}`;s&&(fw(`https://${c}`),mw("Firestore",!0)),i.host!==B_&&i.host!==c&&wi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...i,host:c,ssl:s,emulatorOptions:r};if(!ws(u,a)&&(t._setSettings(u),r.mockUserToken)){let p,f;if(typeof r.mockUserToken=="string")p=r.mockUserToken,f=gt.MOCK_USER;else{p=NS(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new J(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new gt(m)}t._authCredentials=new X2(new kw(p,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Sa(this.firestore,e,this._query)}}class qe{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Dr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qe(this.firestore,e,this._key)}toJSON(){return{type:qe._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(_a(n,qe._jsonSchema))return new qe(e,r||null,new ee(Ie.fromString(n.referencePath)))}}qe._jsonSchemaVersion="firestore/documentReference/1.0",qe._jsonSchema={type:He("string",qe._jsonSchemaVersion),referencePath:He("string")};class Dr extends Sa{constructor(e,n,r){super(e,n,em(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qe(this.firestore,null,new ee(e))}withConverter(e){return new Dr(this.firestore,e,this._path)}}function Qe(t,e,...n){if(t=St(t),Cw("collection","path",e),t instanceof cu){const r=Ie.fromString(e,...n);return dy(r),new Dr(t,null,r)}{if(!(t instanceof qe||t instanceof Dr))throw new J(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ie.fromString(e,...n));return dy(r),new Dr(t.firestore,null,r)}}function mn(t,e,...n){if(t=St(t),arguments.length===1&&(e=Gf.newId()),Cw("doc","path",e),t instanceof cu){const r=Ie.fromString(e,...n);return uy(r),new qe(t,null,new ee(r))}{if(!(t instanceof qe||t instanceof Dr))throw new J(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ie.fromString(e,...n));return uy(r),new qe(t.firestore,t instanceof Dr?t.converter:null,new ee(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jy="AsyncQueue";class Zy{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new v_(this,"async_queue_retry"),this._c=()=>{const r=yd();r&&Q(Jy,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=yd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=yd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Rr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Li(e))throw e;Q(Jy,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Jn("INTERNAL UNHANDLED ERROR: ",e0(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=mm.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&ne(47125,{Pc:e0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function e0(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t0(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Hr extends cu{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Zy,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Zy(e),this._firestoreClient=void 0,await e}}}function WC(t,e){const n=typeof t=="object"?t:xw(),r=typeof t=="string"?t:pc,s=qf(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=_S("firestore");i&&qC(s,...i)}return s}function vm(t){if(t._terminated)throw new J(B.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||GC(t),t._firestoreClient}function GC(t){var r,s,i;const e=t._freezeSettings(),n=function(c,u,d,p){return new yI(c,u,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,U_(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new BC(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Qt(ct.fromBase64String(e))}catch(n){throw new J(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Qt(ct.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Qt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(_a(e,Qt._jsonSchema))return Qt.fromBase64String(e.bytes)}}Qt._jsonSchemaVersion="firestore/bytes/1.0",Qt._jsonSchema={type:He("string",Qt._jsonSchemaVersion),bytes:He("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new J(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ot(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new J(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new J(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return me(this._lat,e._lat)||me(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Sn._jsonSchemaVersion}}static fromJSON(e){if(_a(e,Sn._jsonSchema))return new Sn(e.latitude,e.longitude)}}Sn._jsonSchemaVersion="firestore/geoPoint/1.0",Sn._jsonSchema={type:He("string",Sn._jsonSchemaVersion),latitude:He("number"),longitude:He("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:In._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(_a(e,In._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new In(e.vectorValues);throw new J(B.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}In._jsonSchemaVersion="firestore/vectorValue/1.0",In._jsonSchema={type:He("string",In._jsonSchemaVersion),vectorValues:He("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC=/^__.*__$/;class QC{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Yr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ea(e,this.data,n,this.fieldTransforms)}}class z_{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Yr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function $_(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ne(40011,{Ac:t})}}class _m{constructor(e,n,r,s,i,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new _m({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Tc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if($_(this.Ac)&&KC.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class YC{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ou(e)}Cc(e,n,r,s=!1){return new _m({Ac:e,methodName:n,Dc:r,path:ot.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Em(t){const e=t._freezeSettings(),n=ou(t._databaseId);return new YC(t._databaseId,!!e.ignoreUndefinedProperties,n)}function H_(t,e,n,r,s,i={}){const a=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);Nm("Data must be an object, but it was:",a,r);const c=q_(r,a);let u,d;if(i.merge)u=new Ut(a.fieldMask),d=a.fieldTransforms;else if(i.mergeFields){const p=[];for(const f of i.mergeFields){const m=Oh(e,f,n);if(!a.contains(m))throw new J(B.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);G_(p,m)||p.push(m)}u=new Ut(p),d=a.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,d=a.fieldTransforms;return new QC(new At(c),u,d)}class du extends wm{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof du}}function XC(t,e,n,r){const s=t.Cc(1,e,n);Nm("Data must be an object, but it was:",s,r);const i=[],a=At.empty();Qr(r,(u,d)=>{const p=bm(e,u,n);d=St(d);const f=s.yc(p);if(d instanceof du)i.push(p);else{const m=hu(d,f);m!=null&&(i.push(p),a.set(p,m))}});const c=new Ut(i);return new z_(a,c,s.fieldTransforms)}function JC(t,e,n,r,s,i){const a=t.Cc(1,e,n),c=[Oh(e,r,n)],u=[s];if(i.length%2!=0)throw new J(B.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)c.push(Oh(e,i[m])),u.push(i[m+1]);const d=[],p=At.empty();for(let m=c.length-1;m>=0;--m)if(!G_(d,c[m])){const T=c[m];let k=u[m];k=St(k);const j=a.yc(T);if(k instanceof du)d.push(T);else{const P=hu(k,j);P!=null&&(d.push(T),p.set(T,P))}}const f=new Ut(d);return new z_(p,f,a.fieldTransforms)}function hu(t,e){if(W_(t=St(t)))return Nm("Unsupported field value:",e,t),q_(t,e);if(t instanceof wm)return function(r,s){if(!$_(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let a=0;for(const c of r){let u=hu(c,s.wc(a));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),a++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=St(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return BI(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=ke.fromDate(r);return{timestampValue:_c(s.serializer,i)}}if(r instanceof ke){const i=new ke(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:_c(s.serializer,i)}}if(r instanceof Sn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Qt)return{bytesValue:l_(s.serializer,r._byteString)};if(r instanceof qe){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:im(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof In)return function(a,c){return{mapValue:{fields:{[Ow]:{stringValue:Fw},[gc]:{arrayValue:{values:a.toArray().map(d=>{if(typeof d!="number")throw c.Sc("VectorValues must only contain numeric values.");return tm(c.serializer,d)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${Kf(r)}`)}(t,e)}function q_(t,e){const n={};return Pw(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Qr(t,(r,s)=>{const i=hu(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function W_(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ke||t instanceof Sn||t instanceof Qt||t instanceof qe||t instanceof wm||t instanceof In)}function Nm(t,e,n){if(!W_(n)||!jw(n)){const r=Kf(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Oh(t,e,n){if((e=St(e))instanceof uu)return e._internalPath;if(typeof e=="string")return bm(t,e);throw Tc("Field path arguments must be of type string or ",t,!1,void 0,n)}const ZC=new RegExp("[~\\*/\\[\\]]");function bm(t,e,n){if(e.search(ZC)>=0)throw Tc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new uu(...e.split("."))._internalPath}catch{throw Tc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Tc(t,e,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(i||a)&&(u+=" (found",i&&(u+=` in field ${r}`),a&&(u+=` in document ${s}`),u+=")"),new J(B.INVALID_ARGUMENT,c+t+u)}function G_(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new qe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ej(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Q_("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class ej extends K_{data(){return super.data()}}function Q_(t,e){return typeof e=="string"?bm(t,e):e instanceof uu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y_(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new J(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class tj{convertValue(e,n="none"){switch(Br(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ue(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ur(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ne(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Qr(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[gc].arrayValue)==null?void 0:s.values)==null?void 0:i.map(a=>Ue(a.doubleValue));return new In(n)}convertGeoPoint(e){return new Sn(Ue(e.latitude),Ue(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Zc(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ia(e));default:return null}}convertTimestamp(e){const n=Fr(e);return new ke(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ie.fromString(e);we(m_(r),9688,{name:e});const s=new oa(r.get(1),r.get(3)),i=new ee(r.popFirst(5));return s.isEqual(n)||Jn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X_(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class Eo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class hs extends K_{constructor(e,n,r,s,i,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Vl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Q_("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new J(B.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=hs._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}hs._jsonSchemaVersion="firestore/documentSnapshot/1.0",hs._jsonSchema={type:He("string",hs._jsonSchemaVersion),bundleSource:He("string","DocumentSnapshot"),bundleName:He("string"),bundle:He("string")};class Vl extends hs{data(e={}){return super.data(e)}}class fs{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Eo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Vl(this._firestore,this._userDataWriter,r.key,r,new Eo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new J(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(c=>{const u=new Vl(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Eo(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>i||c.type!==3).map(c=>{const u=new Vl(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Eo(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,p=-1;return c.type!==0&&(d=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),p=a.indexOf(c.doc.key)),{type:nj(c.type),doc:u,oldIndex:d,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new J(B.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=fs._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Gf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function nj(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ne(61501,{type:t})}}fs._jsonSchemaVersion="firestore/querySnapshot/1.0",fs._jsonSchema={type:He("string",fs._jsonSchemaVersion),bundleSource:He("string","QuerySnapshot"),bundleName:He("string"),bundle:He("string")};class Tm extends tj{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new qe(this.firestore,null,n)}}function bt(t){t=Zt(t,Sa);const e=Zt(t.firestore,Hr),n=vm(e),r=new Tm(e);return Y_(t._query),HC(n,t._query).then(s=>new fs(e,r,t,s))}function rj(t,e,n){t=Zt(t,qe);const r=Zt(t.firestore,Hr),s=X_(t.converter,e);return fu(r,[H_(Em(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,en.none())])}function Si(t,e,n,...r){t=Zt(t,qe);const s=Zt(t.firestore,Hr),i=Em(s);let a;return a=typeof(e=St(e))=="string"||e instanceof uu?JC(i,"updateDoc",t._key,e,n,r):XC(i,"updateDoc",t._key,e),fu(s,[a.toMutation(t._key,en.exists(!0))])}function Sm(t){return fu(Zt(t.firestore,Hr),[new nm(t._key,en.none())])}function J_(t,e){const n=Zt(t.firestore,Hr),r=mn(t),s=X_(t.converter,e);return fu(n,[H_(Em(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,en.exists(!1))]).then(()=>r)}function sj(t,...e){var u,d,p;t=St(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||t0(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(t0(e[r])){const f=e[r];e[r]=(u=f.next)==null?void 0:u.bind(f),e[r+1]=(d=f.error)==null?void 0:d.bind(f),e[r+2]=(p=f.complete)==null?void 0:p.bind(f)}let i,a,c;if(t instanceof qe)a=Zt(t.firestore,Hr),c=em(t._key.path),i={next:f=>{e[r]&&e[r](ij(a,t,f))},error:e[r+1],complete:e[r+2]};else{const f=Zt(t,Sa);a=Zt(f.firestore,Hr),c=f._query;const m=new Tm(a);i={next:T=>{e[r]&&e[r](new fs(a,m,f,T))},error:e[r+1],complete:e[r+2]},Y_(t._query)}return function(m,T,k,j){const P=new O_(j),b=new C_(T,P,k);return m.asyncQueue.enqueueAndForget(async()=>I_(await Lh(m),b)),()=>{P.Nu(),m.asyncQueue.enqueueAndForget(async()=>k_(await Lh(m),b))}}(vm(a),c,s,i)}function fu(t,e){return function(r,s){const i=new Rr;return r.asyncQueue.enqueueAndForget(async()=>PC(await $C(r),s,i)),i.promise}(vm(t),e)}function ij(t,e,n){const r=n.docs.get(e._key),s=new Tm(t);return new hs(t,s,e._key,r,new Eo(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){Mi=s})(Di),vi(new _s("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),c=new Hr(new J2(r.getProvider("auth-internal")),new tI(a,r.getProvider("app-check-internal")),function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new J(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new oa(d.options.projectId,p)}(a,s),a);return i={useFetchStreams:n,...i},c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),Ar(oy,ay,e),Ar(oy,ay,"esm2020")})();var oj="firebase",aj="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ar(oj,aj,"app");function Z_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const lj=Z_,e1=new va("auth","Firebase",Z_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sc=new $f("@firebase/auth");function cj(t,...e){Sc.logLevel<=fe.WARN&&Sc.warn(`Auth (${Di}): ${t}`,...e)}function Ll(t,...e){Sc.logLevel<=fe.ERROR&&Sc.error(`Auth (${Di}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function er(t,...e){throw Im(t,...e)}function kn(t,...e){return Im(t,...e)}function t1(t,e,n){const r={...lj(),[e]:n};return new va("auth","Firebase",r).create(e,{appName:t.name})}function ms(t){return t1(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Im(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return e1.create(t,...e)}function re(t,e,...n){if(!t)throw Im(e,...n)}function zn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ll(e),new Error(e)}function tr(t,e){t||zn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fh(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function uj(){return n0()==="http:"||n0()==="https:"}function n0(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dj(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(uj()||CS()||"connection"in navigator)?navigator.onLine:!0}function hj(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e,n){this.shortDelay=e,this.longDelay=n,tr(n>e,"Short delay should be less than long delay!"),this.isMobile=SS()||jS()}get(){return dj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function km(t,e){tr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;zn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;zn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;zn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mj=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],pj=new Ia(3e4,6e4);function Cm(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Fi(t,e,n,r,s={}){return r1(t,s,async()=>{let i={},a={};r&&(e==="GET"?a=r:i={body:JSON.stringify(r)});const c=wa({key:t.config.apiKey,...a}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:u,...i};return kS()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&Ri(t.emulatorConfig.host)&&(d.credentials="include"),n1.fetch()(await s1(t,t.config.apiHost,n,c),d)})}async function r1(t,e,n){t._canInitEmulator=!1;const r={...fj,...e};try{const s=new yj(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw gl(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const c=i.ok?a.errorMessage:a.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw gl(t,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw gl(t,"email-already-in-use",a);if(u==="USER_DISABLED")throw gl(t,"user-disabled",a);const p=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw t1(t,p,d);er(t,p)}}catch(s){if(s instanceof rr)throw s;er(t,"network-request-failed",{message:String(s)})}}async function gj(t,e,n,r,s={}){const i=await Fi(t,e,n,r,s);return"mfaPendingCredential"in i&&er(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function s1(t,e,n,r){const s=`${e}${n}?${r}`,i=t,a=i.config.emulator?km(t.config,s):`${t.config.apiScheme}://${s}`;return mj.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(a).toString():a}class yj{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(kn(this.auth,"network-request-failed")),pj.get())})}}function gl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=kn(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xj(t,e){return Fi(t,"POST","/v1/accounts:delete",e)}async function Ic(t,e){return Fi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function vj(t,e=!1){const n=St(t),r=await n.getIdToken(e),s=jm(r);re(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Lo(vd(s.auth_time)),issuedAtTime:Lo(vd(s.iat)),expirationTime:Lo(vd(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function vd(t){return Number(t)*1e3}function jm(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ll("JWT malformed, contained fewer than 3 sections"),null;try{const s=cw(n);return s?JSON.parse(s):(Ll("Failed to decode base64 JWT payload"),null)}catch(s){return Ll("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function r0(t){const e=jm(t);return re(e,"internal-error"),re(typeof e.exp<"u","internal-error"),re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ua(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof rr&&wj(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function wj({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _j{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Lo(this.lastLoginAt),this.creationTime=Lo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kc(t){var f;const e=t.auth,n=await t.getIdToken(),r=await ua(t,Ic(e,{idToken:n}));re(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(f=s.providerUserInfo)!=null&&f.length?i1(s.providerUserInfo):[],a=Nj(t.providerData,i),c=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),d=c?u:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Uh(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,p)}async function Ej(t){const e=St(t);await kc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Nj(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function i1(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bj(t,e){const n=await r1(t,{},async()=>{const r=wa({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=await s1(t,s,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:c,body:r};return t.emulatorConfig&&Ri(t.emulatorConfig.host)&&(u.credentials="include"),n1.fetch()(a,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Tj(t,e){return Fi(t,"POST","/v2/accounts:revokeToken",Cm(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){re(e.idToken,"internal-error"),re(typeof e.idToken<"u","internal-error"),re(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):r0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){re(e.length!==0,"internal-error");const n=r0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await bj(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,a=new ci;return r&&(re(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),s&&(re(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(re(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ci,this.toJSON())}_performRefresh(){return zn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lr(t,e){re(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class un{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new _j(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Uh(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await ua(this,this.stsTokenManager.getToken(this.auth,e));return re(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return vj(this,e)}reload(){return Ej(this)}_assign(e){this!==e&&(re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new un({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await kc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(wn(this.auth.app))return Promise.reject(ms(this.auth));const e=await this.getIdToken();return await ua(this,xj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,a=n.photoURL??void 0,c=n.tenantId??void 0,u=n._redirectEventId??void 0,d=n.createdAt??void 0,p=n.lastLoginAt??void 0,{uid:f,emailVerified:m,isAnonymous:T,providerData:k,stsTokenManager:j}=n;re(f&&j,e,"internal-error");const P=ci.fromJSON(this.name,j);re(typeof f=="string",e,"internal-error"),lr(r,e.name),lr(s,e.name),re(typeof m=="boolean",e,"internal-error"),re(typeof T=="boolean",e,"internal-error"),lr(i,e.name),lr(a,e.name),lr(c,e.name),lr(u,e.name),lr(d,e.name),lr(p,e.name);const b=new un({uid:f,auth:e,email:s,emailVerified:m,displayName:r,isAnonymous:T,photoURL:a,phoneNumber:i,tenantId:c,stsTokenManager:P,createdAt:d,lastLoginAt:p});return k&&Array.isArray(k)&&(b.providerData=k.map(y=>({...y}))),u&&(b._redirectEventId=u),b}static async _fromIdTokenResponse(e,n,r=!1){const s=new ci;s.updateFromServerResponse(n);const i=new un({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await kc(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];re(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?i1(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),c=new ci;c.updateFromIdToken(r);const u=new un({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:a}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Uh(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s0=new Map;function $n(t){tr(t instanceof Function,"Expected a class definition");let e=s0.get(t);return e?(tr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,s0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}o1.type="NONE";const i0=o1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ol(t,e,n){return`firebase:${t}:${e}:${n}`}class ui{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Ol(this.userKey,s.apiKey,i),this.fullPersistenceKey=Ol("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Ic(this.auth,{idToken:e}).catch(()=>{});return n?un._fromGetAccountInfoResponse(this.auth,n,e):null}return un._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ui($n(i0),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||$n(i0);const a=Ol(r,e.config.apiKey,e.name);let c=null;for(const d of n)try{const p=await d._get(a);if(p){let f;if(typeof p=="string"){const m=await Ic(e,{idToken:p}).catch(()=>{});if(!m)break;f=await un._fromGetAccountInfoResponse(e,m,p)}else f=un._fromJSON(e,p);d!==i&&(c=f),i=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new ui(i,e,r):(i=u[0],c&&await i._set(a,c.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(a)}catch{}})),new ui(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(u1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(a1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(h1(e))return"Blackberry";if(f1(e))return"Webos";if(l1(e))return"Safari";if((e.includes("chrome/")||c1(e))&&!e.includes("edge/"))return"Chrome";if(d1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function a1(t=wt()){return/firefox\//i.test(t)}function l1(t=wt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function c1(t=wt()){return/crios\//i.test(t)}function u1(t=wt()){return/iemobile/i.test(t)}function d1(t=wt()){return/android/i.test(t)}function h1(t=wt()){return/blackberry/i.test(t)}function f1(t=wt()){return/webos/i.test(t)}function Am(t=wt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Sj(t=wt()){var e;return Am(t)&&!!((e=window.navigator)!=null&&e.standalone)}function Ij(){return AS()&&document.documentMode===10}function m1(t=wt()){return Am(t)||d1(t)||f1(t)||h1(t)||/windows phone/i.test(t)||u1(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p1(t,e=[]){let n;switch(t){case"Browser":n=o0(wt());break;case"Worker":n=`${o0(wt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Di}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((a,c)=>{try{const u=e(i);a(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cj(t,e={}){return Fi(t,"GET","/v2/passwordPolicy",Cm(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jj=6;class Aj{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??jj,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pj{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new a0(this),this.idTokenSubscription=new a0(this),this.beforeStateQueue=new kj(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=e1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=$n(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await ui.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Ic(this,{idToken:e}),r=await un._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(wn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(i=this.redirectUser)==null?void 0:i._redirectEventId,c=r==null?void 0:r._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===c)&&(u!=null&&u.user)&&(r=u.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await kc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=hj()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(wn(this.app))return Promise.reject(ms(this));const n=e?St(e):null;return n&&re(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return wn(this.app)?Promise.reject(ms(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return wn(this.app)?Promise.reject(ms(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence($n(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Cj(this),n=new Aj(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new va("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Tj(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&$n(e)||this._popupRedirectResolver;re(n,this,"argument-error"),this.redirectPersistenceManager=await ui.create(this,[$n(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let a=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(re(c,this,"internal-error"),c.then(()=>{a||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{a=!0,u()}}else{const u=e.addObserver(n);return()=>{a=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=p1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(wn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&cj(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Pm(t){return St(t)}class a0{constructor(e){this.auth=e,this.observer=null,this.addObserver=FS(n=>this.observer=n)}get next(){return re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Rj(t){Rm=t}function Dj(t){return Rm.loadJS(t)}function Mj(){return Rm.gapiScript}function Vj(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lj(t,e){const n=qf(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(ws(i,e??{}))return s;er(s,"already-initialized")}return n.initialize({options:e})}function Oj(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map($n);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Fj(t,e,n){const r=Pm(t);re(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=g1(e),{host:a,port:c}=Uj(e),u=c===null?"":`:${c}`,d={url:`${i}//${a}${u}/`},p=Object.freeze({host:a,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){re(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),re(ws(d,r.config.emulator)&&ws(p,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=p,r.settings.appVerificationDisabledForTesting=!0,Ri(a)?(fw(`${i}//${a}${u}`),mw("Auth",!0)):Bj()}function g1(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Uj(t){const e=g1(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:l0(r.substr(i.length+1))}}else{const[i,a]=r.split(":");return{host:i,port:l0(a)}}}function l0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Bj(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return zn("not implemented")}_getIdTokenResponse(e){return zn("not implemented")}_linkToIdToken(e,n){return zn("not implemented")}_getReauthenticationResolver(e){return zn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function di(t,e){return gj(t,"POST","/v1/accounts:signInWithIdp",Cm(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zj="http://localhost";class bs extends y1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new bs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):er("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const a=new bs(r,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return di(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,di(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,di(e,n)}buildRequest(){const e={requestUri:zj,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=wa(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka extends x1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr extends ka{constructor(){super("facebook.com")}static credential(e){return bs._fromParams({providerId:fr.PROVIDER_ID,signInMethod:fr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fr.credentialFromTaggedObject(e)}static credentialFromError(e){return fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fr.credential(e.oauthAccessToken)}catch{return null}}}fr.FACEBOOK_SIGN_IN_METHOD="facebook.com";fr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn extends ka{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return bs._fromParams({providerId:Fn.PROVIDER_ID,signInMethod:Fn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Fn.credentialFromTaggedObject(e)}static credentialFromError(e){return Fn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Fn.credential(n,r)}catch{return null}}}Fn.GOOGLE_SIGN_IN_METHOD="google.com";Fn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr extends ka{constructor(){super("github.com")}static credential(e){return bs._fromParams({providerId:mr.PROVIDER_ID,signInMethod:mr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mr.credentialFromTaggedObject(e)}static credentialFromError(e){return mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return mr.credential(e.oauthAccessToken)}catch{return null}}}mr.GITHUB_SIGN_IN_METHOD="github.com";mr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr extends ka{constructor(){super("twitter.com")}static credential(e,n){return bs._fromParams({providerId:pr.PROVIDER_ID,signInMethod:pr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return pr.credentialFromTaggedObject(e)}static credentialFromError(e){return pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return pr.credential(n,r)}catch{return null}}}pr.TWITTER_SIGN_IN_METHOD="twitter.com";pr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await un._fromIdTokenResponse(e,r,s),a=c0(r);return new Ii({user:i,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=c0(r);return new Ii({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function c0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc extends rr{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Cc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Cc(e,n,r,s)}}function v1(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Cc._fromErrorAndOperation(t,i,e,r):i})}async function $j(t,e,n=!1){const r=await ua(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ii._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hj(t,e,n=!1){const{auth:r}=t;if(wn(r.app))return Promise.reject(ms(r));const s="reauthenticate";try{const i=await ua(t,v1(r,s,e,t),n);re(i.idToken,r,"internal-error");const a=jm(i.idToken);re(a,r,"internal-error");const{sub:c}=a;return re(t.uid===c,r,"user-mismatch"),Ii._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&er(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qj(t,e,n=!1){if(wn(t.app))return Promise.reject(ms(t));const r="signIn",s=await v1(t,r,e),i=await Ii._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function Wj(t,e,n,r){return St(t).onIdTokenChanged(e,n,r)}function Gj(t,e,n){return St(t).beforeAuthStateChanged(e,n)}const jc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(jc,"1"),this.storage.removeItem(jc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kj=1e3,Qj=10;class _1 extends w1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=m1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},i=this.storage.getItem(r);Ij()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Qj):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Kj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}_1.type="LOCAL";const Yj=_1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1 extends w1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}E1.type="SESSION";const N1=E1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xj(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new mu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(a).map(async d=>d(n.origin,i)),u=await Xj(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}mu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jj{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((c,u)=>{const d=Dm("",20);s.port1.start();const p=setTimeout(()=>{u(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(f){const m=f;if(m.data.eventId===d)switch(m.data.status){case"ack":clearTimeout(p),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(m.data.response);break;default:clearTimeout(p),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cn(){return window}function Zj(t){Cn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b1(){return typeof Cn().WorkerGlobalScope<"u"&&typeof Cn().importScripts=="function"}async function eA(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function tA(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function nA(){return b1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T1="firebaseLocalStorageDb",rA=1,Ac="firebaseLocalStorage",S1="fbase_key";class Ca{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function pu(t,e){return t.transaction([Ac],e?"readwrite":"readonly").objectStore(Ac)}function sA(){const t=indexedDB.deleteDatabase(T1);return new Ca(t).toPromise()}function Bh(){const t=indexedDB.open(T1,rA);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Ac,{keyPath:S1})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Ac)?e(r):(r.close(),await sA(),e(await Bh()))})})}async function u0(t,e,n){const r=pu(t,!0).put({[S1]:e,value:n});return new Ca(r).toPromise()}async function iA(t,e){const n=pu(t,!1).get(e),r=await new Ca(n).toPromise();return r===void 0?null:r.value}function d0(t,e){const n=pu(t,!0).delete(e);return new Ca(n).toPromise()}const oA=800,aA=3;class I1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Bh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>aA)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return b1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=mu._getInstance(nA()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await eA(),!this.activeServiceWorker)return;this.sender=new Jj(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||tA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Bh();return await u0(e,jc,"1"),await d0(e,jc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>u0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>iA(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>d0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=pu(s,!1).getAll();return new Ca(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),oA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}I1.type="LOCAL";const lA=I1;new Ia(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cA(t,e){return e?$n(e):(re(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm extends y1{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return di(e,this._buildIdpRequest())}_linkToIdToken(e,n){return di(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return di(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function uA(t){return qj(t.auth,new Mm(t),t.bypassAuthState)}function dA(t){const{auth:e,user:n}=t;return re(n,e,"internal-error"),Hj(n,new Mm(t),t.bypassAuthState)}async function hA(t){const{auth:e,user:n}=t;return re(n,e,"internal-error"),$j(n,new Mm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:a,type:c}=e;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return uA;case"linkViaPopup":case"linkViaRedirect":return hA;case"reauthViaPopup":case"reauthViaRedirect":return dA;default:er(this.auth,"internal-error")}}resolve(e){tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA=new Ia(2e3,1e4);class Zs extends k1{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Zs.currentPopupAction&&Zs.currentPopupAction.cancel(),Zs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return re(e,this.auth,"internal-error"),e}async onExecution(){tr(this.filter.length===1,"Popup operations only handle one event");const e=Dm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(kn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(kn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Zs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(kn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,fA.get())};e()}}Zs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mA="pendingRedirect",Fl=new Map;class pA extends k1{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Fl.get(this.auth._key());if(!e){try{const r=await gA(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Fl.set(this.auth._key(),e)}return this.bypassAuthState||Fl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function gA(t,e){const n=vA(e),r=xA(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function yA(t,e){Fl.set(t._key(),e)}function xA(t){return $n(t._redirectPersistence)}function vA(t){return Ol(mA,t.config.apiKey,t.name)}async function wA(t,e,n=!1){if(wn(t.app))return Promise.reject(ms(t));const r=Pm(t),s=cA(r,e),a=await new pA(r,s,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A=10*60*1e3;class EA{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!NA(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!C1(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(kn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=_A&&this.cachedEventUids.clear(),this.cachedEventUids.has(h0(e))}saveEventToCache(e){this.cachedEventUids.add(h0(e)),this.lastProcessedEventTime=Date.now()}}function h0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function C1({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function NA(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return C1(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bA(t,e={}){return Fi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,SA=/^https?/;async function IA(t){if(t.config.emulator)return;const{authorizedDomains:e}=await bA(t);for(const n of e)try{if(kA(n))return}catch{}er(t,"unauthorized-domain")}function kA(t){const e=Fh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!SA.test(n))return!1;if(TA.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA=new Ia(3e4,6e4);function f0(){const t=Cn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function jA(t){return new Promise((e,n)=>{var s,i,a;function r(){f0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{f0(),n(kn(t,"network-request-failed"))},timeout:CA.get()})}if((i=(s=Cn().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((a=Cn().gapi)!=null&&a.load)r();else{const c=Vj("iframefcb");return Cn()[c]=()=>{gapi.load?r():n(kn(t,"network-request-failed"))},Dj(`${Mj()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw Ul=null,e})}let Ul=null;function AA(t){return Ul=Ul||jA(t),Ul}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA=new Ia(5e3,15e3),RA="__/auth/iframe",DA="emulator/auth/iframe",MA={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},VA=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function LA(t){const e=t.config;re(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?km(e,DA):`https://${t.config.authDomain}/${RA}`,r={apiKey:e.apiKey,appName:t.name,v:Di},s=VA.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${wa(r).slice(1)}`}async function OA(t){const e=await AA(t),n=Cn().gapi;return re(n,t,"internal-error"),e.open({where:document.body,url:LA(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:MA,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const a=kn(t,"network-request-failed"),c=Cn().setTimeout(()=>{i(a)},PA.get());function u(){Cn().clearTimeout(c),s(r)}r.ping(u).then(u,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FA={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},UA=500,BA=600,zA="_blank",$A="http://localhost";class m0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function HA(t,e,n,r=UA,s=BA){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u={...FA,width:r.toString(),height:s.toString(),top:i,left:a},d=wt().toLowerCase();n&&(c=c1(d)?zA:n),a1(d)&&(e=e||$A,u.scrollbars="yes");const p=Object.entries(u).reduce((m,[T,k])=>`${m}${T}=${k},`,"");if(Sj(d)&&c!=="_self")return qA(e||"",c),new m0(null);const f=window.open(e||"",c,p);re(f,t,"popup-blocked");try{f.focus()}catch{}return new m0(f)}function qA(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WA="__/auth/handler",GA="emulator/auth/handler",KA=encodeURIComponent("fac");async function p0(t,e,n,r,s,i){re(t.config.authDomain,t,"auth-domain-config-required"),re(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Di,eventId:s};if(e instanceof x1){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",OS(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,f]of Object.entries({}))a[p]=f}if(e instanceof ka){const p=e.getScopes().filter(f=>f!=="");p.length>0&&(a.scopes=p.join(","))}t.tenantId&&(a.tid=t.tenantId);const c=a;for(const p of Object.keys(c))c[p]===void 0&&delete c[p];const u=await t._getAppCheckToken(),d=u?`#${KA}=${encodeURIComponent(u)}`:"";return`${QA(t)}?${wa(c).slice(1)}${d}`}function QA({config:t}){return t.emulator?km(t,GA):`https://${t.authDomain}/${WA}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wd="webStorageSupport";class YA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=N1,this._completeRedirectFn=wA,this._overrideRedirectResult=yA}async _openPopup(e,n,r,s){var a;tr((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const i=await p0(e,n,r,Fh(),s);return HA(e,i,Dm())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await p0(e,n,r,Fh(),s);return Zj(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(tr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await OA(e),r=new EA(e);return n.register("authEvent",s=>(re(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(wd,{type:wd},s=>{var a;const i=(a=s==null?void 0:s[0])==null?void 0:a[wd];i!==void 0&&n(!!i),er(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=IA(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return m1()||l1()||Am()}}const XA=YA;var g0="@firebase/auth",y0="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZA(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function eP(t){vi(new _s("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=r.options;re(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:a,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:p1(t)},d=new Pj(r,s,i,u);return Oj(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),vi(new _s("auth-internal",e=>{const n=Pm(e.getProvider("auth").getImmediate());return(r=>new JA(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ar(g0,y0,ZA(t)),Ar(g0,y0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tP=5*60,nP=hw("authIdTokenMaxAge")||tP;let x0=null;const rP=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>nP)return;const s=n==null?void 0:n.token;x0!==s&&(x0=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function sP(t=xw()){const e=qf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Lj(t,{popupRedirectResolver:XA,persistence:[lA,Yj,N1]}),r=hw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const a=rP(i.toString());Gj(n,a,()=>a(n.currentUser)),Wj(n,c=>a(c))}}const s=uw("auth");return s&&Fj(n,`http://${s}`),n}function iP(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}Rj({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=kn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",iP().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});eP("Browser");const oP={apiKey:"AIzaSyBUtOkFHcZYETVyUZtb5_fiDhxRhcQHVkw",authDomain:"besa-app.firebaseapp.com",projectId:"besa-app",storageBucket:"besa-app.firebasestorage.app",messagingSenderId:"993937979015",appId:"1:993937979015:web:be329cc32dcadf619e6a22",measurementId:"G-1WFWN4H0Q3"},j1=yw(oP);sP(j1);new Fn;const ve=WC(j1);function mo({children:t}){const[e,n]=R.useState("public"),[r,s]=R.useState(!1),[i,a]=R.useState(window.innerWidth>=1e3),c=Is();R.useEffect(()=>{const d=()=>{a(window.innerWidth>=1e3),window.innerWidth>=1e3&&s(!1)};return window.addEventListener("resize",d),()=>window.removeEventListener("resize",d)},[]);const u=()=>{n("public"),s(!1),c("/")};return o.jsxs("div",{className:"min-h-screen bg-gray-50",children:[o.jsxs("nav",{className:"bg-white shadow-sm border-b-4 border-orange-400",children:[o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"flex justify-between items-center h-16",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("img",{src:"/BE_logo.png",className:"h-8 w-8 text-blue-600"}),o.jsx("span",{className:"text-xl font-bold text-gray-900",children:"BESA Tours"}),o.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-medium ml-2",children:e==="admin"?"Admin":"BESA"})]}),i&&o.jsxs("div",{className:"flex items-center space-x-6",children:[o.jsxs("button",{onClick:()=>c("/admin/dashboard"),className:`flex items-center space-x-2 px-3 py-2 rounded-lg transition-colors ${window.location.pathname==="/admin/dashboard"?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900"}`,children:[o.jsx(rn,{className:"h-4 w-4"}),o.jsx("span",{children:"Dashboard"})]}),o.jsxs("button",{onClick:()=>c("/admin/schedule"),className:`flex items-center space-x-2 px-3 py-2 rounded-lg transition-colors ${window.location.pathname==="/admin/schedule"?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900"}`,children:[o.jsx(Ft,{className:"h-4 w-4"}),o.jsx("span",{children:"Schedule"})]}),o.jsxs("button",{onClick:()=>c("/admin/tours"),className:`flex items-center space-x-2 px-3 py-2 rounded-lg transition-colors ${window.location.pathname==="/admin/tours"?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900"}`,children:[o.jsx(_n,{className:"h-4 w-4"}),o.jsx("span",{children:"Tours"})]}),o.jsxs("button",{onClick:()=>c("/admin/besas"),className:`flex items-center space-x-2 px-3 py-2 rounded-lg transition-colors ${window.location.pathname==="/admin/besas"?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900"}`,children:[o.jsx(Jt,{className:"h-4 w-4"}),o.jsx("span",{children:"BESAs"})]}),o.jsxs("button",{onClick:()=>c("/admin/office-hours"),className:`flex items-center space-x-2 px-3 py-2 rounded-lg transition-colors ${window.location.pathname==="/admin/office-hours"?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900"}`,children:[o.jsx(Ft,{className:"h-4 w-4"}),o.jsx("span",{children:"Office Hours"})]}),o.jsxs("button",{onClick:u,className:"flex items-center space-x-2 px-3 py-2 text-red-600 hover:text-red-800 transition-colors",children:[o.jsx(Wg,{className:"h-4 w-4"}),o.jsx("span",{children:"Logout"})]})]}),!i&&o.jsx("button",{onClick:()=>s(!r),className:"p-2 rounded-lg text-gray-600 hover:text-gray-900",children:r?o.jsx(kr,{className:"h-6 w-6"}):o.jsx(lS,{className:"h-6 w-6"})})]})}),r&&!i&&o.jsx("div",{className:"bg-white border-t",children:o.jsxs("div",{className:"px-4 py-2 space-y-1",children:[o.jsxs("button",{onClick:()=>{c("/admin/dashboard"),s(!1)},className:"w-full flex items-center space-x-2 px-3 py-2 rounded-lg text-left text-gray-600 hover:text-gray-900",children:[o.jsx(rn,{className:"h-4 w-4"}),o.jsx("span",{children:"Dashboard"})]}),o.jsxs("button",{onClick:()=>{c("/admin/schedule"),s(!1)},className:"w-full flex items-center space-x-2 px-3 py-2 rounded-lg text-left text-gray-600 hover:text-gray-900",children:[o.jsx(Ft,{className:"h-4 w-4"}),o.jsx("span",{children:"Schedule"})]}),o.jsxs("button",{onClick:()=>{c("/admin/tours"),s(!1)},className:"w-full flex items-center space-x-2 px-3 py-2 rounded-lg text-left text-gray-600 hover:text-gray-900",children:[o.jsx(_n,{className:"h-4 w-4"}),o.jsx("span",{children:"Tours"})]}),o.jsxs("button",{onClick:()=>{c("/admin/besas"),s(!1)},className:"w-full flex items-center space-x-2 px-3 py-2 rounded-lg text-left text-gray-600 hover:text-gray-900",children:[o.jsx(Jt,{className:"h-4 w-4"}),o.jsx("span",{children:"BESAs"})]}),o.jsxs("button",{onClick:()=>{c("/admin/office-hours"),s(!1)},className:"w-full flex items-center space-x-2 px-3 py-2 rounded-lg text-left text-gray-600 hover:text-gray-900",children:[o.jsx(Ft,{className:"h-4 w-4"}),o.jsx("span",{children:"Office Hours"})]}),o.jsxs("button",{onClick:u,className:"w-full flex items-center space-x-2 px-3 py-2 rounded-lg text-left text-red-600 hover:text-red-800",children:[o.jsx(Wg,{className:"h-4 w-4"}),o.jsx("span",{children:"Logout"})]})]})})]}),t]})}function aP(){const[t,e]=R.useState("public"),[n,r]=R.useState([]),[s,i]=R.useState([]),[a,c]=R.useState(0),[u,d]=R.useState(0),[p,f]=R.useState(null),[m,T]=R.useState(null),[k,j]=R.useState([]),[P,b]=R.useState(null),y={0:"sunday",1:"monday",2:"tuesday",3:"wednesday",4:"thursday",5:"friday",6:"saturday"};R.useEffect(()=>{(async()=>{try{const G=(await bt(Qe(ve,"Besas"))).docs.map(te=>{const X=te.data(),O={};return Object.entries(X.officeHours||{}).forEach(([z,q])=>{q&&typeof q=="object"&&"start"in q&&"end"in q?O[z]={available:!0,timeSlots:[{id:Math.random().toString(36).substr(2,9),start:typeof q.start=="string"?q.start:"09:00",end:typeof q.end=="string"?q.end:"17:00"}]}:q&&typeof q=="object"&&"available"in q&&"timeSlots"in q?O[z]={available:!!q.available,timeSlots:Array.isArray(q.timeSlots)?q.timeSlots.map(Z=>({id:typeof Z.id=="string"?Z.id:Math.random().toString(36).substr(2,9),start:typeof Z.start=="string"?Z.start:"09:00",end:typeof Z.end=="string"?Z.end:"17:00"})):[]}:O[z]={available:!1,timeSlots:[]}}),{id:te.id,name:X.name,email:X.email,status:X.status,role:X.role,officeHours:O}});j(G)}catch(H){console.error("Error fetching BESAs:",H)}})()},[]),R.useEffect(()=>{(async()=>{try{const G=(await bt(Qe(ve,"Tours"))).docs.map(be=>({tourId:be.id,...be.data()}));i(G);const te=Qe(ve,"Bookings"),O=(await bt(te)).docs.map(be=>{const Ae=be.data();return{id:be.id,...Ae,besas:Ae.besas?Ae.besas:Ae.besa?[Ae.besa]:[]}});r(O);const z=new Date,q=z.toISOString().split("T")[0],Z=new Date(z);Z.setDate(z.getDate()-z.getDay());const ue=new Date(z);ue.setDate(Z.getDate()+6);const de=O.filter(be=>be.date===q).length,Je=O.filter(be=>{const Ae=new Date(be.date);return Ae>=Z&&Ae<=ue}).length;c(de),d(Je)}catch(H){console.error("Error fetching bookings:",H)}})()},[]);const w=v=>{if(!v)return"";const H=/(\d{1,2}):(\d{2})\s*(AM|PM)/i,G=v.match(H);if(!G)return"";let te=parseInt(G[1],10);const X=G[2],O=G[3].toUpperCase();return O==="PM"&&te!==12?te+=12:O==="AM"&&te===12&&(te=0),`${te.toString().padStart(2,"0")}:${X}`},A=(v,H,G)=>{if(!H||!G)return!1;const X=new Date(H).getDay(),O=y[X],z=v.officeHours[O];if(!z||!z.available||z.timeSlots.length===0)return!1;const q=w(G);return q?z.timeSlots.some(Z=>q>=Z.start&&q<=Z.end):!1},D=v=>k.filter(H=>H.status==="active"&&A(H,v.date,v.time)),V=v=>{f(v),T({...v,besas:v.besas||[]})},N=v=>{b(v)},x=async()=>{if(!(!P||!P.id))try{await Sm(mn(ve,"Bookings",P.id));const v=Qe(ve,"Bookings"),G=(await bt(v)).docs.map(te=>{const X=te.data();return{id:te.id,...X,besas:X.besas?X.besas:X.besa?[X.besa]:[]}});r(G),b(null),alert("Booking deleted successfully!")}catch(v){console.error("Error deleting booking:",v),alert("Failed to delete booking.")}},E=async()=>{var v;if(!(!p||!m))try{const H={...m,besas:((v=m.besas)==null?void 0:v.filter(O=>O.trim()!==""))||[]};await Si(mn(ve,"Bookings",m.id),H),f(null);const G=Qe(ve,"Bookings"),X=(await bt(G)).docs.map(O=>{const z=O.data();return{id:O.id,...z,besas:z.besas?z.besas:z.besa?[z.besa]:[]}});r(X),alert("Booking updated successfully!")}catch(H){console.error("Error updating booking:",H),alert("Failed to update booking.")}},I=()=>{m&&T({...m,besas:[...m.besas||[],""]})},S=v=>{if(!m)return;const H=[...m.besas||[]];H.splice(v,1),T({...m,besas:H})},C=(v,H)=>{if(!m)return;const G=[...m.besas||[]];G[v]=H,T({...m,besas:G})};return o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:t==="admin"?"Admin Dashboard":"BESA Dashboard"}),o.jsx("p",{className:"text-gray-600",children:t==="admin"?"Manage tours, BESAs, and system settings":"Track your assigned tours and manage your schedule"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[o.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6 border-b-4 border-orange-400",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Today's Tours"}),o.jsx("p",{className:"text-3xl font-bold text-gray-900",children:a})]}),o.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:o.jsx(rn,{className:"h-6 w-6 text-blue-600"})})]})}),o.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6 border-b-4 border-orange-400",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:"This Week"}),o.jsx("p",{className:"text-3xl font-bold text-gray-900",children:u})]}),o.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:o.jsx(Jt,{className:"h-6 w-6 text-green-600"})})]})})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border",children:[o.jsx("div",{className:"p-6 border-b",children:o.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Recent Bookings"})}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tour"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date & Time"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Attendees"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"BESAs"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(v=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:v.tourType}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[v.date,o.jsx("div",{className:"text-sm text-gray-500",children:v.time})]}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[v.attendees,"/",v.maxAttendees]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:v.besas&&v.besas.length>0?o.jsx("div",{className:"space-y-1",children:v.besas.map((H,G)=>o.jsx("div",{className:"inline-block bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs mr-1",children:H},G))}):o.jsx("span",{className:"text-gray-400 italic",children:"Unassigned"})}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[v.firstName," ",v.lastName,o.jsx("div",{className:"text-sm text-gray-500",children:v.email})]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>V(v),className:"flex items-center gap-1 px-3 py-1 bg-yellow-100 text-yellow-800 rounded-lg hover:bg-yellow-200",children:"Edit"}),o.jsxs("button",{onClick:()=>N(v),className:"flex items-center gap-1 px-3 py-1 bg-red-100 text-red-800 rounded-lg hover:bg-red-200",children:[o.jsx(zf,{className:"h-3 w-3"}),"Delete"]})]})})]},v.id))})]})})]}),P&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-xl w-full max-w-md p-6",children:[o.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Delete Booking"}),o.jsxs("p",{className:"text-gray-600 mb-6",children:["Are you sure you want to delete the booking for ",o.jsxs("strong",{children:[P.firstName," ",P.lastName," "]}),"on ",P.date," at ",P.time,"? This action cannot be undone."]}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx("button",{onClick:()=>b(null),className:"px-4 py-2 bg-gray-200 rounded-lg hover:bg-gray-300",children:"Cancel"}),o.jsx("button",{onClick:x,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Delete"})]})]})}),p&&m&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-xl w-full max-w-lg max-h-[80vh] overflow-y-auto p-6",children:[o.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Edit Booking"}),o.jsx("label",{className:"block mb-2 font-medium",children:"First Name"}),o.jsx("input",{type:"text",value:m.firstName,onChange:v=>T({...m,firstName:v.target.value}),className:"w-full px-3 py-2 border rounded-lg mb-4"}),o.jsx("label",{className:"block mb-2 font-medium",children:"Last Name"}),o.jsx("input",{type:"text",value:m.lastName,onChange:v=>T({...m,lastName:v.target.value}),className:"w-full px-3 py-2 border rounded-lg mb-4"}),o.jsx("label",{className:"block mb-2 font-medium",children:"Email"}),o.jsx("input",{type:"email",value:m.email,onChange:v=>T({...m,email:v.target.value}),className:"w-full px-3 py-2 border rounded-lg mb-4"}),o.jsx("label",{className:"block mb-2 font-medium",children:"Phone"}),o.jsx("input",{type:"text",value:m.phone,onChange:v=>T({...m,phone:v.target.value}),className:"w-full px-3 py-2 border rounded-lg mb-4"}),o.jsx("label",{className:"block mb-2 font-medium",children:"Organization"}),o.jsx("input",{type:"text",value:m.organization,onChange:v=>T({...m,organization:v.target.value}),className:"w-full px-3 py-2 border rounded-lg mb-4"}),o.jsx("label",{className:"block mb-2 font-medium",children:"Role"}),o.jsx("input",{type:"text",value:m.role,onChange:v=>T({...m,role:v.target.value}),className:"w-full px-3 py-2 border rounded-lg mb-4"}),o.jsx("label",{className:"block mb-2 font-medium",children:"Tour"}),o.jsxs("select",{value:m.tourId||"",onChange:v=>{const H=s.find(G=>G.tourId===v.target.value);H&&T({...m,tourId:H.tourId,tourType:H.title})},className:"w-full px-3 py-2 border rounded-lg mb-4",children:[o.jsx("option",{value:"",children:"Select a tour"}),s.map(v=>o.jsx("option",{value:v.tourId,children:v.title},v.tourId))]}),o.jsx("label",{className:"block mb-2 font-medium",children:"Date"}),o.jsx("input",{type:"date",value:m.date,onChange:v=>T({...m,date:v.target.value}),className:"w-full px-3 py-2 border rounded-lg mb-4"}),o.jsx("label",{className:"block mb-2 font-medium",children:"Time"}),o.jsx("input",{type:"text",value:m.time,onChange:v=>T({...m,time:v.target.value}),className:"w-full px-3 py-2 border rounded-lg mb-4",placeholder:"e.g., 10:00 AM"}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("label",{className:"block mb-2 font-medium",children:["BESA Assignments",m.date&&m.time&&o.jsxs("span",{className:"text-sm text-gray-500 ml-2",children:["(Available on ",new Date(m.date).toLocaleDateString("en-US",{weekday:"long"})," at ",m.time,")"]})]}),"Existing BESA assignments",m.besas&&m.besas.map((v,H)=>o.jsxs("div",{className:"flex gap-2 mb-2",children:[o.jsxs("select",{value:v,onChange:G=>C(H,G.target.value),className:"flex-1 px-3 py-2 border rounded-lg",children:[o.jsx("option",{value:"",children:"Select a BESA"}),D(m).map(G=>o.jsx("option",{value:G.name,children:G.name},G.id)),m.date&&m.time&&D(m).length===0&&k.filter(G=>G.status==="active").map(G=>o.jsxs("option",{value:G.name,children:[G.name," (not available)"]},G.id))]}),m.besas&&m.besas.length>1&&o.jsx("button",{type:"button",onClick:()=>S(H),className:"px-3 py-2 bg-red-100 text-red-600 rounded-lg hover:bg-red-200",children:o.jsx(kr,{className:"h-4 w-4"})})]},H)),o.jsxs("button",{type:"button",onClick:I,className:"flex items-center gap-2 px-3 py-2 bg-blue-100 text-blue-600 rounded-lg hover:bg-blue-200",children:[o.jsx(ds,{className:"h-4 w-4"}),"Add Another BESA"]}),(!m.besas||m.besas.length===0)&&o.jsxs("button",{type:"button",onClick:()=>T({...m,besas:[""]}),className:"flex items-center gap-2 px-3 py-2 bg-green-100 text-green-600 rounded-lg hover:bg-green-200 mt-2",children:[o.jsx(ds,{className:"h-4 w-4"}),"Assign BESA"]})]}),m.date&&m.time&&D(m).length===0&&o.jsxs("div",{className:"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[o.jsx("p",{className:"text-sm text-yellow-800",children:" No BESAs are available at this date and time. You may need to:"}),o.jsxs("ul",{className:"text-sm text-yellow-700 mt-1 ml-4 list-disc",children:[o.jsx("li",{children:"Change the booking time"}),o.jsx("li",{children:"Update BESA office hours"}),o.jsx("li",{children:"Assign manually (override availability)"})]})]}),o.jsx("label",{className:"block mb-2 font-medium",children:"Attendees"}),o.jsx("input",{type:"number",value:m.attendees,onChange:v=>T({...m,attendees:parseInt(v.target.value)}),className:"w-full px-3 py-2 border rounded-lg mb-4"}),o.jsx("label",{className:"block mb-2 font-medium",children:"Max Attendees"}),o.jsx("input",{type:"number",value:m.maxAttendees,onChange:v=>T({...m,maxAttendees:parseInt(v.target.value)}),className:"w-full px-3 py-2 border rounded-lg mb-4"}),o.jsx("label",{className:"block mb-2 font-medium",children:"Interests (comma separated)"}),o.jsx("input",{type:"text",value:m.interests.join(", "),onChange:v=>T({...m,interests:v.target.value.split(",").map(H=>H.trim())}),className:"w-full px-3 py-2 border rounded-lg mb-4"}),o.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[o.jsx("button",{onClick:()=>f(null),className:"px-4 py-2 bg-gray-200 rounded-lg hover:bg-gray-300",children:"Cancel"}),o.jsx("button",{onClick:E,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Save"})]})]})})]})}function lP(){const[t,e]=R.useState([]),[n,r]=R.useState(new Date),[s,i]=R.useState(new Date),[a,c]=R.useState([]),[u,d]=R.useState([]),[p,f]=R.useState("calendar"),[m,T]=R.useState(null),[k,j]=R.useState("upcoming"),P=(F,K)=>{const oe=["January","February","March","April","May","June","July","August","September","October","November","December"],le=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],_t=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];return K==="MMMM yyyy"?`${oe[F.getMonth()]} ${F.getFullYear()}`:K==="MMMM d, yyyy"?`${oe[F.getMonth()]} ${F.getDate()}, ${F.getFullYear()}`:K==="MMM d, yyyy"?`${le[F.getMonth()]} ${F.getDate()}, ${F.getFullYear()}`:K==="MM-dd-yyyy"?`${(F.getMonth()+1).toString().padStart(2,"0")}-${F.getDate().toString().padStart(2,"0")}-${F.getFullYear()}`:K==="EEEE"?_t[F.getDay()]:F.toString()},b=F=>new Date(F.getFullYear(),F.getMonth(),1),y=F=>new Date(F.getFullYear(),F.getMonth()+1,0),w=F=>{const K=new Date(F),oe=K.getDay(),le=K.getDate()-oe;return new Date(K.setDate(le))},A=F=>{const K=new Date(F),oe=K.getDay(),le=K.getDate()-oe+6;return new Date(K.setDate(le))},D=(F,K)=>{const oe=new Date(F);return oe.setDate(oe.getDate()+K),oe},V=(F,K)=>F.getDate()===K.getDate()&&F.getMonth()===K.getMonth()&&F.getFullYear()===K.getFullYear(),N=(F,K)=>F.getMonth()===K.getMonth()&&F.getFullYear()===K.getFullYear(),x=(F,K)=>{const oe=new Date(F);return oe.setMonth(oe.getMonth()-K),oe},E=(F,K)=>{const oe=new Date(F);return oe.setMonth(oe.getMonth()+K),oe},I=F=>{if(!F)return"";if(F.includes("AM")||F.includes("PM"))return F;const[K,oe]=F.split(":"),le=parseInt(K,10),_t=le>=12?"PM":"AM";return`${le%12||12}:${oe} ${_t}`},S=F=>{const K=typeof F=="string"?new Date(F):F;return new Date(K.toLocaleString("en-US",{timeZone:"America/Los_Angeles"}))};R.useEffect(()=>{(async()=>{try{const oe=(await bt(Qe(ve,"Besas"))).docs.map(le=>{const _t=le.data(),nt={};return Object.entries(_t.officeHours||{}).forEach(([pn,We])=>{typeof We=="object"&&"start"in We&&"end"in We?nt[pn]={available:We.available||!1,timeSlots:We.available?[{id:Math.random().toString(36).substr(2,9),start:We.start||"09:00",end:We.end||"17:00"}]:[]}:nt[pn]=We||{available:!1,timeSlots:[]}}),{id:le.id,..._t,officeHours:nt}});console.log("Fetched BESAs:",oe),e(oe)}catch(K){console.error("Error fetching besas from Firestore:",K)}})()},[]),R.useEffect(()=>{(async()=>{try{const oe=(await bt(Qe(ve,"mockTours"))).docs.map(le=>({tourId:le.id,...le.data()}));c(oe)}catch(K){console.error("Error fetching tours from Firestore:",K)}})()},[]),R.useEffect(()=>{(async()=>{try{const oe=(await bt(Qe(ve,"Bookings"))).docs.map(le=>({tourId:le.id,...le.data()}));d(oe)}catch(K){console.error("Error fetching bookings from Firestore:",K)}})()},[]);const C=b(n),v=y(C),H=w(C),G=A(v),X=(()=>{const F=[];let K=H;for(;K<=G;)F.push(K),K=D(K,1);return F})(),O=F=>{i(F)},z=()=>{const F=S(new Date);r(F),i(F)},q=()=>r(x(n,1)),Z=()=>r(E(n,1)),ue=P(S(s),"MM-dd-yyyy"),de=u.filter(F=>{const K=S(F.date);return P(K,"MM-dd-yyyy")===ue}),Je=P(s,"EEEE").toLowerCase(),be=()=>{const K=P(new Date,"MM-dd-yyyy");return u.filter(oe=>k==="upcoming"?oe.date>=K:k==="past"?oe.date<K:!0).sort((oe,le)=>oe.date.localeCompare(le.date))},Ae=()=>{const F=be(),K={};return F.forEach(oe=>{const le=oe.date;K[le]||(K[le]=[]),K[le].push(oe)}),K};return o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Schedule Management"}),o.jsx("p",{className:"text-gray-600",children:"View and manage tour schedules and office hours"}),o.jsxs("div",{className:"mt-4 flex space-x-2",children:[o.jsxs("button",{onClick:()=>f("calendar"),className:`flex items-center space-x-1 px-3 py-2 rounded-lg text-sm font-medium ${p==="calendar"?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"}`,children:[o.jsx(rn,{className:"h-4 w-4"}),o.jsx("span",{children:"Calendar"})]}),o.jsxs("button",{onClick:()=>f("list"),className:`flex items-center space-x-1 px-3 py-2 rounded-lg text-sm font-medium ${p==="list"?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"}`,children:[o.jsx(oS,{className:"h-4 w-4"}),o.jsx("span",{children:"List"})]})]})]}),p==="calendar"?o.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[o.jsx("div",{className:"lg:col-span-2",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("button",{onClick:q,className:"text-lg px-3 py-1 text-black hover:bg-blue-50 rounded-lg",children:"<"}),o.jsx("h2",{className:"text-xl font-bold text-gray-900",children:P(n,"MMMM yyyy")}),o.jsx("button",{onClick:Z,className:"text-lg px-3 py-1 text-black hover:bg-blue-50 rounded-lg",children:">"})]}),o.jsx("button",{onClick:z,className:"text-md px-3 py-1 text-blue-600 hover:bg-blue-50 rounded-lg",children:"Today"})]}),o.jsx("div",{className:"grid grid-cols-7 gap-1 mb-4",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(F=>o.jsx("div",{className:"p-2 text-center text-sm font-medium text-gray-500",children:F},F))}),o.jsx("div",{className:"grid grid-cols-7 gap-1",children:X.map((F,K)=>{const oe=V(F,s),le=N(F,n),_t=u.some(nt=>{const pn=S(nt.date);return V(pn,F)});return o.jsx("div",{onClick:()=>O(F),className:`p-2 text-center text-sm h-12 flex items-center justify-center rounded-lg cursor-pointer
                        ${oe?"bg-blue-100 text-blue-800 font-medium":_t?"border border-blue-400 text-blue-700 font-medium hover:bg-blue-50":le?"hover:bg-gray-100 text-gray-900":"text-gray-300"}
                      `,children:F.getDate()},K)})})]})}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[o.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:["Tours for ",P(s,"MMMM d, yyyy")]}),o.jsx("div",{className:"space-y-4",children:de.length>0?de.map(F=>o.jsx("div",{className:"border-l-4 border-blue-500 pl-4",children:o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-gray-900",children:F.tourType}),o.jsxs("p",{className:"text-sm text-gray-500",children:[P(S(F.date),"MMM d, yyyy")," at ",I(F.time)]}),o.jsxs("p",{className:"text-sm text-gray-600",children:[F.attendees," attendees"]}),o.jsxs("p",{className:"text-sm text-gray-600",children:[F.firstName," ",F.lastName]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${F.status==="confirmed"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:F.status}),o.jsx("button",{onClick:()=>T(F),className:"p-1 text-blue-600 hover:bg-blue-50 rounded",children:o.jsx(na,{className:"h-4 w-4"})})]})]})},F.tourId)):o.jsx("p",{className:"text-gray-500",children:"No tours scheduled."})})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[o.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:[P(s,"MMMM d, yyyy")," Coverage"]}),o.jsxs("div",{className:"space-y-3",children:[t.filter(F=>{var K;return(K=F.officeHours[Je])==null?void 0:K.available}).map(F=>o.jsxs("div",{className:"mb-2",children:[o.jsx("span",{className:"text-sm text-gray-900 font-semibold",children:F.name}),F.officeHours[Je].timeSlots.length>0?o.jsx("div",{className:"ml-2 flex flex-wrap gap-2 mt-1",children:F.officeHours[Je].timeSlots.map(K=>o.jsxs("span",{className:"text-xs font-medium text-blue-600 bg-blue-50 px-2 py-1 rounded",children:[I(K.start),"  ",I(K.end)]},K.id))}):o.jsx("span",{className:"ml-2 text-xs text-gray-500",children:"No time slots"})]},F.id)),t.filter(F=>{var K;return(K=F.officeHours[Je])==null?void 0:K.available}).length===0&&o.jsx("p",{className:"text-gray-500",children:"No BESA coverage for this day."})]})]})]})]}):o.jsx("div",{className:"space-y-6",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[o.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Tour Schedule"}),o.jsxs("div",{className:"flex space-x-2 mb-4",children:[o.jsx("button",{onClick:()=>j("upcoming"),className:`px-3 py-2 rounded-lg text-sm font-medium ${k==="upcoming"?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"}`,children:"Upcoming"}),o.jsx("button",{onClick:()=>j("past"),className:`px-3 py-2 rounded-lg text-sm font-medium ${k==="past"?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"}`,children:"Past"}),o.jsx("button",{onClick:()=>j("all"),className:`px-3 py-2 rounded-lg text-sm font-medium ${k==="all"?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"}`,children:"All"})]}),o.jsx("div",{className:"space-y-6 max-h-96 overflow-y-auto max-h-[80vh]",children:Object.keys(Ae()).length>0?Object.entries(Ae()).map(([F,K])=>{const oe=new Date(F);return o.jsxs("div",{className:"border-b border-gray-100 pb-4 last:border-b-0",children:[o.jsx("h4",{className:"font-bold text-gray-900 mb-3",children:P(oe,"MMMM d, yyyy")}),o.jsx("div",{className:"space-y-3 ml-4",children:K.map(le=>o.jsx("div",{className:"border border-gray-200 rounded-lg p-3",children:o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-gray-900",children:le.tourType}),o.jsx("p",{className:"text-sm text-gray-500",children:I(le.time)}),o.jsxs("p",{className:"text-md text-gray-600",children:[le.firstName," ",le.lastName]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${le.status==="confirmed"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:le.status}),o.jsx("button",{onClick:()=>T(le),className:"p-1 text-blue-600 hover:bg-blue-50 rounded",children:o.jsx(na,{className:"h-4 w-4"})})]})]})},le.tourId))})]},F)}):o.jsx("p",{className:"text-gray-500",children:k==="upcoming"?"No upcoming tours scheduled.":k==="past"?"No past tours found.":"No tours scheduled."})})]})}),m&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 max-w-md w-full mx-4",children:[o.jsxs("div",{className:"flex justify-between items-start mb-4",children:[o.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Booking Details"}),o.jsx("button",{onClick:()=>T(null),className:"text-gray-400 hover:text-gray-600 text-xl",children:""})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Contact Name:"}),o.jsxs("p",{className:"text-sm text-gray-900",children:[m.firstName," ",m.lastName]})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Tour Type:"}),o.jsx("p",{className:"text-sm text-gray-900",children:m.tourType})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Date & Time:"}),o.jsxs("p",{className:"text-sm text-gray-900",children:[P(S(m.date),"MMMM d, yyyy")," at ",I(m.time)]})]}),o.jsx("div",{className:"grid grid-cols-2 gap-4",children:o.jsxs("div",{children:[o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Attendees:"}),o.jsx("p",{className:"text-sm text-gray-900",children:m.maxAttendees})]})}),o.jsxs("div",{children:[o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Contact Email:"}),o.jsx("p",{className:"text-sm text-gray-900",children:m.email})]}),m.phone&&o.jsxs("div",{children:[o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Phone:"}),o.jsx("p",{className:"text-sm text-gray-900",children:m.phone})]}),m.organization&&o.jsxs("div",{children:[o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Organization:"}),o.jsx("p",{className:"text-sm text-gray-900",children:m.organization})]}),m.role&&o.jsxs("div",{children:[o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Role:"}),o.jsx("p",{className:"text-sm text-gray-900",children:m.role})]}),m.interests&&o.jsxs("div",{children:[o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Interests:"}),o.jsx("p",{className:"text-sm text-gray-900",children:m.interests})]}),m.besas&&o.jsxs("div",{children:[o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Assigned BESA:"}),o.jsx("p",{className:"text-sm text-gray-900",children:m.besas})]}),m.interests&&m.interests.length>0&&o.jsxs("div",{children:[o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Interests:"}),o.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:m.interests.map((F,K)=>o.jsx("span",{className:"text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded",children:F},K))})]}),m.leadGuide&&o.jsxs("div",{children:[o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Lead Guide:"}),o.jsx("p",{className:"text-sm text-gray-900",children:m.leadGuide})]}),m.notes&&o.jsxs("div",{children:[o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Notes:"}),o.jsx("p",{className:"text-sm text-gray-900",children:m.notes})]}),m.status&&o.jsxs("div",{children:[o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Status:"}),o.jsx("span",{className:`ml-2 px-2 py-1 text-xs font-semibold rounded-full ${m.status==="confirmed"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:m.status})]})]})]})})]})}const v0=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];function cP({onBack:t,editingTour:e}){const[n,r]=R.useState(1),[s,i]=R.useState(e||{tourId:"",title:"",description:"",duration:60,durationUnit:"minutes",maxAttendees:10,location:"",zoomLink:"",autoGenerateZoom:!1,weeklyHours:{},dateSpecificHours:[],frequency:60,frequencyUnit:"minutes",registrationLimit:10,minNotice:24,minNoticeUnit:"hours",maxNotice:30,maxNoticeUnit:"days",bufferTime:15,bufferUnit:"minutes",cancellationPolicy:"",reschedulingPolicy:"",intakeForm:{firstName:!0,lastName:!0,email:!0,phone:!1,attendeeCount:!0,majorsInterested:!1,customQuestions:[]},reminderEmails:[{timing:24,unit:"hours"}],sessionInstructions:"",published:!1}),a=!!e,c=[{number:1,title:"Basic Info",icon:oi},{number:2,title:"Location",icon:_n},{number:3,title:"Availability",icon:rn},{number:4,title:"Scheduling Rules",icon:cS},{number:5,title:"Intake Form",icon:Jt},{number:6,title:"Notifications",icon:eS},{number:7,title:"Review",icon:Ir}],u=y=>{i(w=>({...w,...y}))},d=y=>{const w={start:"09:00",end:"17:00"};u({weeklyHours:{...s.weeklyHours,[y]:[...s.weeklyHours[y]||[],w]}})},p=(y,w)=>{const D=(s.weeklyHours[y]||[]).filter((V,N)=>N!==w);u({weeklyHours:{...s.weeklyHours,[y]:D}})},f=()=>{const y={question:"",type:"text",required:!1,options:[]};u({intakeForm:{...s.intakeForm,customQuestions:[...s.intakeForm.customQuestions,y]}})},m=y=>{const w=s.intakeForm.customQuestions.filter((A,D)=>D!==y);u({intakeForm:{...s.intakeForm,customQuestions:w}})},T=()=>{u({reminderEmails:[...s.reminderEmails,{timing:24,unit:"hours"}]})},k=y=>{u({reminderEmails:s.reminderEmails.filter((w,A)=>A!==y)})},j=()=>{switch(n){case 1:return s.title.trim()&&s.description.trim()&&s.duration>0;case 2:return s.location.trim()||s.zoomLink.trim()||s.autoGenerateZoom;default:return!0}},P=()=>{switch(n){case 1:return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tour Title *"}),o.jsx("input",{type:"text",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g. Engineering Building Tour",value:s.title,onChange:y=>u({title:y.target.value})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description *"}),o.jsx("textarea",{rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Describe what visitors will see and experience during this tour...",value:s.description,onChange:y=>u({description:y.target.value})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Duration *"}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("input",{type:"number",min:"1",className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:s.duration,onChange:y=>u({duration:parseInt(y.target.value)||0})}),o.jsxs("select",{className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:s.durationUnit,onChange:y=>u({durationUnit:y.target.value}),children:[o.jsx("option",{value:"minutes",children:"Minutes"}),o.jsx("option",{value:"hours",children:"Hours"})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Attendees *"}),o.jsx("input",{type:"number",min:"1",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:s.maxAttendees,onChange:y=>u({maxAttendees:parseInt(y.target.value)||1})})]})]})]});case 2:return o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-start space-x-2",children:[o.jsx(Xv,{className:"h-5 w-5 text-blue-600 mt-0.5"}),o.jsx("p",{className:"text-sm text-blue-800",children:"Tours can be in-person, virtual, or hybrid. At least one location option is required."})]})}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[o.jsx(_n,{className:"inline h-4 w-4 mr-1"}),"Physical Location"]}),o.jsx("input",{type:"text",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g. Baskin Engineering Building, Room 101",value:s.location,onChange:y=>u({location:y.target.value})})]}),o.jsxs("div",{className:"border-t pt-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[o.jsx(ow,{className:"inline h-4 w-4 mr-1"}),"Virtual Option"]}),o.jsxs("label",{className:"flex items-center space-x-2",children:[o.jsx("input",{type:"checkbox",checked:s.autoGenerateZoom,onChange:y=>u({autoGenerateZoom:y.target.checked,zoomLink:y.target.checked?"":s.zoomLink}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),o.jsx("span",{className:"text-sm text-gray-600",children:"Auto-generate Zoom link"})]})]}),!s.autoGenerateZoom&&o.jsx("input",{type:"url",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://zoom.us/j/...",value:s.zoomLink,onChange:y=>u({zoomLink:y.target.value})}),s.autoGenerateZoom&&o.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:o.jsxs("p",{className:"text-sm text-gray-600",children:[o.jsx(tw,{className:"inline h-4 w-4 mr-1"}),"A Zoom link will be automatically generated when the tour is published"]})})]})]});case 3:return o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Weekly Recurring Hours"}),o.jsx("div",{className:"space-y-4",children:v0.map(y=>o.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h4",{className:"font-medium text-gray-900",children:y}),o.jsx("button",{type:"button",onClick:()=>d(y),className:"text-blue-600 hover:bg-blue-50 p-1 rounded-lg",children:o.jsx(ds,{className:"h-4 w-4"})})]}),(s.weeklyHours[y]||[]).length===0&&o.jsx("p",{className:"text-gray-500 text-sm",children:"No time slots set for this day"}),(s.weeklyHours[y]||[]).map((w,A)=>o.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[o.jsx("input",{type:"time",className:"px-3 py-2 border border-gray-300 rounded-lg",value:w.start,onChange:D=>{const V=[...s.weeklyHours[y]||[]];V[A]={...w,start:D.target.value},u({weeklyHours:{...s.weeklyHours,[y]:V}})}}),o.jsx("span",{className:"text-gray-500",children:"to"}),o.jsx("input",{type:"time",className:"px-3 py-2 border border-gray-300 rounded-lg",value:w.end,onChange:D=>{const V=[...s.weeklyHours[y]||[]];V[A]={...w,end:D.target.value},u({weeklyHours:{...s.weeklyHours,[y]:V}})}}),o.jsx("button",{type:"button",onClick:()=>p(y,A),className:"text-red-600 hover:bg-red-50 p-1 rounded-lg",children:o.jsx(kr,{className:"h-4 w-4"})})]},A))]},y))})]}),o.jsxs("div",{className:"border-t pt-6",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Tour Frequency"}),o.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start new tour every:"}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("input",{type:"number",min:"1",className:"w-24 px-3 py-2 border border-gray-300 rounded-lg",value:s.frequency,onChange:y=>u({frequency:parseInt(y.target.value)||1})}),o.jsxs("select",{className:"px-3 py-2 border border-gray-300 rounded-lg",value:s.frequencyUnit,onChange:y=>u({frequencyUnit:y.target.value}),children:[o.jsx("option",{value:"minutes",children:"Minutes"}),o.jsx("option",{value:"hours",children:"Hours"})]})]}),o.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Based on tour duration of ",s.duration," ",s.durationUnit]})]})]})]});case 4:return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Registration Limit"}),o.jsx("input",{type:"number",min:"1",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Maximum people per session",value:s.registrationLimit,onChange:y=>u({registrationLimit:parseInt(y.target.value)||1})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Minimum Notice"}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("input",{type:"number",min:"1",className:"flex-1 px-3 py-3 border border-gray-300 rounded-lg",value:s.minNotice,onChange:y=>u({minNotice:parseInt(y.target.value)||1})}),o.jsxs("select",{className:"px-3 py-3 border border-gray-300 rounded-lg",value:s.minNoticeUnit,onChange:y=>u({minNoticeUnit:y.target.value}),children:[o.jsx("option",{value:"hours",children:"Hours"}),o.jsx("option",{value:"days",children:"Days"}),o.jsx("option",{value:"weeks",children:"Weeks"})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Maximum Notice"}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("input",{type:"number",min:"1",className:"flex-1 px-3 py-3 border border-gray-300 rounded-lg",value:s.maxNotice,onChange:y=>u({maxNotice:parseInt(y.target.value)||1})}),o.jsxs("select",{className:"px-3 py-3 border border-gray-300 rounded-lg",value:s.maxNoticeUnit,onChange:y=>u({maxNoticeUnit:y.target.value}),children:[o.jsx("option",{value:"days",children:"Days"}),o.jsx("option",{value:"weeks",children:"Weeks"}),o.jsx("option",{value:"months",children:"Months"})]})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Buffer Time Between Tours"}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("input",{type:"number",min:"0",className:"w-24 px-3 py-3 border border-gray-300 rounded-lg",value:s.bufferTime,onChange:y=>u({bufferTime:parseInt(y.target.value)||0})}),o.jsxs("select",{className:"px-3 py-3 border border-gray-300 rounded-lg",value:s.bufferUnit,onChange:y=>u({bufferUnit:y.target.value}),children:[o.jsx("option",{value:"minutes",children:"Minutes"}),o.jsx("option",{value:"hours",children:"Hours"})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cancellation Policy"}),o.jsx("textarea",{rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g. To cancel or reschedule, please email us at least 24 hours in advance...",value:s.cancellationPolicy,onChange:y=>u({cancellationPolicy:y.target.value})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rescheduling Policy"}),o.jsx("textarea",{rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g. Rescheduling must be requested at least 48 hours in advance...",value:s.reschedulingPolicy,onChange:y=>u({reschedulingPolicy:y.target.value})})]})]});case 5:return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Required Information"}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries({firstName:"First Name",lastName:"Last Name",email:"Email Address",phone:"Phone Number",attendeeCount:"Number of Attendees",majorsInterested:"Majors of Interest"}).map(([y,w])=>o.jsxs("label",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",checked:s.intakeForm[y],onChange:A=>u({intakeForm:{...s.intakeForm,[y]:A.target.checked}}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),o.jsx("span",{className:"text-sm text-gray-700",children:w})]},y))})]}),o.jsxs("div",{className:"border-t pt-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Custom Questions"}),o.jsxs("button",{type:"button",onClick:f,className:"text-blue-600 hover:bg-blue-50 px-3 py-2 rounded-lg flex items-center space-x-1",children:[o.jsx(ds,{className:"h-4 w-4"}),o.jsx("span",{children:"Add Question"})]})]}),o.jsx("div",{className:"space-y-4",children:s.intakeForm.customQuestions.map((y,w)=>o.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsx("div",{className:"flex-1 mr-4",children:o.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"Enter your question...",value:y.question,onChange:A=>{const D=[...s.intakeForm.customQuestions];D[w]={...y,question:A.target.value},u({intakeForm:{...s.intakeForm,customQuestions:D}})}})}),o.jsx("button",{type:"button",onClick:()=>m(w),className:"text-red-600 hover:bg-red-50 p-1 rounded-lg",children:o.jsx(kr,{className:"h-4 w-4"})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("select",{className:"px-3 py-2 border border-gray-300 rounded-lg",value:y.type,onChange:A=>{const D=[...s.intakeForm.customQuestions];D[w]={...y,type:A.target.value},u({intakeForm:{...s.intakeForm,customQuestions:D}})},children:[o.jsx("option",{value:"text",children:"Short Text"}),o.jsx("option",{value:"textarea",children:"Long Text"}),o.jsx("option",{value:"select",children:"Dropdown"}),o.jsx("option",{value:"checkbox",children:"Checkbox"})]}),o.jsxs("label",{className:"flex items-center space-x-2",children:[o.jsx("input",{type:"checkbox",checked:y.required,onChange:A=>{const D=[...s.intakeForm.customQuestions];D[w]={...y,required:A.target.checked},u({intakeForm:{...s.intakeForm,customQuestions:D}})},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),o.jsx("span",{className:"text-sm text-gray-600",children:"Required"})]})]})]},w))})]})]});case 6:return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Reminder Emails"}),o.jsxs("button",{type:"button",onClick:T,className:"text-blue-600 hover:bg-blue-50 px-3 py-2 rounded-lg flex items-center space-x-1",children:[o.jsx(ds,{className:"h-4 w-4"}),o.jsx("span",{children:"Add Reminder"})]})]}),o.jsx("div",{className:"space-y-3",children:s.reminderEmails.map((y,w)=>o.jsxs("div",{className:"flex items-center space-x-3 bg-gray-50 p-3 rounded-lg",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Send reminder"}),o.jsx("input",{type:"number",min:"1",className:"w-20 px-2 py-1 border border-gray-300 rounded",value:y.timing,onChange:A=>{const D=[...s.reminderEmails];D[w]={...y,timing:parseInt(A.target.value)||1},u({reminderEmails:D})}}),o.jsxs("select",{className:"px-2 py-1 border border-gray-300 rounded",value:y.unit,onChange:A=>{const D=[...s.reminderEmails];D[w]={...y,unit:A.target.value},u({reminderEmails:D})},children:[o.jsx("option",{value:"hours",children:"Hours"}),o.jsx("option",{value:"days",children:"Days"}),o.jsx("option",{value:"weeks",children:"Weeks"})]}),o.jsx("span",{className:"text-sm text-gray-600",children:"before tour"}),o.jsx("button",{type:"button",onClick:()=>k(w),className:"text-red-600 hover:bg-red-50 p-1 rounded",children:o.jsx(kr,{className:"h-4 w-4"})})]},w))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Instructions"}),o.jsx("textarea",{rows:6,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Instructions that will be sent to attendees before the tour (parking info, what to bring, meeting location, etc.)",value:s.sessionInstructions,onChange:y=>u({sessionInstructions:y.target.value})})]})]});case 7:return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6 text-center",children:[o.jsx(Ir,{className:"h-12 w-12 text-green-600 mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Tour Setup Complete!"}),o.jsx("p",{className:"text-gray-600",children:"Review your tour details below and choose how to proceed."})]}),o.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[o.jsx("h4",{className:"font-medium text-gray-900 mb-4",children:"Tour Summary"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-medium text-gray-700",children:"Title:"}),o.jsx("span",{className:"ml-2 text-gray-900",children:s.title})]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-medium text-gray-700",children:"Duration:"}),o.jsxs("span",{className:"ml-2 text-gray-900",children:[s.duration," ",s.durationUnit]})]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-medium text-gray-700",children:"Max Attendees:"}),o.jsx("span",{className:"ml-2 text-gray-900",children:s.maxAttendees})]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-medium text-gray-700",children:"Location:"}),o.jsx("span",{className:"ml-2 text-gray-900",children:s.location||(s.autoGenerateZoom?"Virtual (Zoom)":s.zoomLink?"Virtual":"Not set")})]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-medium text-gray-700",children:"Frequency:"}),o.jsxs("span",{className:"ml-2 text-gray-900",children:["Every ",s.frequency," ",s.frequencyUnit]})]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-medium text-gray-700",children:"Notice Required:"}),o.jsxs("span",{className:"ml-2 text-gray-900",children:[s.minNotice," ",s.minNoticeUnit," - ",s.maxNotice," ",s.maxNoticeUnit]})]})]}),o.jsxs("div",{className:"mt-4 pt-4 border-t",children:[o.jsx("span",{className:"font-medium text-gray-700",children:"Weekly Schedule:"}),o.jsx("div",{className:"mt-2 space-y-1",children:v0.map(y=>{const w=s.weeklyHours[y]||[];return o.jsxs("div",{className:"text-sm",children:[o.jsxs("span",{className:"inline-block w-20 font-medium",children:[y,":"]}),w.length===0?o.jsx("span",{className:"text-gray-500",children:"Unavailable"}):w.map((A,D)=>o.jsxs("span",{className:"text-gray-900 mr-3",children:[A.start," - ",A.end]},D))]},y)})})]})]})]});default:return o.jsx("div",{children:"Step not found"})}},b=async y=>{try{if(a&&y.tourId){const{tourId:w,...A}=y;await Si(mn(ve,"Tours",w),A),alert("Tour updated!")}else{const{tourId:w,...A}=y;await J_(Qe(ve,"Tours"),{...A,createdAt:new Date().toISOString().split("T")[0],upcomingBookings:0,totalBookings:0}),alert("Tour created!")}t()}catch(w){console.error("Error saving tour:",w),alert("Failed to save tour. Please try again.")}};return o.jsxs("div",{className:"min-h-screen bg-gray-50",children:[o.jsx("div",{className:"bg-white border-b border-gray-200",children:o.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx("button",{onClick:t,className:"text-gray-600 hover:text-gray-900",children:o.jsx(Lr,{className:"h-5 w-5"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:a?"Edit Tour":"Create New Tour"}),o.jsxs("p",{className:"text-gray-600",children:["Step ",n," of ",c.length]})]})]})})}),o.jsx("div",{className:"bg-white border-b border-gray-200",children:o.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:o.jsx("div",{className:"flex items-center justify-between",children:c.map((y,w)=>{const A=y.icon,D=n===y.number,V=n>y.number;return o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full border-2 ${V?"bg-green-600 border-green-600 text-white":D?"bg-blue-600 border-blue-600 text-white":"border-gray-300 text-gray-400"}`,children:V?o.jsx(Ir,{className:"h-5 w-5"}):o.jsx(A,{className:"h-5 w-5"})}),o.jsx("div",{className:"ml-3 hidden sm:block",children:o.jsx("div",{className:`text-sm font-medium ${D?"text-blue-600":V?"text-green-600":"text-gray-500"}`,children:y.title})}),w<c.length-1&&o.jsx("div",{className:`hidden sm:block w-12 h-0.5 ml-6 ${n>y.number?"bg-green-600":"bg-gray-300"}`})]},y.number)})})})}),o.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:c[n-1].title}),n===1&&o.jsx("p",{className:"text-gray-600",children:"Let's start with the basic information about your tour."}),n===2&&o.jsx("p",{className:"text-gray-600",children:"Where will this tour take place? Choose in-person, virtual, or both."}),n===3&&o.jsx("p",{className:"text-gray-600",children:"Set up when this tour will be available for booking."}),n===4&&o.jsx("p",{className:"text-gray-600",children:"Configure booking rules and policies for this tour."}),n===5&&o.jsx("p",{className:"text-gray-600",children:"Customize what information you'll collect from tour attendees."}),n===6&&o.jsx("p",{className:"text-gray-600",children:"Set up automated communications for tour attendees."}),n===7&&o.jsx("p",{className:"text-gray-600",children:"Review everything and publish your tour."})]}),o.jsx("div",{className:"mb-8",children:P()}),o.jsxs("div",{className:"flex justify-between items-center pt-6 border-t border-gray-200",children:[o.jsxs("button",{type:"button",onClick:()=>r(Math.max(1,n-1)),disabled:n===1,className:`flex items-center space-x-2 px-4 py-2 rounded-lg ${n===1?"text-gray-400 cursor-not-allowed":"text-gray-700 hover:bg-gray-100"}`,children:[o.jsx(Lr,{className:"h-4 w-4"}),o.jsx("span",{children:"Previous"})]}),o.jsx("div",{className:"flex items-center space-x-2",children:n<c.length?o.jsxs("button",{type:"button",onClick:()=>r(n+1),disabled:!j(),className:`flex items-center space-x-2 px-6 py-2 rounded-lg ${j()?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:[o.jsx("span",{children:"Continue"}),o.jsx(Zv,{className:"h-4 w-4"})]}):o.jsxs("div",{className:"flex space-x-3",children:[o.jsx("button",{type:"button",onClick:()=>b({...s,published:!1}),className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Save as Draft"}),o.jsx("button",{type:"button",onClick:()=>b({...s,published:!0}),className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:a?"Update & Publish":"Publish Tour"})]})})]})]})})]})}function uP({onCreateTour:t,onEditTour:e,tours:n,setTours:r}){const[s]=R.useState(""),[i]=R.useState("all");R.useEffect(()=>{const f=Qe(ve,"Tours"),m=sj(f,T=>{const k=T.docs.map(j=>({tourId:j.id,...j.data()}));r(k)});return()=>m()},[r]);const a=async f=>{if(confirm("Are you sure you want to delete this tour? This action cannot be undone."))try{await Sm(mn(ve,"Tours",f)),r(n.filter(m=>m.tourId!==f))}catch(m){console.error("Error deleting tour:",m)}},c=async f=>{const m=n.find(T=>T.tourId===f);if(m)try{const T=mn(ve,"Tours",f);await Si(T,{published:!m.published}),r(n.map(k=>k.tourId===f?{...k,published:!k.published}:k))}catch(T){console.error("Error toggling publish:",T)}},u=f=>f.location&&(f.zoomLink||f.autoGenerateZoom)?"Hybrid":f.location?"In-Person":f.zoomLink||f.autoGenerateZoom?"Virtual":"Not Set",d=f=>{const m=Object.keys(f.weeklyHours).filter(T=>f.weeklyHours[T]&&f.weeklyHours[T].length>0);return m.length>0?m.join(", "):"No schedule set"},p=n.filter(f=>{const m=f.title.toLowerCase().includes(s.toLowerCase())||f.description.toLowerCase().includes(s.toLowerCase()),T=i==="all"||i==="published"&&f.published||i==="draft"&&!f.published;return m&&T});return o.jsxs("div",{className:"min-h-screen bg-gray-50",children:[o.jsx("div",{className:"bg-white border-b border-gray-200",children:o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Tours Management"}),o.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your campus tours and availability"})]}),o.jsxs("button",{onClick:t,className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 flex items-center space-x-2 font-medium",children:[o.jsx(ds,{className:"h-5 w-5"}),o.jsx("span",{children:"Create New Tour"})]})]})})}),o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:o.jsx("div",{className:"space-y-4",children:p.length===0?o.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-12 text-center",children:[o.jsx(oi,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No tours found"}),o.jsx("p",{className:"text-gray-600 mb-6",children:s||i!=="all"?"Try adjusting your search or filters":"Get started by creating your first tour"}),!s&&i==="all"&&o.jsx("button",{onClick:t,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700",children:"Create Your First Tour"})]}):p.map(f=>o.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 hover:shadow-md transition-shadow",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[o.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:f.title}),o.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${f.published?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:f.published?"Published":"Draft"})]}),o.jsx("p",{className:"text-gray-600 mb-4 line-clamp-2",children:f.description}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Ft,{className:"h-4 w-4 text-gray-400"}),o.jsxs("span",{className:"text-gray-600",children:[f.duration," ",f.durationUnit]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Jt,{className:"h-4 w-4 text-gray-400"}),o.jsxs("span",{className:"text-gray-600",children:["Max ",f.maxAttendees]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[u(f)==="Virtual"?o.jsx(ow,{className:"h-4 w-4 text-gray-400"}):u(f)==="Hybrid"?o.jsx(tw,{className:"h-4 w-4 text-gray-400"}):o.jsx(_n,{className:"h-4 w-4 text-gray-400"}),o.jsx("span",{className:"text-gray-600",children:u(f)})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(rn,{className:"h-4 w-4 text-gray-400"}),o.jsx("span",{className:"text-gray-600 truncate",children:d(f)})]})]}),f.published&&o.jsx("div",{className:"flex items-center space-x-6 mt-4 pt-4 border-t border-gray-100"})]}),o.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[o.jsx("button",{onClick:()=>alert(`Viewing tour: ${f.title}`),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg",title:"View Tour",children:o.jsx(na,{className:"h-4 w-4"})}),o.jsx("button",{onClick:()=>e(f),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg",title:"Edit Tour",children:o.jsx(rw,{className:"h-4 w-4"})}),o.jsx("button",{onClick:()=>c(f.tourId),className:`p-2 rounded-lg ${f.published?"text-gray-400 hover:text-yellow-600 hover:bg-yellow-50":"text-gray-400 hover:text-green-600 hover:bg-green-50"}`,title:f.published?"Unpublish Tour":"Publish Tour",children:f.published?o.jsx(na,{className:"h-4 w-4"}):o.jsx(Ir,{className:"h-4 w-4"})}),o.jsx("button",{onClick:()=>a(f.tourId),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg",title:"Delete Tour",children:o.jsx(zf,{className:"h-4 w-4"})})]})]})},f.tourId))})})]})}function dP(){const[t,e]=R.useState("dashboard"),[n,r]=R.useState(void 0),[s,i]=R.useState([]),a=()=>{r(void 0),e("create")},c=d=>{r(d),e("create")},u=d=>{i(n?p=>p.map(f=>f.tourId===d.tourId?d:f):p=>[...p,d]),r(void 0)};return o.jsx(o.Fragment,{children:t==="dashboard"?o.jsx(uP,{tours:s,setTours:i,onCreateTour:a,onEditTour:c}):o.jsx(cP,{onBack:()=>e("dashboard"),editingTour:n,onSaveTour:u})})}function hP(){var w,A,D,V,N;const[t,e]=R.useState([]),[n,r]=R.useState([]),[s,i]=R.useState(null),[a,c]=R.useState(null),[u,d]=R.useState(!1),[p,f]=R.useState({name:"",email:"",role:"BESA",status:"active"});R.useEffect(()=>{(async()=>{try{const I=(await bt(Qe(ve,"Besas"))).docs.map(H=>{const G=H.data();return{id:H.id,name:G.name,email:G.email,role:G.role,status:G.status,toursThisWeek:0,totalTours:0}}),C=(await bt(Qe(ve,"Bookings"))).docs.map(H=>{const G=H.data();return{id:H.id,...G,besas:G.besas?G.besas:G.besa?[G.besa]:[]}});r(C);const v=I.map(H=>{const G=C.filter(q=>{var Z;return((Z=q.besas)==null?void 0:Z.includes(H.name))||q.besa===H.name}),te=new Date,X=new Date(te);X.setDate(te.getDate()-te.getDay());const O=new Date(X);O.setDate(X.getDate()+6);const z=G.filter(q=>{const Z=new Date(q.date);return Z>=X&&Z<=O}).length;return{...H,toursThisWeek:z,totalTours:G.length}});e(v)}catch(E){console.error("Error fetching data from Firestore:",E)}})()},[]);const m=(x,E,I)=>{e(S=>S.map(C=>C.id===x?{...C,[E]:I}:C))},T=async x=>{x.preventDefault();try{const E=await J_(Qe(ve,"Besas"),{...p,officeHours:k});e(I=>[...I,{id:E.id,...p,toursThisWeek:0,totalTours:0}]),d(!1),f({name:"",email:"",role:"BESA",status:"active"})}catch(E){console.error("Error adding new BESA:",E),alert("Failed to add new BESA. Please try again.")}},k={monday:{available:!1,start:"",end:""},tuesday:{available:!1,start:"",end:""},wednesday:{available:!1,start:"",end:""},thursday:{available:!1,start:"",end:""},friday:{available:!1,start:"",end:""},saturday:{available:!1,start:"",end:""},sunday:{available:!1,start:"",end:""}},j=async()=>{if(s!==null)try{const x=t.find(I=>I.id===s);if(!x)return;const E=mn(ve,"Besas",x.id);await Si(E,{name:x.name,email:x.email,role:x.role,status:x.status}),i(null),alert("BESA updated successfully!")}catch(x){console.error("Error updating BESA in Firestore:",x),alert("Failed to save changes. Please try again.")}},P=x=>n.filter(E=>{var I;return((I=E.besas)==null?void 0:I.includes(x))||E.besa===x}).sort((E,I)=>new Date(E.date).getTime()-new Date(I.date).getTime()),b=(x,E)=>{c(E)},y=x=>new Date(x).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"});return o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[o.jsxs("div",{className:"flex justify-between items-center mb-8",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"BESA Management"}),o.jsx("p",{className:"text-gray-600",children:"Manage BESA accounts and permissions"})]}),o.jsxs("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2",onClick:()=>d(!0),children:[o.jsx(ai,{className:"h-4 w-4"}),o.jsx("span",{children:"Add New BESA"})]})]}),o.jsx("div",{className:"bg-white rounded-xl shadow-sm border overflow-hidden",children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"BESA"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"This Week"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Tours"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(x=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"h-10 w-10 bg-blue-100 rounded-full flex items-center justify-center",children:o.jsx(ai,{className:"h-5 w-5 text-blue-600"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("button",{onClick:()=>b(x.id,x.name),className:"text-sm font-medium text-blue-600 hover:text-blue-800 hover:underline cursor-pointer",children:x.name}),o.jsx("div",{className:"text-sm text-gray-500",children:x.email})]})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${x.role==="BESA Lead"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:x.role})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(rn,{className:"h-4 w-4 text-gray-400 mr-1"}),x.toursThisWeek]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(Jt,{className:"h-4 w-4 text-gray-400 mr-1"}),x.totalTours]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${x.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:x.status})}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[o.jsx("button",{onClick:()=>i(x.id),className:"text-blue-600 hover:text-blue-900",children:"Edit"}),o.jsx("button",{className:"text-red-600 hover:text-red-900",onClick:async()=>{if(window.confirm(`Are you sure you want to deactivate and delete ${x.name}? This action cannot be undone.`))try{const E=mn(ve,"Besas",x.id);await Sm(E),e(I=>I.filter(S=>S.id!==x.id))}catch(E){console.error("Error deleting BESA:",E),alert("Failed to delete BESA. Please try again.")}},children:"Deactivate"})]})]},x.id))})]})})}),a&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsx("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("h3",{className:"text-2xl font-bold text-gray-900",children:["Tours Assigned to ",a]}),o.jsx("button",{onClick:()=>c(null),className:"text-gray-400 hover:text-gray-600",children:o.jsx(kr,{className:"h-6 w-6"})})]}),o.jsx("div",{className:"space-y-4",children:P(a).length===0?o.jsxs("div",{className:"text-center py-8 text-gray-500",children:[o.jsx(Jt,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),o.jsx("p",{children:"No tours assigned to this BESA yet."})]}):P(a).map((x,E)=>o.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border",children:o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:x.tourType}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm text-gray-600",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(rn,{className:"h-4 w-4 mr-2 text-blue-500"}),o.jsx("span",{children:y(x.date)})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx(Ft,{className:"h-4 w-4 mr-2 text-green-500"}),o.jsx("span",{children:x.time})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx(Jt,{className:"h-4 w-4 mr-2 text-purple-500"}),o.jsxs("span",{children:[x.attendees,"/",x.maxAttendees," attendees"]})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx(ai,{className:"h-4 w-4 mr-2 text-orange-500"}),o.jsxs("span",{children:[x.firstName," ",x.lastName]})]})]}),o.jsxs("div",{className:"mt-2",children:[o.jsxs("p",{className:"text-sm text-gray-600",children:[o.jsx("strong",{children:"Organization:"})," ",x.organization]}),o.jsxs("p",{className:"text-sm text-gray-600",children:[o.jsx("strong",{children:"Contact:"})," ",x.contactEmail]})]})]}),o.jsx("div",{className:"ml-4",children:o.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${new Date(x.date)<new Date?"bg-gray-100 text-gray-800":"bg-green-100 text-green-800"}`,children:new Date(x.date)<new Date?"Completed":"Upcoming"})})]})},x.id||E))}),o.jsx("div",{className:"flex justify-end mt-6",children:o.jsx("button",{onClick:()=>c(null),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300",children:"Close"})})]})})}),s&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsx("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("h3",{className:"text-2xl font-bold text-gray-900",children:["Edit BESA: ",(w=t.find(x=>x.id===s))==null?void 0:w.name]}),o.jsx("button",{onClick:()=>i(null),className:"text-gray-400 hover:text-gray-600",children:o.jsx(kr,{className:"h-6 w-6"})})]}),o.jsx("form",{className:"space-y-6",children:o.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),o.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg",value:((A=t.find(x=>x.id===s))==null?void 0:A.name)||"",onChange:x=>m(s,"name",x.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),o.jsx("input",{type:"email",className:"w-full px-3 py-2 border border-gray-300 rounded-lg",value:((D=t.find(x=>x.id===s))==null?void 0:D.email)||"",onChange:x=>m(s,"email",x.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),o.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg",value:((V=t.find(x=>x.id===s))==null?void 0:V.role)||"BESA",onChange:x=>m(s,"role",x.target.value),children:[o.jsx("option",{value:"BESA",children:"BESA"}),o.jsx("option",{value:"BESA Lead",children:"BESA Lead"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),o.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg",value:((N=t.find(x=>x.id===s))==null?void 0:N.status)||"active",onChange:x=>m(s,"status",x.target.value),children:[o.jsx("option",{value:"active",children:"Active"}),o.jsx("option",{value:"inactive",children:"Inactive"})]})]})]})}),o.jsxs("div",{className:"flex justify-end space-x-4 mt-6",children:[o.jsx("button",{onClick:()=>i(null),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),o.jsxs("button",{onClick:j,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center space-x-2",children:[o.jsx(iw,{className:"h-4 w-4"}),o.jsx("span",{children:"Save Changes"})]})]})]})})}),u&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full p-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Add New BESA"}),o.jsx("button",{onClick:()=>d(!1),className:"text-gray-400 hover:text-gray-600",children:o.jsx(kr,{className:"h-6 w-6"})})]}),o.jsxs("form",{onSubmit:T,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),o.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg",value:p.name,onChange:x=>f({...p,name:x.target.value}),required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),o.jsx("input",{type:"email",className:"w-full px-3 py-2 border border-gray-300 rounded-lg",value:p.email,onChange:x=>f({...p,email:x.target.value}),required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),o.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg",value:p.role,onChange:x=>f({...p,role:x.target.value}),children:[o.jsx("option",{value:"BESA",children:"BESA"}),o.jsx("option",{value:"BESA Lead",children:"BESA Lead"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),o.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg",value:p.status,onChange:x=>f({...p,status:x.target.value}),children:[o.jsx("option",{value:"active",children:"Active"}),o.jsx("option",{value:"inactive",children:"Inactive"})]})]}),o.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[o.jsx("button",{type:"button",onClick:()=>d(!1),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),o.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Add BESA"})]})]})]})})]})}function fP(){const[t,e]=R.useState([]),[n,r]=R.useState(null),[s,i]=R.useState(new Set),a=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],c={monday:"Monday",tuesday:"Tuesday",wednesday:"Wednesday",thursday:"Thursday",friday:"Friday",saturday:"Saturday",sunday:"Sunday"};R.useEffect(()=>{(async()=>{const A=(await bt(Qe(ve,"Besas"))).docs.map(D=>{const V=D.data(),N={};return Object.entries(V.officeHours||{}).forEach(([x,E])=>{typeof E=="object"&&"start"in E&&"end"in E?N[x]={available:!!E.available,timeSlots:E.available?[{id:u(),start:typeof E.start=="string"?E.start:"09:00",end:typeof E.end=="string"?E.end:"17:00"}]:[]}:typeof E=="object"&&"timeSlots"in E?N[x]={available:!!E.available,timeSlots:Array.isArray(E.timeSlots)?E.timeSlots.map(I=>({id:typeof I.id=="string"?I.id:u(),start:typeof I.start=="string"?I.start:"09:00",end:typeof I.end=="string"?I.end:"17:00"})):[]}:N[x]={available:!1,timeSlots:[]}}),{id:D.id,...V,officeHours:N}});e(A)})()},[]);const u=()=>Math.random().toString(36).substr(2,9),d=y=>{if(!y)return"";const[w,A]=y.split(":"),D=parseInt(w,10),V=D>=12?"PM":"AM";return`${D%12||12}:${A} ${V}`},p=y=>{i(w=>{const A=new Set(w);return A.has(y)?A.delete(y):A.add(y),A})},f=()=>{const y={};return a.forEach(w=>{const A=t.filter(D=>{var V,N;return((N=(V=D.officeHours)==null?void 0:V[w])==null?void 0:N.available)&&D.officeHours[w].timeSlots.length>0});if(A.length>0){const D=[];A.forEach(V=>{V.officeHours[w].timeSlots.forEach(N=>{const x=D.find(E=>E.start===N.start&&E.end===N.end);x?x.besas.push(V.name):D.push({start:N.start,end:N.end,besas:[V.name]})})}),D.sort((V,N)=>V.start.localeCompare(N.start)),y[w]={timeSlots:D}}}),y},m=(y,w)=>{e(A=>A.map(D=>D.id===y?{...D,officeHours:{...D.officeHours,[w]:{...D.officeHours[w],timeSlots:[...D.officeHours[w].timeSlots,{id:u(),start:"09:00",end:"10:00"}]}}}:D))},T=(y,w,A)=>{e(D=>D.map(V=>V.id===y?{...V,officeHours:{...V.officeHours,[w]:{...V.officeHours[w],timeSlots:V.officeHours[w].timeSlots.filter(N=>N.id!==A)}}}:V))},k=(y,w,A,D,V)=>{e(N=>N.map(x=>x.id===y?{...x,officeHours:{...x.officeHours,[w]:{...x.officeHours[w],timeSlots:x.officeHours[w].timeSlots.map(E=>E.id===A?{...E,[D]:V}:E)}}}:x))},j=(y,w,A)=>{e(D=>D.map(V=>{var N;return V.id===y?{...V,officeHours:{...V.officeHours,[w]:{...V.officeHours[w],available:A,timeSlots:A?((N=V.officeHours[w])==null?void 0:N.timeSlots)||[{id:u(),start:"09:00",end:"17:00"}]:[]}}}:V}))},P=async y=>{try{const w=mn(ve,"Besas",y.id);await Si(w,{officeHours:y.officeHours}),console.log("Office hours saved!")}catch(w){console.error("Failed to save office hours:",w),alert("Failed to save changes. Please try again.")}},b=f();return o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Office Hours Management"}),o.jsx("p",{className:"text-gray-600",children:"Manage individual BESA office hours and view compiled schedule"})]}),o.jsxs("div",{className:"grid lg:grid-cols-2 gap-8",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Individual BESA Hours"}),t.map(y=>o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border",children:[o.jsxs("div",{className:"flex justify-between items-center p-4 cursor-pointer hover:bg-gray-50 rounded-t-xl",onClick:()=>p(y.id),children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[s.has(y.id)?o.jsx(nS,{className:"h-5 w-5 text-gray-400"}):o.jsx(ew,{className:"h-5 w-5 text-gray-400"}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:y.name}),o.jsx("p",{className:"text-sm text-gray-500",children:y.email})]})]}),s.has(y.id)&&o.jsxs("button",{onClick:async w=>{w.stopPropagation(),n===y.id?(await P(y),r(null)):r(y.id)},className:"flex items-center space-x-1 px-3 py-1 text-blue-600 hover:bg-blue-50 rounded-lg text-sm font-medium",children:[o.jsx(rw,{className:"h-3 w-3"}),o.jsx("span",{children:n===y.id?"Cancel":"Edit"})]})]}),s.has(y.id)&&o.jsxs("div",{className:"px-4 pb-4 border-t border-gray-100",children:[o.jsx("div",{className:"space-y-3 mt-4",children:a.map(w=>{const A=y.officeHours[w]||{available:!1,timeSlots:[]};return o.jsxs("div",{className:"border border-gray-200 rounded-lg p-3",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("span",{className:"text-sm font-medium text-gray-700",children:c[w]}),n===y.id&&o.jsx("input",{type:"checkbox",checked:A.available,onChange:D=>j(y.id,w,D.target.checked),className:"h-4 w-4 text-blue-600"})]}),A.available?o.jsxs("div",{className:"space-y-2",children:[A.timeSlots.map(D=>o.jsx("div",{className:"flex items-center space-x-2",children:n===y.id?o.jsxs(o.Fragment,{children:[o.jsx("input",{type:"time",value:D.start,onChange:V=>k(y.id,w,D.id,"start",V.target.value),className:"px-2 py-1 border border-gray-300 rounded text-xs flex-1"}),o.jsx("span",{className:"text-xs text-gray-500",children:"to"}),o.jsx("input",{type:"time",value:D.end,onChange:V=>k(y.id,w,D.id,"end",V.target.value),className:"px-2 py-1 border border-gray-300 rounded text-xs flex-1"}),A.timeSlots.length>1&&o.jsx("button",{onClick:()=>T(y.id,w,D.id),className:"p-1 text-red-500 hover:bg-red-50 rounded",children:o.jsx(zf,{className:"h-3 w-3"})})]}):o.jsxs("span",{className:"text-sm text-gray-600 flex-1",children:[d(D.start)," - ",d(D.end)]})},D.id)),n===y.id&&A.available&&o.jsxs("button",{onClick:()=>m(y.id,w),className:"flex items-center space-x-1 text-blue-600 hover:bg-blue-50 rounded px-2 py-1 text-xs",children:[o.jsx(ds,{className:"h-3 w-3"}),o.jsx("span",{children:"Add Time Slot"})]})]}):!n&&o.jsx("span",{className:"text-sm text-gray-500",children:"Unavailable"})]},w)})}),n===y.id&&o.jsx("div",{className:"mt-4 flex justify-end",children:o.jsxs("button",{onClick:async()=>{const w=t.find(A=>A.id===n);if(w)try{const A=mn(ve,"Besas",w.id);await Si(A,{officeHours:w.officeHours}),r(null)}catch(A){console.error("Failed to save office hours:",A),alert("Failed to save changes. Please try again.")}},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm flex items-center space-x-1",children:[o.jsx(iw,{className:"h-3 w-3"}),o.jsx("span",{children:"Save Changes"})]})})]})]},y.id))]}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Compiled Office Hours"}),o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Overall Availability"}),o.jsx("div",{className:"space-y-4",children:a.map(y=>{const w=b[y];return o.jsxs("div",{className:"border-b border-gray-100 pb-4 last:border-b-0",children:[o.jsx("div",{className:"mb-2",children:o.jsx("span",{className:"font-medium text-gray-900",children:c[y]})}),w&&w.timeSlots.length>0?o.jsx("div",{className:"space-y-2",children:w.timeSlots.map((A,D)=>o.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[o.jsxs("span",{className:"text-sm font-medium text-green-600",children:[d(A.start)," - ",d(A.end)]}),o.jsx("span",{className:"text-xs text-gray-400",children:""}),o.jsx("div",{className:"flex flex-wrap gap-1",children:A.besas.map((V,N)=>o.jsxs("span",{className:"text-sm text-green-600 font-medium",children:[V,N<A.besas.length-1&&o.jsx("span",{className:"text-gray-400",children:", "})]},N))})]},D))}):o.jsx("span",{className:"text-sm text-gray-500",children:"Closed"})]},y)})})]}),o.jsxs("div",{className:"mt-6 bg-white rounded-xl shadow-sm border p-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Coverage Statistics"}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-blue-600",children:Object.keys(b).length}),o.jsx("div",{className:"text-sm text-gray-600",children:"Days Covered"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-green-600",children:t.filter(y=>y.status==="active").length}),o.jsx("div",{className:"text-sm text-gray-600",children:"Active BESAs"})]})]})]})]})]})]})}async function mP(t){const{accessToken:e,summary:n,description:r,location:s,startISO:i,endISO:a,calendarId:c="primary",attendeeEmail:u,attendeeName:d,extraAttendees:p=[],timezone:f}=t,m=[...u?[{email:u,displayName:d}]:[],...p],T={summary:n,description:r,location:s,start:f?{dateTime:i,timeZone:f}:{dateTime:i},end:f?{dateTime:a,timeZone:f}:{dateTime:a},attendees:m,guestsCanInviteOthers:!1,guestsCanModify:!1,guestsCanSeeOtherGuests:!0,reminders:{useDefault:!0}},k=`https://www.googleapis.com/calendar/v3/calendars/${encodeURIComponent(c)}/events?sendUpdates=all`,j=await fetch(k,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(T)});if(!j.ok)throw new Error(`Calendar insert failed: ${j.status} ${await j.text()}`);return j.json()}async function pP(t){return await new Promise((e,n)=>{var s,i;if((i=(s=window.google)==null?void 0:s.accounts)!=null&&i.oauth2)return e();const r=document.createElement("script");r.src="https://accounts.google.com/gsi/client",r.async=!0,r.defer=!0,r.onload=()=>e(),r.onerror=()=>n(new Error("Failed to load Google Identity Services.")),document.head.appendChild(r)}),new Promise((e,n)=>{window.google.accounts.oauth2.initTokenClient({client_id:t,scope:"https://www.googleapis.com/auth/calendar.events",callback:s=>{s&&s.access_token?e(s.access_token):n(new Error("No access token returned."))}}).requestAccessToken({prompt:""})})}function gP(t,e){const n=e.trim().match(/^(\d{1,2}):(\d{2})\s*(AM|PM)$/i);if(!n)throw new Error(`Unexpected time format: ${e}`);let[r,s,i,a]=n,c=parseInt(s,10);const u=parseInt(i,10);/PM/i.test(a)&&c!==12&&(c+=12),/AM/i.test(a)&&c===12&&(c=0);const[d,p,f]=t.split("-").map(Number);return new Date(d,p-1,f,c,u,0,0)}function yP(t,e){return new Date(t.getTime()+e*6e4)}function w0(t){const e=c=>String(c).padStart(2,"0"),n=t.getTimezoneOffset(),r=n>0?"-":"+",s=Math.abs(n),i=e(Math.floor(s/60)),a=e(s%60);return`${t.getFullYear()}-${e(t.getMonth()+1)}-${e(t.getDate())}T${e(t.getHours())}:${e(t.getMinutes())}:${e(t.getSeconds())}${r}${i}:${a}`}function xP(){const[t,e]=R.useState([]),n=Is(),{tourId:r}=sT();return R.useEffect(()=>{(async()=>{try{const a=(await bt(Qe(ve,"Tours"))).docs.map(c=>{const u=c.data();return{id:c.id,title:u.title??"",description:u.description??"",duration:u.duration??0,durationUnit:u.durationUnit??"minutes",maxAttendees:u.maxAttendees??1,location:u.location??"",zoomLink:u.zoomLink??"",autoGenerateZoom:u.autoGenerateZoom??!1,weeklyHours:u.weeklyHours??{},dateSpecificHours:u.dateSpecificHours??[],frequency:u.frequency??1,frequencyUnit:u.frequencyUnit??"hours",registrationLimit:u.registrationLimit??1,minNotice:u.minNotice??0,minNoticeUnit:u.minNoticeUnit??"hours",maxNotice:u.maxNotice??1,maxNoticeUnit:u.maxNoticeUnit??"days",bufferTime:u.bufferTime??0,bufferUnit:u.bufferUnit??"minutes",cancellationPolicy:u.cancellationPolicy??"",reschedulingPolicy:u.reschedulingPolicy??"",intakeForm:u.intakeForm??{firstName:!0,lastName:!0,email:!0,phone:!1,attendeeCount:!0,majorsInterested:!1,customQuestions:[]},reminderEmails:u.reminderEmails??[],sessionInstructions:u.sessionInstructions??"",published:u.published??!1,createdAt:u.createdAt??"",upcomingBookings:u.upcomingBookings??0,totalBookings:u.totalBookings??0}});e(a)}catch(i){console.error("Error fetching tours:",i)}})()},[]),o.jsx(vP,{tours:t,onBack:()=>n("/"),preselectedTour:r??"",navigate:n})}const vP=({onBack:t,preselectedTour:e="",tours:n,navigate:r})=>{const[s,i]=R.useState(1),[a,c]=R.useState(null),u=Intl.DateTimeFormat().resolvedOptions().timeZone,[d,p]=R.useState({tourId:e||"",tourType:"",date:"",time:"",attendees:1,maxAttendees:1,firstName:"",lastName:"",email:"",phone:"",organization:"",role:"",interests:[],timeSlot:"",groupSize:1,status:"",leadGuide:"",notes:"",besas:[]}),[f,m]=R.useState({}),T=[{id:1,title:"Date & Type of Tour",description:"Choose your preferred tour and date"},{id:2,title:"Available Times",description:"Select your time slot and group details"},{id:3,title:"Preferences & Booking Info",description:"Complete your booking information"}],k=S=>{const C=n.find(v=>String(v.id)===String(S));if(!C){console.warn("Tour not found for id:",S,"Available:",n.map(v=>v.id));return}c(C.id),p(v=>({...v,tourId:C.id,tourType:C.title,maxAttendees:1})),console.log("Tour Selected",C.id)},j=(S,C)=>{p(v=>({...v,[S]:C})),f[S]&&m(v=>({...v,[S]:""})),console.log("Tour selected")};R.useEffect(()=>{console.log("EFFECT deps -> preselectedTour:",e,"tours.length:",n.length),!(!e||!n.length)&&k(e.trim())},[e,n]);const P=S=>{const C={};switch(S){case 1:d.tourId||(C.tourType="Please select a tour type"),d.date||(C.date="Please select a date");break;case 2:d.time||(C.time="Please select a time slot"),d.maxAttendees<1&&(C.maxAttendees="Group size must be at least 1");break;case 3:d.firstName||(C.firstName="First name is required"),d.lastName||(C.lastName="Last name is required"),d.email||(C.contactEmail="Email is required"),d.phone||(C.contactPhone="Phone number is required"),d.organization||(C.organization="Organization is required"),d.role||(C.role="Role is required");break}return m(C),Object.keys(C).length===0},b=()=>{P(s)&&i(S=>Math.min(S+1,3))},y=()=>i(S=>Math.max(S-1,1)),w=async()=>{var G;if(!P(s))return;const S=te=>["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][te.getDay()],C=te=>{const[X,O]=te.split(":").map(Number);return X*60+(O||0)},v=(te,X,O)=>{const z=C(O.start),q=C(O.end);return z<X&&te<q},H=(te,...X)=>{const O=new Set(X.filter(Boolean).map(q=>q.trim().toLowerCase())),z=[];for(const q of te){const Z=(q.email||"").trim().toLowerCase();!Z||O.has(Z)||(O.add(Z),z.push({email:q.email.trim(),displayName:q.displayName}))}return z};try{const te=Qe(ve,"Bookings"),X=mn(te),O={...d,id:X.id,createdAt:new Date().toISOString()};await rj(X,O);const z=n.find(F=>F.id===d.tourId);if(!z)throw new Error("Selected tour not found.");const q=z.durationUnit==="hours"?z.duration*60:z.duration;if(!d.date||!d.time)throw new Error("Missing date or time.");const Z=gP(d.date,d.time),ue=yP(Z,q),de=w0(Z),Je=w0(ue);let be="";try{const F="724445877672-dn7ft8b030dsrkj8c96a4jsk6itr7266.apps.googleusercontent.com",K=await pP(F),oe=z.zoomLink?`Online (Zoom): ${z.zoomLink}`:z.location||"",le=[`Tour: ${d.tourType||z.title}`,`Date & Time: ${d.date} at ${d.time} (${u})`,`Group Size: ${d.maxAttendees}`,`Lead Guide: ${d.leadGuide||"TBD"}`,"","Contact",`- Name: ${d.firstName} ${d.lastName}`,`- Email: ${d.email}`,`- Phone: ${d.phone}`,""].filter(Boolean),_t=`${z.title}  ${d.firstName} ${d.lastName} (${d.maxAttendees})`;let nt=[];try{console.log("[FIREBASE DEBUG] app:",(G=ve==null?void 0:ve._firebaseApp)==null?void 0:G.options);try{const ce=await bt(Qe(ve,"Besas"));console.log("[FIREBASE DEBUG] BESAS size:",ce.size);for(const qt of ce.docs)console.log("[FIREBASE DEBUG] BESA doc:",qt.id,qt.data())}catch(ce){console.error("[FIREBASE DEBUG] getDocs failed:",ce==null?void 0:ce.code,ce==null?void 0:ce.message,ce)}const Ui=(await bt(Qe(ve,"Besas"))).docs.map(ce=>({id:ce.id,...ce.data()})),As=S(Z),ja=Z.getHours()*60+Z.getMinutes(),Bi=ue.getHours()*60+ue.getMinutes();console.log(`[BESA DEBUG] Day: ${As} | Interval: ${ja}-${Bi} mins`),console.log(`[BESA DEBUG] Roster count: ${Ui.length}`),nt=Ui.map(ce=>({...ce,email:(ce.email||"").trim(),status:(ce.status||"").trim().toLowerCase(),role:(ce.role||"").trim().toLowerCase()})).filter(ce=>{var zi;if(!ce.email)return console.log(`[BESA SKIP] No email -> ${ce.name} (id=${ce.id})`),!1;if(ce.status&&ce.status!=="active")return console.log(`[BESA SKIP] Inactive -> ${ce.name} (${ce.email}) status=${ce.status}`),!1;const qt=(zi=ce.officeHours)==null?void 0:zi[As];if(!qt||!qt.available)return console.log(`[BESA SKIP] Closed on ${As} -> ${ce.name} (${ce.email})`),!1;if(!Array.isArray(qt.timeSlots)||qt.timeSlots.length===0)return console.log(`[BESA SKIP] No timeslots on ${As} -> ${ce.name} (${ce.email})`),!1;let Xr=!1;for(const Le of qt.timeSlots){const ut=C(Le.start),$i=C(Le.end),Hi=v(ja,Bi,Le);console.log(`[BESA SLOT] ${ce.name} (${ce.email}) slot ${Le.start}-${Le.end} -> ${Hi?"MATCH":"no"}`),Hi&&(Xr=!0)}return Xr||console.log(`[BESA NO MATCH] ${ce.name} (${ce.email}) has no overlapping slot`),Xr}).map(ce=>({email:ce.email,displayName:ce.name})),console.log("[BESA DEBUG] Available BESA ->",nt)}catch(js){console.warn("BESA lookup failed; proceeding without BESA attendees.",js)}const pn={email:"ucscbesa@ucsc.edu",displayName:"UCSC BESA"};nt=H([...nt,pn],(d.email||"").trim()),console.log("[BESA DEBUG] Final attendees (excluding booker):",nt);const We=await mP({accessToken:K,summary:_t,description:le.join(`
`),location:oe,startISO:de,endISO:Je,attendeeEmail:d.email,attendeeName:`${d.firstName} ${d.lastName}`,extraAttendees:nt,timezone:u,calendarId:"primary"});be=(We==null?void 0:We.htmlLink)||"",console.log("Calendar event created:",be||(We==null?void 0:We.id))}catch(F){console.error("Calendar integration failed:",F)}const Ae={id:O.id,tourTitle:z.title,date:d.date,time:d.time,duration:z.duration,durationUnit:z.durationUnit,groupSize:d.maxAttendees,firstName:d.firstName,lastName:d.lastName,email:d.email,phone:d.phone,organization:d.organization,role:d.role,location:z.location,zoomLink:z.zoomLink,calendarEventLink:be,createdAt:O.createdAt};r("/booking-confirmation",{state:{bookingData:Ae},replace:!0})}catch(te){console.error("Error during submission:",te),alert("Failed to submit booking. Please try again.")}},A=S=>{const[C,v]=S.split(":").map(Number);return C*60+v},D=S=>{const C=Math.floor(S/60),v=S%60,H=C>=12?"PM":"AM";return`${(C+11)%12+1}:${v.toString().padStart(2,"0")} ${H}`},V=(S,C,v,H)=>{const G=A(S),te=A(C),X=[];for(let O=G;O+v<=te;O+=H)X.push(D(O));return X},N=()=>o.jsx("div",{className:"flex items-start justify-center mb-8",children:T.map((S,C)=>o.jsxs("div",{className:"flex items-center",children:[o.jsxs("div",{className:"text-center flex flex-col items-center",children:[o.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center text-sm font-medium mb-2 ${S.id<=s?"bg-blue-600 text-white":"bg-gray-200 text-gray-600"}`,children:S.id<s?o.jsx(qg,{className:"w-6 h-6"}):S.id}),o.jsxs("div",{className:"text-center w-32",children:[o.jsx("p",{className:`text-sm font-medium ${S.id<=s?"text-blue-600":"text-gray-500"}`,children:S.title}),o.jsx("p",{className:"text-xs text-gray-400 mt-1",children:S.description})]})]}),C<T.length-1&&o.jsx("div",{className:`w-20 h-1 mx-4 mt-6 flex-shrink-0 ${S.id<s?"bg-blue-600":"bg-gray-200"}`})]},S.id))}),x=()=>o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Choose Your Tour Experience"}),o.jsx("p",{className:"text-gray-600",children:"Select the tour that best matches your interests and preferred date"})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Available Tours"}),o.jsx("div",{className:"grid gap-6",children:n.map(S=>o.jsxs("div",{className:`tour-card ${a===S.id?"selected":""}`,children:[o.jsx("h3",{className:"text-lg font-semibold text-indigo-600 mb-2",children:S.title}),o.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-3",children:S.description}),o.jsxs("div",{className:"text-sm text-gray-700 space-y-1",children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(Ft,{className:"w-4 h-4"}),S.duration," ",S.durationUnit]}),o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(Jt,{className:"w-4 h-4"}),"Max ",S.maxAttendees," people"]})]}),o.jsx("button",{onClick:()=>k(S.id),className:`mt-4 px-4 py-2 rounded-lg font-semibold ${a===S.id?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-blue-100"}`,children:a===S.id?"Selected":"Select This Tour"})]},S.id))})]}),f.tourType&&o.jsxs("p",{className:"text-red-500 text-sm mt-2 flex items-center gap-1",children:[o.jsx(Xv,{className:"w-4 h-4"}),f.tourType]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-lg font-semibold text-gray-900 mb-4",children:"Preferred Date"}),o.jsx("input",{type:"date",value:d.date,onChange:S=>j("date",S.target.value),min:new Date().toISOString().split("T")[0],className:`w-full px-4 py-3 border-2 rounded-lg text-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${f.date?"border-red-500":"border-gray-300"}`}),f.date&&o.jsx("p",{className:"text-red-500 text-sm mt-2",children:f.date})]})]}),E=()=>{const S=n.find(X=>X.id===d.tourId);if(!S)return null;const C=S.durationUnit==="hours"?S.duration*60:S.duration,v=S.frequencyUnit==="hours"?S.frequency*60:S.frequency,G=(()=>{var Z,ue;const X=d.date;if(!X)return[];const O=(Z=S.dateSpecificHours)==null?void 0:Z.find(de=>de.date===X&&!de.unavailable);if(O)return O.slots.flatMap(de=>V(de.start,de.end,C,v));const z=new Date(X).toLocaleDateString("en-US",{weekday:"long"}),q=(ue=S.weeklyHours)==null?void 0:ue[z];return q&&q.length>0?q.flatMap(de=>V(de.start,de.end,C,v)):[]})(),te=X=>{const O=S.maxAttendees||15,z=Math.min(Math.max(1,X),O);j("maxAttendees",z)};return o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Select Your Time Slot"}),o.jsx("p",{className:"text-gray-600",children:"Choose from available times for your selected tour"})]}),o.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"p-2 bg-blue-600 rounded-lg",children:o.jsx(rn,{className:"w-5 h-5 text-white"})}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-blue-900",children:S.title}),o.jsxs("p",{className:"text-blue-700 text-sm",children:[d.date,"  ",S.duration," ",S.durationUnit]})]})]})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Available Time Slots"}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:G.length>0?G.map(X=>o.jsxs("button",{onClick:()=>j("time",X),className:`p-4 border-2 rounded-lg text-center transition-all hover:shadow-md ${d.time===X?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300"}`,children:[o.jsx(Ft,{className:"w-5 h-5 mx-auto mb-2 text-gray-600"}),o.jsx("span",{className:"font-medium",children:X})]},X)):o.jsx("p",{children:"No available times"})}),f.time&&o.jsx("p",{className:"text-red-500 text-sm mt-2",children:f.time})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Group Size"}),o.jsxs("div",{className:"flex items-center space-x-6",children:[o.jsx("button",{type:"button",onClick:()=>te(d.maxAttendees-1),disabled:d.maxAttendees<=1,className:"w-12 h-12 rounded-full border-2 border-gray-300 flex items-center justify-center hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed text-xl font-bold",children:"-"}),o.jsxs("div",{className:"text-center",children:[o.jsx("span",{className:"text-3xl font-semibold text-gray-900 block",children:d.maxAttendees}),o.jsx("span",{className:"text-sm text-gray-500",children:d.maxAttendees===1?"person":"people"})]}),o.jsx("button",{type:"button",onClick:()=>te(d.maxAttendees+1),disabled:d.maxAttendees>=(S.maxAttendees||15),className:"w-12 h-12 rounded-full border-2 border-gray-300 flex items-center justify-center hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed text-xl font-bold",children:"+"})]}),o.jsxs("p",{className:"text-left text-sm text-gray-500 mt-2",children:["Maximum ",S.maxAttendees," people per tour"]}),f.maxAttendees&&o.jsx("p",{className:"text-red-500 text-sm mt-2 text-left",children:f.maxAttendees})]})]})},I=()=>{var v;const S=[{id:"computer-science",label:"B.S. Computer Science"},{id:"biomolecular-engineering",label:"B.S. Biomolecular Engineering"},{id:"bioinformatics",label:"B.S. Bioinformatics"},{id:"biotechnology",label:"B.A. Biotechnology"},{id:"applied-mathematics",label:"B.S. Applied Mathematics"},{id:"network-and-digital-technology",label:"B.A. Network and Digital Technology"},{id:"game-design",label:"B.S. Computer Science: Game Design"},{id:"tim",label:"B.S. Technology and Information Management (TIM)"},{id:"electrical-engineering",label:"B.S. Electrical Engineering"},{id:"computer-engineering",label:"B.S. Computer Engineering"},{id:"robotics",label:"B.S. Robotics Engineering"}],C=(H,G)=>{const te=d.interests||[];let X;G?X=[...te,H]:X=te.filter(O=>O!==H),j("interests",X)};return o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Complete Your Booking"}),o.jsx("p",{className:"text-gray-600",children:"Provide your details and preferences to finalize your tour"})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[o.jsx(ai,{className:"w-5 h-5"}),"Personal Information"]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name *"}),o.jsx("input",{type:"text",value:d.firstName,onChange:H=>j("firstName",H.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${f.firstName?"border-red-500":"border-gray-300"}`,placeholder:"Enter your first name"}),f.firstName&&o.jsx("p",{className:"text-red-500 text-sm mt-1",children:f.firstName})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name *"}),o.jsx("input",{type:"text",value:d.lastName,onChange:H=>j("lastName",H.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${f.lastName?"border-red-500":"border-gray-300"}`,placeholder:"Enter your last name"}),f.lastName&&o.jsx("p",{className:"text-red-500 text-sm mt-1",children:f.lastName})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),o.jsx("input",{type:"email",value:d.email,onChange:H=>j("email",H.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${f.contactEmail?"border-red-500":"border-gray-300"}`,placeholder:"your.email@example.com"}),f.contactEmail&&o.jsx("p",{className:"text-red-500 text-sm mt-1",children:f.contactEmail})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number *"}),o.jsx("input",{type:"tel",value:d.phone,onChange:H=>j("phone",H.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${f.contactPhone?"border-red-500":"border-gray-300"}`,placeholder:"(555) 123-4567"}),f.contactPhone&&o.jsx("p",{className:"text-red-500 text-sm mt-1",children:f.contactPhone})]})]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[o.jsx(iS,{className:"w-5 h-5"}),"Background Information"]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Organization/School *"}),o.jsx("input",{type:"text",value:d.organization,onChange:H=>j("organization",H.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${f.organization?"border-red-500":"border-gray-300"}`,placeholder:"Your school or organization"}),f.organization&&o.jsx("p",{className:"text-red-500 text-sm mt-1",children:f.organization})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role *"}),o.jsxs("select",{value:d.role,onChange:H=>j("role",H.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${f.role?"border-red-500":"border-gray-300"}`,children:[o.jsx("option",{value:"",children:"Select your role"}),o.jsx("option",{value:"prospective-student",children:"Prospective Student"}),o.jsx("option",{value:"parent",children:"Parent/Guardian"}),o.jsx("option",{value:"counselor",children:"School Counselor"}),o.jsx("option",{value:"teacher",children:"Teacher"}),o.jsx("option",{value:"administrator",children:"Administrator"}),o.jsx("option",{value:"other",children:"Other"})]}),f.role&&o.jsx("p",{className:"text-red-500 text-sm mt-1",children:f.role})]})]}),o.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-4",children:["Majors Interested Offered Under Baskin",o.jsx("span",{className:"text-gray-500 text-xs ml-1",children:"(Select all that apply)"})]}),o.jsx("div",{className:"grid md:grid-cols-3 sm:grid-cols-2 grid-cols-1 gap-3",children:S.map(H=>{var G;return o.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:((G=d.interests)==null?void 0:G.includes(H.id))||!1,onChange:te=>C(H.id,te.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),o.jsx("span",{className:"text-sm text-gray-700",children:H.label})]},H.id)})}),f.interests&&o.jsx("p",{className:"text-red-500 text-sm mt-2",children:f.interests})]})]}),o.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[o.jsx("h4",{className:"font-semibold text-blue-900 mb-3",children:"Booking Summary"}),o.jsxs("div",{className:"space-y-2 text-sm text-blue-800",children:[o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"Tour:"})," ",d.tourType||((v=n.find(H=>H.id===d.tourId))==null?void 0:v.title)]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"Date & Time:"})," ",d.date," at ",d.time]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"Group Size:"})," ",d.maxAttendees," people"]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"Contact:"})," ",d.firstName," ",d.lastName]}),d.interests&&d.interests.length>0&&o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"Interests:"})," ",d.interests.map(H=>{var G;return(G=S.find(te=>te.id===H))==null?void 0:G.label}).filter(Boolean).join(", ")]})]})]})]})};return o.jsxs("div",{className:"min-h-screen bg-gray-50",children:[o.jsx("div",{className:"bg-white shadow-sm border-b",children:o.jsx("div",{className:"max-w-4xl mx-auto px-4 py-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("button",{onClick:t,className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors",children:[o.jsx(Lr,{className:"w-5 h-5"}),"Back to Home"]}),o.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Campus Tour Booking"}),o.jsx("div",{className:"w-24"})]})})}),o.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[N(),o.jsxs("div",{className:"mb-8",children:[s===1&&x(),s===2&&E(),s===3&&I()]}),o.jsxs("div",{className:"flex justify-between pt-6 border-t",children:[o.jsxs("button",{onClick:y,disabled:s===1,className:`flex items-center gap-2 px-6 py-3 rounded-lg transition-colors ${s===1?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:[o.jsx(Lr,{className:"w-4 h-4"}),"Previous"]}),s<3?o.jsxs("button",{onClick:b,className:"flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:["Continue",o.jsx(Zv,{className:"w-4 h-4"})]}):o.jsxs("button",{onClick:w,className:"flex items-center gap-2 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[o.jsx(qg,{className:"w-4 h-4"}),"Complete Booking"]})]})]})})]})},wP=()=>{var u;const t=Is(),n=(u=Kr().state)==null?void 0:u.bookingData;if(!n)return t("/"),null;const r=Intl.DateTimeFormat().resolvedOptions().timeZone,s=d=>new Date(d).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),i=()=>{const d=new Date(`${n.date}T${a(n.time)}`),p=new Date(d.getTime()+(n.durationUnit==="hours"?n.duration*60:n.duration)*6e4),f=P=>P.toISOString().replace(/[-:]/g,"").split(".")[0]+"Z",m=["BEGIN:VCALENDAR","VERSION:2.0","PRODID:-//Campus Tours//EN","BEGIN:VEVENT",`UID:${n.id}@campustours.com`,`DTSTART:${f(d)}`,`DTEND:${f(p)}`,`SUMMARY:${n.tourTitle} - Campus Tour`,`DESCRIPTION:Campus tour booking for ${n.firstName} ${n.lastName}\\nGroup size: ${n.groupSize}\\nContact: ${n.email}`,`LOCATION:${n.location}`,"STATUS:CONFIRMED","END:VEVENT","END:VCALENDAR"].join(`\r
`),T=new Blob([m],{type:"text/calendar"}),k=URL.createObjectURL(T),j=document.createElement("a");j.href=k,j.download=`campus-tour-${n.date}.ics`,j.click(),URL.revokeObjectURL(k)},a=d=>{const[p,f]=d.split(" ");let[m,T]=p.split(":");return m==="12"&&(m="00"),f==="PM"&&(m=(parseInt(m,10)+12).toString()),`${m.padStart(2,"0")}:${T}:00`},c=async()=>{const d={title:`Campus Tour Booking Confirmed - ${n.tourTitle}`,text:`I've booked a campus tour for ${s(n.date)} at ${n.time}`,url:window.location.href};if(navigator.share&&navigator.canShare(d))try{await navigator.share(d)}catch(p){console.log("Error sharing:",p)}else{const p=`Campus Tour Booking Confirmed!

Tour: ${n.tourTitle}
Date: ${s(n.date)}
Time: ${n.time}
Group Size: ${n.groupSize}`;navigator.clipboard.writeText(p),alert("Booking details copied to clipboard!")}};return o.jsxs("div",{className:"min-h-screen bg-gray-50",children:[o.jsx("div",{className:"bg-white shadow-sm border-b",children:o.jsx("div",{className:"max-w-4xl mx-auto px-4 py-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("button",{onClick:()=>t("/"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors",children:[o.jsx(Lr,{className:"w-5 h-5"}),"Back to Home"]}),o.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Booking Confirmed"}),o.jsx("div",{className:"w-24"})]})})}),o.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[o.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-green-600 px-8 py-12 text-center",children:[o.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-white rounded-full mb-4",children:o.jsx(Ir,{className:"w-10 h-10 text-green-500"})}),o.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Booking Confirmed!"}),o.jsx("p",{className:"text-green-100 text-lg",children:"Your campus tour has been successfully scheduled"})]}),o.jsxs("div",{className:"p-8",children:[o.jsxs("div",{className:"flex flex-wrap gap-4 mb-8",children:[o.jsxs("button",{onClick:i,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[o.jsx(sS,{className:"w-4 h-4"}),"Add to Calendar"]}),o.jsxs("button",{onClick:c,className:"flex items-center gap-2 px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[o.jsx(uS,{className:"w-4 h-4"}),"Share Details"]}),n.calendarEventLink&&o.jsxs("a",{href:n.calendarEventLink,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[o.jsx(ph,{className:"w-4 h-4"}),"View in Google Calendar"]})]}),o.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 mb-8",children:[o.jsx("h3",{className:"text-xl font-bold text-blue-900 mb-4",children:"Tour Details"}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(rn,{className:"w-5 h-5 text-blue-600 mt-0.5"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-gray-900",children:"Date"}),o.jsx("p",{className:"text-gray-600",children:s(n.date)})]})]}),o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(Ft,{className:"w-5 h-5 text-blue-600 mt-0.5"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-gray-900",children:"Time"}),o.jsxs("p",{className:"text-gray-600",children:[n.time," (",r,")"]}),o.jsxs("p",{className:"text-sm text-gray-500",children:["Duration: ",n.duration," ",n.durationUnit]})]})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(Jt,{className:"w-5 h-5 text-blue-600 mt-0.5"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-gray-900",children:"Group Size"}),o.jsxs("p",{className:"text-gray-600",children:[n.groupSize," people"]})]})]}),o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(_n,{className:"w-5 h-5 text-blue-600 mt-0.5"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-gray-900",children:"Location"}),o.jsx("p",{className:"text-gray-600",children:n.location}),n.zoomLink&&o.jsx("a",{href:n.zoomLink,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline text-sm",children:"Join Zoom Meeting"})]})]})]})]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 mb-8",children:[o.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Contact Information"}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(ai,{className:"w-5 h-5 text-gray-600 mt-0.5"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-gray-900",children:"Name"}),o.jsxs("p",{className:"text-gray-600",children:[n.firstName," ",n.lastName]})]})]}),o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(nw,{className:"w-5 h-5 text-gray-600 mt-0.5"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-gray-900",children:"Email"}),o.jsx("p",{className:"text-gray-600",children:n.email})]})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(sw,{className:"w-5 h-5 text-gray-600 mt-0.5"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-gray-900",children:"Phone"}),o.jsx("p",{className:"text-gray-600",children:n.phone})]})]}),o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(ai,{className:"w-5 h-5 text-gray-600 mt-0.5"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-gray-900",children:"Organization"}),o.jsx("p",{className:"text-gray-600",children:n.organization}),o.jsx("p",{className:"text-sm text-gray-500 capitalize",children:n.role})]})]})]})]})]}),(n.specialRequests||n.accessibility)&&o.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 mb-8",children:[o.jsx("h3",{className:"text-lg font-semibold text-yellow-900 mb-3",children:"Special Notes"}),n.accessibility&&o.jsxs("div",{className:"mb-3",children:[o.jsx("p",{className:"font-medium text-yellow-800",children:"Accessibility Requirements:"}),o.jsx("p",{className:"text-yellow-700",children:n.accessibility})]}),n.specialRequests&&o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-yellow-800",children:"Special Requests:"}),o.jsx("p",{className:"text-yellow-700",children:n.specialRequests})]})]}),o.jsx("div",{className:"bg-gray-100 rounded-lg p-4 mb-8",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600",children:"Booking Reference"}),o.jsxs("p",{className:"font-mono text-lg font-semibold text-gray-900",children:["#",n.id.slice(-8).toUpperCase()]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"text-sm text-gray-600",children:"Booked on"}),o.jsx("p",{className:"text-gray-900",children:new Date(n.createdAt).toLocaleDateString()})]})]})}),o.jsxs("div",{className:"border-t pt-8",children:[o.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"What's Next?"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full mt-2"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-gray-900",children:"Confirmation Email"}),o.jsxs("p",{className:"text-gray-600",children:["You'll receive a confirmation email at ",n.email," with all tour details"]})]})]}),o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full mt-2"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-gray-900",children:"Instructions"}),o.jsx("p",{className:"text-gray-600",children:o.jsx("button",{onClick:()=>t("/parking-instructions"),className:"text-blue-600 hover:underline",children:"Click here for parking instructions and tour preparation guide."})})]})]}),o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full mt-2"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-gray-900",children:"Questions?"}),o.jsxs("p",{className:"text-gray-600",children:["Contact us at"," ",o.jsx("a",{href:"mailto:ucscbesa@ucsc.edu",className:"text-blue-600 hover:underline",children:"ucscbesa@ucsc.edu"})," "]})]})]})]})]}),o.jsxs("div",{className:"flex flex-wrap gap-4 mt-8 pt-8 border-t",children:[o.jsx("button",{onClick:()=>t("/"),className:"flex-1 sm:flex-none px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Return to Home"}),o.jsx("button",{onClick:()=>t("/book"),className:"flex-1 sm:flex-none px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Book Another Tour"})]})]})]})})]})},_P=()=>{const[t,e]=R.useState(0),n=[{id:"t8Xj48EFkN0",title:"Driving from Base of Campus",description:"How to find Baskin Engineering: driving from the base of campus"},{id:"EOFBiGSrHzI",title:"Parking and Public Transit",description:"How to find Baskin Engineering: parking and public transit"}],r=()=>{e(a=>a===n.length-1?0:a+1)},s=()=>{e(a=>a===0?n.length-1:a-1)},i=()=>{window.history.length>1?window.history.back():window.location.href="/"};return o.jsxs("div",{className:"min-h-screen bg-gray-50",children:[o.jsx("div",{className:"bg-white shadow-sm border-b",children:o.jsx("div",{className:"max-w-4xl mx-auto px-4 py-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("button",{onClick:i,className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 rounded-lg px-2 py-1",children:[o.jsx(Lr,{className:"w-5 h-5"}),"Back"]}),o.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Parking Instructions"}),o.jsx("div",{className:"w-20"})]})})}),o.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[o.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 px-8 py-12 text-center",children:[o.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-white rounded-full mb-4",children:o.jsx(Hg,{className:"w-10 h-10 text-blue-600"})}),o.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"BE Tour Parking Guide"}),o.jsx("p",{className:"text-blue-100 text-lg",children:"Everything you need to know about parking for your Baskin Engineering tour"})]}),o.jsxs("div",{className:"p-8",children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Baskin Parking Videos"}),o.jsxs("div",{className:"relative",children:[o.jsxs("div",{className:"relative bg-gray-100 rounded-lg overflow-hidden",style:{paddingBottom:"56.25%",height:0},children:[o.jsx("iframe",{className:"absolute top-0 left-0 w-full h-full",src:`https://www.youtube.com/embed/${n[t].id}`,title:n[t].title,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}),n.length>1&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:s,className:"absolute left-4 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 hover:bg-opacity-70 text-white rounded-full p-2 transition-all duration-200","aria-label":"Previous video",children:o.jsx(rS,{className:"w-6 h-6"})}),o.jsx("button",{onClick:r,className:"absolute right-4 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 hover:bg-opacity-70 text-white rounded-full p-2 transition-all duration-200","aria-label":"Next video",children:o.jsx(ew,{className:"w-6 h-6"})})]})]}),o.jsxs("div",{className:"mt-4",children:[o.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:n[t].title}),o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:n[t].description}),n.length>1&&o.jsx("div",{className:"flex justify-center mt-4 gap-2",children:n.map((a,c)=>o.jsx("button",{onClick:()=>e(c),className:`w-3 h-3 rounded-full transition-all duration-200 ${c===t?"bg-blue-600":"bg-gray-300 hover:bg-gray-400"}`,"aria-label":`Go to video ${c+1}`},c))}),n.length>1&&o.jsxs("p",{className:"text-center text-sm text-gray-500 mt-2",children:["Video ",t+1," of ",n.length]})]})]})]}),o.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 mb-8",children:[o.jsx("h3",{className:"text-xl font-bold text-blue-900 mb-4",children:"Quick Reference"}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(ad,{className:"w-5 h-5 text-green-600"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:"1-Day Permit: $10.00"}),o.jsx("p",{className:"text-sm text-gray-600",children:"1-Night Permit: $5.00"})]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Ft,{className:"w-5 h-5 text-blue-600"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:"Kiosk Hours: 7am-1pm"}),o.jsx("p",{className:"text-sm text-gray-600",children:"TAPS Office: 7am-5pm"})]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(sw,{className:"w-5 h-5 text-purple-600"}),o.jsx("div",{children:o.jsx("p",{className:"font-medium",children:"Event Parking: (831) 459-1097"})})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(ph,{className:"w-5 h-5 text-gray-600"}),o.jsx("div",{children:o.jsx("a",{href:"https://taps.ucsc.edu/parking/visitor-parking.html",target:"_blank",rel:"noopener noreferrer",className:"font-medium text-blue-600 hover:underline",children:"Official Parking Info"})})]})]})]}),o.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-6 mb-8",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx(tS,{className:"w-6 h-6 text-orange-600"}),o.jsx("h3",{className:"text-xl font-bold text-orange-900",children:"Bus Parking"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"bg-orange-100 border border-orange-300 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(Jv,{className:"w-5 h-5 text-orange-600 mt-0.5"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold text-orange-900",children:"Important:"}),o.jsx("p",{className:"text-orange-800",children:"Alert your event coordinator if you plan to arrive by bus. Parking for large vehicles (buses, RVs, limos) is only available at Barn Theater lot at the base of campus."})]})]})}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-orange-900 mb-2",children:"Drop-off Locations:"}),o.jsxs("ul",{className:"space-y-2 text-orange-800",children:[o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx(_n,{className:"w-4 h-4 text-orange-600 mt-0.5"}),"Cowell College loading zone"]}),o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx(_n,{className:"w-4 h-4 text-orange-600 mt-0.5"}),"Rachel Carson College (formerly College Eight) loading zone"]})]})]}),o.jsx("div",{className:"bg-yellow-100 border border-yellow-300 rounded-lg p-3",children:o.jsxs("p",{className:"text-yellow-800",children:[o.jsx("strong",{children:"3-minute time limit"})," at drop-off areas due to two transit systems using campus bus stops. Multiple buses must stagger arrivals and pickups."]})}),o.jsx("div",{children:o.jsxs("p",{className:"text-orange-800",children:["If Barn Theater lot is full, call"," ",o.jsx("a",{href:"tel:8314591097",className:"font-semibold text-blue-600 hover:underline",children:"(831) 459-1097"})," ","to speak with TAPS Event Parking for guidance."]})}),o.jsx("div",{className:"bg-orange-100 border border-orange-300 rounded-lg p-3",children:o.jsxs("p",{className:"text-orange-800",children:["A map showing loading zone locations and off-campus waiting areas is available for download from the"," ",o.jsx("a",{href:"https://transportation.ucsc.edu/parking/special-events/#tour-bus",target:"_blank",rel:"noopener noreferrer",className:"font-semibold text-orange-900 hover:underline",children:"TAPS website."})," "]})})]})]}),o.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6 mb-8",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx(Hg,{className:"w-6 h-6 text-green-600"}),o.jsx("h3",{className:"text-xl font-bold text-green-900",children:"Visitor Parking"})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-green-900 mb-3",children:"Where to Purchase Permits:"}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"bg-green-100 rounded-lg p-4",children:[o.jsx("h5",{className:"font-semibold text-green-900 mb-2",children:"Main Entrance Kiosk"}),o.jsxs("div",{className:"space-y-1 text-green-800",children:[o.jsxs("p",{className:"flex items-center gap-2",children:[o.jsx(_n,{className:"w-4 h-4"}),"Coolidge Drive"]}),o.jsxs("p",{className:"flex items-center gap-2",children:[o.jsx(Ft,{className:"w-4 h-4"}),"7:00am - 1:00pm"]}),o.jsxs("p",{className:"flex items-center gap-2",children:[o.jsx(rn,{className:"w-4 h-4"}),"Monday - Friday"]})]})]}),o.jsxs("div",{className:"bg-green-100 rounded-lg p-4",children:[o.jsx("h5",{className:"font-semibold text-green-900 mb-2",children:"TAPS Sales Office"}),o.jsxs("div",{className:"space-y-1 text-green-800",children:[o.jsxs("p",{className:"flex items-center gap-2",children:[o.jsx(_n,{className:"w-4 h-4"}),"H Barn"]}),o.jsxs("p",{className:"flex items-center gap-2",children:[o.jsx(Ft,{className:"w-4 h-4"}),"1:00pm - 5:00pm (also 7am-1pm)"]}),o.jsxs("p",{className:"flex items-center gap-2",children:[o.jsx(rn,{className:"w-4 h-4"}),"Monday - Friday"]})]})]})]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-green-900 mb-2",children:"Permit Costs:"}),o.jsx("div",{className:"bg-green-100 rounded-lg p-4",children:o.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(ad,{className:"w-5 h-5 text-green-600"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-green-900",children:"1-Day Permit"}),o.jsx("p",{className:"text-2xl font-bold text-green-700",children:"$10.00"})]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(ad,{className:"w-5 h-5 text-green-600"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-green-900",children:"1-Night Permit"}),o.jsx("p",{className:"text-2xl font-bold text-green-700",children:"$5.00"})]})]})]})})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-green-900 mb-2",children:"Multi-Day Permits:"}),o.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[o.jsxs("p",{className:"text-blue-800",children:["For permits lasting 2-7 consecutive days, visit the TAPS Sales Office in H Barn.",o.jsx("strong",{children:" Picture ID and proof of registration are required"})," at the time of purchase."]}),o.jsx("p",{className:"text-blue-800 mt-2",children:"Sales Office hours: 7:00am to 5:00pm, Monday through Friday."})]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-green-900 mb-2",children:"Planning Ahead:"}),o.jsx("p",{className:"text-green-800",children:"If you know the specific campus location you plan to visit, send an email inquiry in advance to obtain more information about guest and visitor parking availability for that specific area."})]})]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 mb-8",children:[o.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Additional Resources"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("a",{href:"https://transportation.ucsc.edu/parking/parking-permits/visitor-guest-parking/",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-blue-600 hover:underline",children:[o.jsx(ph,{className:"w-4 h-4"}),"Official TAPS Visitor Parking Information"]}),o.jsx("p",{className:"text-gray-600",children:"Maps showing bus loading zones and parking locations are available for download on the TAPS website."}),o.jsxs("p",{className:"text-gray-600",children:[o.jsx("strong",{children:"Note:"})," Maps should be checked carefully for accuracy and current information."]})]})]}),o.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 mb-8",children:[o.jsx("h3",{className:"text-xl font-bold text-blue-900 mb-4",children:"Need Help?"}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"For Bus Parking Issues:"}),o.jsxs("p",{className:"text-blue-800",children:["Call TAPS Event Parking at"," ",o.jsx("a",{href:"tel:8314591097",className:"font-semibold text-blue-600 hover:underline",children:"(831) 459-1097"})]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"General Tour Questions:"}),o.jsxs("p",{className:"text-blue-800",children:["Contact us at"," ",o.jsx("a",{href:"mailto:ucscbesa@ucsc.edu",className:"font-semibold text-blue-600 hover:underline",children:"ucscbesa@ucsc.edu"})]})]})]})]}),o.jsx("div",{className:"flex flex-wrap gap-4 mt-8 pt-8 border-t",children:o.jsx("button",{onClick:()=>window.location.href="/",className:"flex-1 sm:flex-none px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Return to Home"})})]})]})})]})},EP=()=>{const t=Is();function e(){t("/")}return o.jsxs("div",{className:"min-h-screen bg-gray-50",children:[o.jsx("div",{className:"bg-white shadow-sm border-b",children:o.jsx("div",{className:"max-w-4xl mx-auto px-4 py-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors",children:[o.jsx(Lr,{className:"w-5 h-5"}),"Back to Home"]}),o.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Privacy Policy"}),o.jsx("div",{className:"w-24"})]})})}),o.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[o.jsxs("div",{className:"mb-8",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:o.jsx(dS,{className:"w-6 h-6 text-blue-600"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Your Privacy Matters"}),o.jsx("p",{className:"text-gray-600",children:"Last updated: January 2025"})]})]}),o.jsx("p",{className:"text-gray-700 leading-relaxed",children:"We value your privacy and are committed to protecting your personal information. This Privacy Policy explains how our application (we, our, or us) collects, uses, and safeguards the information you provide when using our services."})]}),o.jsxs("div",{className:"mb-8",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx(na,{className:"w-5 h-5 text-blue-600"}),o.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Information We Collect"})]}),o.jsxs("div",{className:"space-y-4 text-gray-700",children:[o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[o.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Information you provide"}),o.jsx("p",{children:"When you make a booking, we may collect your name, email, phone number, organization or school, role, and other booking details you voluntarily share (e.g., group size, preferences, accessibility needs)."})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[o.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Automatically collected data"}),o.jsx("p",{children:"We may collect basic technical information such as IP address, browser type, device, and usage statistics to help operate, secure, and improve our service."})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[o.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Calendar data"}),o.jsx("p",{children:"If you connect your Google Calendar, we may access event details needed to schedule bookings on your behalf. You can revoke access at any time in your Google Account settings."})]})]})]}),o.jsxs("div",{className:"mb-8",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx(Jt,{className:"w-5 h-5 text-blue-600"}),o.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"How We Use Your Information"})]}),o.jsxs("div",{className:"space-y-3 text-gray-700",children:[o.jsx("p",{children:"We use your information to:"}),o.jsxs("ul",{className:"space-y-2 ml-4",children:[o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full mt-2 flex-shrink-0"}),o.jsx("span",{children:"Create and manage bookings and event invitations."})]}),o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full mt-2 flex-shrink-0"}),o.jsx("span",{children:"Send booking confirmations, reminders, updates, and administrative messages."})]}),o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full mt-2 flex-shrink-0"}),o.jsx("span",{children:"Share event details with invited participants (such as BESAs or organizers)."})]}),o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full mt-2 flex-shrink-0"}),o.jsx("span",{children:"Operate, maintain, and improve our services and user experience."})]})]})]})]}),o.jsxs("div",{className:"mb-8",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx(aS,{className:"w-5 h-5 text-blue-600"}),o.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Data Sharing & Security"})]}),o.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[o.jsx("p",{className:"text-blue-900 mb-4",children:"We do not sell or rent your information. We may share necessary details with:"}),o.jsx("div",{className:"grid md:grid-cols-1 gap-2 text-sm text-blue-800",children:o.jsxs("div",{className:"space-y-1",children:[o.jsxs("p",{children:[" ",o.jsx("b",{children:"Event participants:"})," To confirm attendance and logistics."]}),o.jsxs("p",{children:[" ",o.jsx("b",{children:"Service providers:"})," Such as Google Calendar, to schedule events."]}),o.jsxs("p",{children:[" ",o.jsx("b",{children:"Legal reasons:"})," If required by law or to protect safety and security."]})]})}),o.jsx("p",{className:"text-blue-900 mt-4",children:"We implement reasonable technical and organizational measures to protect your information from unauthorized access, alteration, or disclosure; however, no system can be completely secure."})]})]}),o.jsxs("div",{className:"mb-8",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx(oi,{className:"w-5 h-5 text-blue-600"}),o.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Your Choices & Rights"})]}),o.jsxs("div",{className:"space-y-3 text-gray-700",children:[o.jsx("p",{children:"You have the right to:"}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs("p",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Access your personal information"]}),o.jsxs("p",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Correct inaccurate information"]}),o.jsxs("p",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Request deletion of your data"]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("p",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Opt out of marketing communications"]}),o.jsxs("p",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Withdraw consent at any time"]}),o.jsxs("p",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),"File a complaint with authorities"]})]})]}),o.jsx("p",{className:"text-gray-700",children:"You can also revoke our access to your Google data at any time via your Google Account permissions."})]})]}),o.jsxs("div",{className:"border-t pt-8",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx(nw,{className:"w-5 h-5 text-blue-600"}),o.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Contact Us"})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[o.jsx("p",{className:"text-gray-700 mb-4",children:"If you have questions about this Privacy Policy or wish to exercise your rights, please contact us:"}),o.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"Email:"})," ucscbesa@besa.edu"]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"Phone:"})," (831) 459-5840"]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"Address:"})," Baskin Engineering, 606 Engineering Loop, Santa Cruz, CA 95064"]})]})]})]}),o.jsx("div",{className:"mt-8 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:o.jsxs("p",{className:"text-yellow-800 text-sm",children:[o.jsx("span",{className:"font-medium",children:"Policy Updates:"})," We may update this Privacy Policy from time to time. We will notify you of any material changes by email or through our website. Your continued use of our services after such modifications constitutes acceptance of the updated Privacy Policy."]})})]})})]})},NP=()=>{const t=Is();function e(){t("/")}return o.jsxs("div",{className:"min-h-screen bg-gray-50",children:[o.jsx("div",{className:"bg-white shadow-sm border-b",children:o.jsx("div",{className:"max-w-4xl mx-auto px-4 py-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors",children:[o.jsx(Lr,{className:"w-5 h-5"}),"Back to Home"]}),o.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Terms of Service"}),o.jsx("div",{className:"w-24"})]})})}),o.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[o.jsxs("div",{className:"mb-8",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:o.jsx(oi,{className:"w-6 h-6 text-blue-600"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Terms of Service"}),o.jsx("p",{className:"text-gray-600",children:"Effective Date: January 1, 2025"})]})]}),o.jsx("p",{className:"text-gray-700 leading-relaxed",children:"These Terms of Service (Terms) govern your use of the BESA Tour Booking application (Service). By accessing or using the Service, you agree to these Terms and our Privacy Policy. If you do not agree, please do not use the Service."})]}),o.jsxs("div",{className:"mb-8",children:[o.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Acceptance of Terms"}),o.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:o.jsx("p",{className:"text-blue-900 text-sm",children:"By using the Service, you confirm that you are at least 13 years old (or the age of consent in your region), have read and accept these Terms, and will comply with all applicable laws and policies."})})]}),o.jsxs("div",{className:"mb-8",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx(Gg,{className:"w-5 h-5 text-blue-600"}),o.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Bookings & Cancellations"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[o.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Creating a Booking"}),o.jsxs("ul",{className:"space-y-2 text-sm text-gray-700",children:[o.jsx("li",{children:" Provide accurate details (name, contact info, group size, preferences)."}),o.jsx("li",{children:" Bookings are subject to availability and may require advance notice."}),o.jsx("li",{children:" Special accommodations should be requested in advance."})]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[o.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Attendance & Conduct"}),o.jsxs("ul",{className:"space-y-2 text-sm text-gray-700",children:[o.jsx("li",{children:" Arrive on time and follow guide instructions and campus policies."}),o.jsx("li",{children:" Minors must be accompanied by a responsible adult."}),o.jsx("li",{children:" Respect facilities and do not disrupt classes or activities."})]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[o.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Changes & Cancellation"}),o.jsxs("ul",{className:"space-y-2 text-sm text-gray-700",children:[o.jsx("li",{children:" You may request to reschedule or cancel subject to availability."}),o.jsx("li",{children:" We may modify or cancel bookings for safety, operational, or emergency reasons."}),o.jsx("li",{children:" No-shows may be restricted from future bookings."})]})]})]})]}),o.jsxs("div",{className:"mb-8",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx(Gg,{className:"w-5 h-5 text-blue-600"}),o.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"User Responsibilities"})]}),o.jsxs("div",{className:"space-y-3 text-gray-700",children:[o.jsx("p",{children:"When using the Service, you agree to:"}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs("p",{className:"flex items-start gap-2",children:[o.jsx(Ir,{className:"w-4 h-4 text-green-500 mt-0.5 flex-shrink-0"}),o.jsx("span",{className:"text-sm",children:"Provide accurate and up-to-date information."})]}),o.jsxs("p",{className:"flex items-start gap-2",children:[o.jsx(Ir,{className:"w-4 h-4 text-green-500 mt-0.5 flex-shrink-0"}),o.jsx("span",{className:"text-sm",children:"Use the Service lawfully and respectfully."})]}),o.jsxs("p",{className:"flex items-start gap-2",children:[o.jsx(Ir,{className:"w-4 h-4 text-green-500 mt-0.5 flex-shrink-0"}),o.jsx("span",{className:"text-sm",children:"Comply with campus and safety guidelines."})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("p",{className:"flex items-start gap-2",children:[o.jsx(ld,{className:"w-4 h-4 text-red-500 mt-0.5 flex-shrink-0"}),o.jsx("span",{className:"text-sm",children:"Not misuse, disrupt, or attempt to interfere with the Service."})]}),o.jsxs("p",{className:"flex items-start gap-2",children:[o.jsx(ld,{className:"w-4 h-4 text-red-500 mt-0.5 flex-shrink-0"}),o.jsx("span",{className:"text-sm",children:"Not submit false bookings or use the Service fraudulently."})]}),o.jsxs("p",{className:"flex items-start gap-2",children:[o.jsx(ld,{className:"w-4 h-4 text-red-500 mt-0.5 flex-shrink-0"}),o.jsx("span",{className:"text-sm",children:"Not share access credentials or others personal data without consent."})]})]})]})]})]}),o.jsxs("div",{className:"mb-8",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx(oi,{className:"w-5 h-5 text-blue-600"}),o.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Calendar & Third-Party Services"})]}),o.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:o.jsx("p",{className:"text-gray-700 text-sm",children:"If you connect Google Calendar or other services, you authorize us to create and manage events you request. You may revoke access at any time through your account with that provider. Use of third-party services is also governed by their own terms and policies."})})]}),o.jsxs("div",{className:"mb-8",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx(Jv,{className:"w-5 h-5 text-orange-600"}),o.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Disclaimers & Limitation of Liability"})]}),o.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-6",children:o.jsxs("div",{className:"space-y-4 text-orange-900",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium mb-2",children:"Service Availability"}),o.jsx("p",{className:"text-sm",children:"We strive for reliable service but do not guarantee uninterrupted or error-free operation. Events may be adjusted or cancelled due to factors beyond our control."})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium mb-2",children:"Limitation"}),o.jsx("p",{className:"text-sm",children:"To the maximum extent permitted by law, the Service is provided as is and we are not liable for indirect, incidental, special, consequential, or punitive damages arising from your use of the Service."})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium mb-2",children:"Safety"}),o.jsx("p",{className:"text-sm",children:"Tours may involve walking, stairs, uneven surfaces, or outdoor conditions. Participate safely and inform us of accessibility needs in advance."})]})]})})]}),o.jsxs("div",{className:"mb-8",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx(oi,{className:"w-5 h-5 text-blue-600"}),o.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Intellectual Property"})]}),o.jsxs("div",{className:"space-y-3 text-gray-700",children:[o.jsx("p",{children:"The Service and its content (design, text, images, software, and materials) are owned by or licensed to us. You may not copy, modify, distribute, or create derivative works without prior written permission."}),o.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:o.jsxs("ul",{className:"space-y-1 text-sm",children:[o.jsx("li",{children:" Website design, layout, and functionality"}),o.jsx("li",{children:" Text, images, logos, and multimedia content"}),o.jsx("li",{children:" Software, databases, and technical systems"}),o.jsx("li",{children:" Tour materials and educational content"})]})})]})]}),o.jsx("div",{className:"mb-8",children:o.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[o.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Privacy & Data Protection"}),o.jsx("p",{className:"text-blue-800 text-sm",children:"Your privacy is important to us. Please review our Privacy Policy to understand how we collect, use, and protect your personal information. By using the Service, you consent to those practices."})]})}),o.jsxs("div",{className:"mb-8",children:[o.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Changes to These Terms"}),o.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:o.jsx("p",{className:"text-gray-700 text-sm",children:"We may update these Terms from time to time. Material changes will be posted on this page or communicated through the Service. Your continued use after changes means you accept the updated Terms."})})]}),o.jsxs("div",{className:"border-t pt-8",children:[o.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Questions & Contact"}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[o.jsx("p",{className:"text-gray-700 mb-4",children:"If you have questions about these Terms or need assistance, please contact us:"}),o.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"Email:"})," ucsc@besa.edu"]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"Phone:"})," (831) 459-5840"]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"Office Hours:"})," MondayFriday, 8:00 AM5:00 PM"]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"Address:"})," Baskin Engineering, 606 Engineering Loop, Santa Cruz, CA 95064"]})]})]})]}),o.jsx("div",{className:"mt-8 p-4 bg-gray-100 rounded-lg",children:o.jsx("p",{className:"text-gray-600 text-sm text-center",children:"These Terms of Service are effective as of January 1, 2025, and govern your use of the BESA Tour Booking application."})})]})})]})},bP=()=>{const t=()=>{window.open("https://docs.google.com/forms/d/e/1FAIpQLSe9s1wtdLrSEOPOXNYieJKHECG8gSc76V8nEwpdhm5EGmETWg/viewform?usp=sharing&ouid=101709250725869391286","_blank")};return o.jsxs("button",{onClick:t,className:"fixed bottom-6 right-6 bg-blue-600 hover:bg-blue-700 text-white p-4 rounded-full shadow-lg transition-all duration-300 transform hover:scale-110 z-50 group",title:"Share Feedback",children:[o.jsx(hS,{className:"h-6 w-6"}),o.jsx("span",{className:"absolute right-16 top-1/2 transform -translate-y-1/2 bg-gray-800 text-white px-3 py-1 rounded-lg text-sm whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:"Feedback"})]})};function TP(){const[t,e]=R.useState([]),n=Is(),[r,s]=R.useState(0);R.useEffect(()=>{(async()=>{try{const d=(await bt(Qe(ve,"Tours"))).docs.map(p=>{const f=p.data();return{tourId:p.id,title:f.title??"",description:f.description??"",duration:f.duration??0,durationUnit:f.durationUnit??"minutes",maxAttendees:f.maxAttendees??1,location:f.location??"",zoomLink:f.zoomLink??"",autoGenerateZoom:f.autoGenerateZoom??!1,weeklyHours:f.weeklyHours??{},dateSpecificHours:f.dateSpecificHours??[],frequency:f.frequency??1,frequencyUnit:f.frequencyUnit??"hours",registrationLimit:f.registrationLimit??1,minNotice:f.minNotice??0,minNoticeUnit:f.minNoticeUnit??"hours",maxNotice:f.maxNotice??1,maxNoticeUnit:f.maxNoticeUnit??"days",bufferTime:f.bufferTime??0,bufferUnit:f.bufferUnit??"minutes",cancellationPolicy:f.cancellationPolicy??"",reschedulingPolicy:f.reschedulingPolicy??"",intakeForm:f.intakeForm??{firstName:!0,lastName:!0,email:!0,phone:!1,attendeeCount:!0,majorsInterested:!1,customQuestions:[]},reminderEmails:f.reminderEmails??[],sessionInstructions:f.sessionInstructions??"",published:f.published??!1,createdAt:f.createdAt??"",upcomingBookings:f.upcomingBookings??0,totalBookings:f.totalBookings??0}});e(d)}catch(u){console.error("Error fetching tours:",u)}})()},[]);const i=c=>{c.preventDefault();const u=r+1;u===3?(s(0),n("/admin/dashboard")):(s(u),setTimeout(()=>s(0),1500))},a=()=>o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:[o.jsx("header",{className:"bg-white shadow-sm border-b-4 border-orange-300",children:o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"flex justify-between items-center h-16",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("a",{href:"/",onClick:i,children:o.jsx("img",{src:"/BE_logo.png",alt:"BESA logo",className:"h-12 w-12 object-contain"})}),o.jsx("span",{className:"text-2xl font-medium text-blue-900",children:"BESA Tours"})]}),o.jsx("div",{className:"flex items-center space-x-4"})]})})}),o.jsx("div",{className:"bg-blue-900 text-white py-16 border-b-4 border-orange-300",children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[o.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-6",children:"Baskin Engineering Tours"}),o.jsx("p",{className:"text-xl md:text-2xl mb-8 opacity-90",children:"Book a personalized tour of the Baskin Engineering Building led by our BESA guides"}),o.jsx("a",{href:"#tour-options",children:o.jsx("button",{className:"bg-orange-400 text-white px-8 py-3 rounded-lg font-semibold text-lg hover:bg-orange-500 transition-colors transform hover:scale-105",children:"Book Your Tour Now"})}),o.jsx("a",{href:"/parking-instructions",className:"ml-4",children:o.jsx("button",{className:"bg-orange-400 text-white px-8 py-3 rounded-lg font-semibold text-lg hover:bg-orange-500 transition-colors transform hover:scale-105",children:"Parking Instructions"})})]})}),o.jsxs("div",{id:"tour-options",className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Choose The Tour That Best Suits You!"}),o.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Select from our variety of tour options designed to accommodate tour sizes and interests."})]}),o.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:t.filter(c=>c.published).map(c=>o.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 border-b-4 border-orange-300",children:o.jsxs("div",{className:"p-6 flex flex-col flex-grow",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-xl font-bold text-gray-900",children:c.title}),o.jsx("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded-full text-sm font-medium",children:"Available"})]}),o.jsxs("div",{className:"flex items-center space-x-4 mb-4 text-gray-600",children:[o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx(Ft,{className:"h-4 w-4"}),o.jsx("span",{className:"text-sm",children:c.duration})]}),o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx(Jt,{className:"h-4 w-4"}),o.jsxs("span",{className:"text-sm",children:["Max ",c.maxAttendees]})]})]}),o.jsxs("div",{className:"flex-grow flex flex-col justify-between",children:[o.jsx("p",{className:"text-gray-600 mb-6 max-h-32 overflow-y-auto",children:c.description}),o.jsx("button",{onClick:()=>n(`/booking/${c.tourId}`),className:"w-full bg-blue-700 text-white py-2 px-4 rounded-lg hover:bg-blue-900 transition-colors font-medium",children:"Select This Tour"})]})]})},c.tourId))})]}),o.jsx("div",{className:"mt-12 border-t py-6 text-center",children:o.jsxs("p",{className:"text-sm text-gray-500",children:[o.jsx("a",{href:"/terms-of-service",className:"text-blue-600 hover:underline mx-2",children:"Terms Of Service"}),"",o.jsx("a",{href:"/privacy-policy",className:"text-blue-600 hover:underline mx-2",children:"Privacy Policy"})]})})]});return o.jsxs(o.Fragment,{children:[o.jsxs(vT,{children:[o.jsx(Wt,{path:"/",element:o.jsx(a,{})}),o.jsx(Wt,{path:"/admin/dashboard",element:o.jsx(mo,{children:o.jsx(aP,{})})}),o.jsx(Wt,{path:"/admin/schedule",element:o.jsx(mo,{children:o.jsx(lP,{})})}),o.jsx(Wt,{path:"/admin/tours",element:o.jsx(mo,{children:o.jsx(dP,{})})}),o.jsx(Wt,{path:"/admin/besas",element:o.jsx(mo,{children:o.jsx(hP,{})})}),o.jsx(Wt,{path:"/admin/office-hours",element:o.jsx(mo,{children:o.jsx(fP,{})})}),o.jsx(Wt,{path:"/booking/:tourId",element:o.jsx(xP,{})}),o.jsx(Wt,{path:"/booking-confirmation",element:o.jsx(wP,{})}),o.jsx(Wt,{path:"/parking-instructions",element:o.jsx(_P,{})}),o.jsx(Wt,{path:"/terms-of-service",element:o.jsx(NP,{})}),o.jsx(Wt,{path:"/privacy-policy",element:o.jsx(EP,{})})]}),o.jsx(bP,{})]})}Rv(document.getElementById("root")).render(o.jsx(R.StrictMode,{children:o.jsx(zT,{children:o.jsx(TP,{})})}));
